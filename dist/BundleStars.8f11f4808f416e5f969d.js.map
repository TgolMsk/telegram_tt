{"version":3,"file":"BundleStars.8f11f4808f416e5f969d.js","mappings":"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","sources":["webpack://telegram-t/./src/bundles/stars.ts","webpack://telegram-t/./src/components/common/gift/GiftMenuItems.tsx","webpack://telegram-t/./src/components/common/gift/GiftTransferPreview.module.scss?0f0d","webpack://telegram-t/./src/components/common/gift/GiftTransferPreview.tsx","webpack://telegram-t/./src/components/common/helpers/giftOriginalInfo.tsx","webpack://telegram-t/./src/components/main/premium/StarsGiftingPickerModal.module.scss?3156","webpack://telegram-t/./src/components/main/premium/StarsGiftingPickerModal.tsx","webpack://telegram-t/./src/components/modals/gift/AboutStarGiftModal.module.scss?fd32","webpack://telegram-t/./src/components/modals/gift/AboutStarGiftModal.tsx","webpack://telegram-t/./src/components/modals/gift/GiftComposer.module.scss?dac8","webpack://telegram-t/./src/components/modals/gift/GiftComposer.tsx","webpack://telegram-t/./src/components/modals/gift/GiftItem.module.scss?c564","webpack://telegram-t/./src/components/modals/gift/GiftItemPremium.tsx","webpack://telegram-t/./src/components/modals/gift/GiftItemStar.tsx","webpack://telegram-t/./src/components/modals/gift/GiftModal.module.scss?fd13","webpack://telegram-t/./src/components/modals/gift/GiftModal.tsx","webpack://telegram-t/./src/components/modals/gift/GiftModalResaleScreen.tsx","webpack://telegram-t/./src/components/modals/gift/GiftResaleFilters.module.scss?c5a8","webpack://telegram-t/./src/components/modals/gift/GiftResaleFilters.tsx","webpack://telegram-t/./src/components/modals/gift/ResaleGiftMenuAttributeSticker.module.scss?8276","webpack://telegram-t/./src/components/modals/gift/ResaleGiftMenuAttributeSticker.tsx","webpack://telegram-t/./src/components/modals/gift/StarGiftCategoryList.module.scss?7d19","webpack://telegram-t/./src/components/modals/gift/StarGiftCategoryList.tsx","webpack://telegram-t/./src/components/modals/gift/StarGiftPriceDecreaseInfoModal.module.scss?c67d","webpack://telegram-t/./src/components/modals/gift/StarGiftPriceDecreaseInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/UniqueGiftHeader.module.scss?2bf6","webpack://telegram-t/./src/components/modals/gift/UniqueGiftHeader.tsx","webpack://telegram-t/./src/components/modals/gift/UniqueGiftManageButtons.module.scss?f41d","webpack://telegram-t/./src/components/modals/gift/UniqueGiftManageButtons.tsx","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionAcquiredModal.module.scss?de69","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionAcquiredModal.tsx","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionBidModal.module.scss?4508","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionBidModal.tsx","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionChangeRecipientModal.module.scss?43f4","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionChangeRecipientModal.tsx","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionInfoModal.module.scss?8779","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionModal.module.scss?eeff","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionModal.tsx","webpack://telegram-t/./src/components/modals/gift/info/GiftInfoModal.module.scss?4f0e","webpack://telegram-t/./src/components/modals/gift/info/GiftInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/locked/GiftLockedModal.module.scss?1055","webpack://telegram-t/./src/components/modals/gift/locked/GiftLockedModal.tsx","webpack://telegram-t/./src/components/modals/gift/message/GiftDescriptionRemoveModal.module.scss?7493","webpack://telegram-t/./src/components/modals/gift/message/GiftDescriptionRemoveModal.tsx","webpack://telegram-t/./src/components/modals/gift/recipient/GiftRecipientPicker.module.scss?b7e9","webpack://telegram-t/./src/components/modals/gift/recipient/GiftRecipientPicker.tsx","webpack://telegram-t/./src/components/modals/gift/resale/GiftResalePriceComposerModal.module.scss?6666","webpack://telegram-t/./src/components/modals/gift/resale/GiftResalePriceComposerModal.tsx","webpack://telegram-t/./src/components/modals/gift/status/GiftStatusInfoModal.module.scss?3366","webpack://telegram-t/./src/components/modals/gift/status/GiftStatusInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/transfer/GiftTransferConfirmModal.tsx","webpack://telegram-t/./src/components/modals/gift/transfer/GiftTransferModal.tsx","webpack://telegram-t/./src/components/modals/gift/upgrade/GiftUpgradeModal.module.scss?ae9e","webpack://telegram-t/./src/components/modals/gift/upgrade/GiftUpgradeModal.tsx","webpack://telegram-t/./src/components/modals/gift/value/GiftInfoValueModal.module.scss?3884","webpack://telegram-t/./src/components/modals/gift/value/GiftInfoValueModal.tsx","webpack://telegram-t/./src/components/modals/gift/withdraw/GiftWithdrawModal.module.scss?287b","webpack://telegram-t/./src/components/modals/gift/withdraw/GiftWithdrawModal.tsx","webpack://telegram-t/./src/components/modals/paidReaction/PaidReactionModal.module.scss?80b2","webpack://telegram-t/./src/components/modals/paidReaction/PaidReactionModal.tsx","webpack://telegram-t/./src/components/modals/paidReaction/StarSlider.module.scss?b8f3","webpack://telegram-t/./src/components/modals/paidReaction/StarSlider.tsx","webpack://telegram-t/./src/components/modals/priceConfirm/PriceConfirmModal.tsx","webpack://telegram-t/./src/components/modals/stars/BalanceBlock.tsx","webpack://telegram-t/./src/components/modals/stars/StarsBalanceModal.module.scss?bbd4","webpack://telegram-t/./src/components/modals/stars/StarsBalanceModal.tsx","webpack://telegram-t/./src/components/modals/stars/StarsPaymentModal.tsx","webpack://telegram-t/./src/components/modals/stars/chatRefund/ChatRefundModal.tsx","webpack://telegram-t/./src/components/modals/stars/gift/StarsGiftModal.module.scss?069e","webpack://telegram-t/./src/components/modals/stars/gift/StarsGiftModal.tsx","webpack://telegram-t/./src/components/modals/stars/helpers/transaction.ts","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionItem.module.scss?74b5","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionItem.tsx","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionModal.module.scss?5025","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionModal.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/PaidMediaThumb.module.scss?605d","webpack://telegram-t/./src/components/modals/stars/transaction/PaidMediaThumb.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionItem.module.scss?b947","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionItem.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionModal.module.scss?a215","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionModal.tsx","webpack://telegram-t/./src/hooks/useDebouncedMemo.ts","webpack://telegram-t/./src/hooks/usePeerSearch.ts"],"sourcesContent":["/* eslint-disable @stylistic/max-len */\n\nexport { default as StarsGiftModal } from '../components/modals/stars/gift/StarsGiftModal';\nexport { default as StarsGiftingPickerModal } from '../components/main/premium/StarsGiftingPickerModal';\nexport { default as StarsBalanceModal } from '../components/modals/stars/StarsBalanceModal';\nexport { default as StarPaymentModal } from '../components/modals/stars/StarsPaymentModal';\nexport { default as StarsTransactionInfoModal } from '../components/modals/stars/transaction/StarsTransactionModal';\nexport { default as StarsSubscriptionModal } from '../components/modals/stars/subscription/StarsSubscriptionModal';\nexport { default as PaidReactionModal } from '../components/modals/paidReaction/PaidReactionModal';\nexport { default as GiftModal } from '../components/modals/gift/GiftModal';\nexport { default as GiftRecipientPicker } from '../components/modals/gift/recipient/GiftRecipientPicker';\nexport { default as GiftInfoModal } from '../components/modals/gift/info/GiftInfoModal';\nexport { default as GiftInfoValueModal } from '../components/modals/gift/value/GiftInfoValueModal';\nexport { default as GiftLockedModal } from '../components/modals/gift/locked/GiftLockedModal';\nexport { default as GiftResalePriceComposerModal } from '../components/modals/gift/resale/GiftResalePriceComposerModal';\nexport { default as GiftUpgradeModal } from '../components/modals/gift/upgrade/GiftUpgradeModal';\nexport { default as GiftAuctionModal } from '../components/modals/gift/auction/GiftAuctionModal';\nexport { default as GiftAuctionBidModal } from '../components/modals/gift/auction/GiftAuctionBidModal';\nexport { default as GiftAuctionInfoModal } from '../components/modals/gift/auction/GiftAuctionInfoModal';\nexport { default as GiftAuctionAcquiredModal } from '../components/modals/gift/auction/GiftAuctionAcquiredModal';\nexport { default as GiftAuctionChangeRecipientModal } from '../components/modals/gift/auction/GiftAuctionChangeRecipientModal';\nexport { default as StarGiftPriceDecreaseInfoModal } from '../components/modals/gift/StarGiftPriceDecreaseInfoModal';\nexport { default as AboutStarGiftModal } from '../components/modals/gift/AboutStarGiftModal';\nexport { default as GiftStatusInfoModal } from '../components/modals/gift/status/GiftStatusInfoModal';\nexport { default as GiftWithdrawModal } from '../components/modals/gift/withdraw/GiftWithdrawModal';\nexport { default as GiftTransferModal } from '../components/modals/gift/transfer/GiftTransferModal';\nexport { default as GiftTransferConfirmModal } from '../components/modals/gift/transfer/GiftTransferConfirmModal';\nexport { default as GiftDescriptionRemoveModal } from '../components/modals/gift/message/GiftDescriptionRemoveModal';\nexport { default as ChatRefundModal } from '../components/modals/stars/chatRefund/ChatRefundModal';\nexport { default as PriceConfirmModal } from '../components/modals/priceConfirm/PriceConfirmModal';\n","import { memo, useMemo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type {\n  ApiEmojiStatusCollectible, ApiEmojiStatusType, ApiSavedStarGift, ApiStarGift,\n} from '../../../api/types';\n\nimport { DEFAULT_STATUS_ICON_ID, TME_LINK_PREFIX } from '../../../config';\nimport { STARS_CURRENCY_CODE } from '../../../config';\nimport { copyTextToClipboard } from '../../../util/clipboard';\nimport { formatDateAtTime } from '../../../util/dates/dateFormat';\nimport { getServerTime } from '../../../util/serverTime';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport MenuItem from '../../ui/MenuItem';\n\ntype OwnProps = {\n  peerId: string;\n  canManage?: boolean;\n  gift: ApiSavedStarGift | ApiStarGift;\n  currentUserEmojiStatus?: ApiEmojiStatusType;\n  collectibleEmojiStatuses?: ApiEmojiStatusType[];\n};\n\nconst GiftMenuItems = ({\n  peerId,\n  canManage,\n  gift: typeGift,\n  currentUserEmojiStatus,\n  collectibleEmojiStatuses,\n}: OwnProps) => {\n  const {\n    showNotification,\n    openChatWithDraft,\n    openGiftTransferModal,\n    openGiftResalePriceComposerModal,\n    openGiftStatusInfoModal,\n    setEmojiStatus,\n    toggleSavedGiftPinned,\n    changeGiftVisibility,\n    updateStarGiftPrice,\n    closeGiftInfoModal,\n  } = getActions();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n\n  const isSavedGift = typeGift && 'gift' in typeGift;\n  const savedGift = isSavedGift ? typeGift : undefined;\n  const gift = isSavedGift ? typeGift.gift : typeGift;\n\n  const starGiftUniqueSlug = gift?.type === 'starGiftUnique' ? gift.slug : undefined;\n  const starGiftUniqueLink = useMemo(() => {\n    if (!starGiftUniqueSlug) return undefined;\n    return `${TME_LINK_PREFIX}nft/${starGiftUniqueSlug}`;\n  }, [starGiftUniqueSlug]);\n  const userCollectibleStatus = useMemo(() => {\n    if (!starGiftUniqueSlug) return undefined;\n    return collectibleEmojiStatuses?.find((\n      status,\n    ) => status.type === 'collectible' && status.slug === starGiftUniqueSlug) as ApiEmojiStatusCollectible | undefined;\n  }, [starGiftUniqueSlug, collectibleEmojiStatuses]);\n\n  const currenUniqueEmojiStatusSlug = currentUserEmojiStatus?.type === 'collectible'\n    ? currentUserEmojiStatus.slug : undefined;\n\n  const isGiftUnique = gift && gift.type === 'starGiftUnique';\n  const canTakeOff = isGiftUnique && currenUniqueEmojiStatusSlug === gift.slug;\n  const canWear = userCollectibleStatus && !canTakeOff;\n  const giftResalePrice = isGiftUnique ? gift.resellPrice : undefined;\n\n  const hasPinOptions = canManage && savedGift && !savedGift.isUnsaved && isGiftUnique;\n\n  const handleTriggerVisibility = useLastCallback(() => {\n    const { inputGift, isUnsaved } = savedGift!;\n    changeGiftVisibility({ gift: inputGift!, shouldUnsave: !isUnsaved });\n  });\n\n  const handleCopyLink = useLastCallback(() => {\n    if (!starGiftUniqueLink) return;\n    copyTextToClipboard(starGiftUniqueLink);\n    showNotification({\n      message: lang('LinkCopied'),\n    });\n  });\n\n  const handleLinkShare = useLastCallback(() => {\n    if (!starGiftUniqueLink) return;\n    openChatWithDraft({ text: { text: starGiftUniqueLink } });\n  });\n\n  const handleTransfer = useLastCallback(() => {\n    if (!savedGift || savedGift?.gift.type !== 'starGiftUnique') return;\n\n    if (savedGift.canTransferAt && savedGift.canTransferAt > getServerTime()) {\n      showNotification({\n        message: {\n          key: 'NotificationGiftCanTransferAt',\n          variables: { date: formatDateAtTime(oldLang, savedGift.canTransferAt * 1000) },\n        },\n      });\n      return;\n    }\n\n    openGiftTransferModal({ gift: savedGift });\n  });\n\n  const handleSell = useLastCallback(() => {\n    if (!savedGift) return;\n    if (savedGift.canResellAt && savedGift.canResellAt > getServerTime()) {\n      showNotification({\n        message: {\n          key: 'NotificationGiftCanResellAt',\n          variables: { date: formatDateAtTime(oldLang, savedGift.canResellAt * 1000) },\n        },\n      });\n      return;\n    }\n    openGiftResalePriceComposerModal({ peerId, gift: savedGift });\n  });\n\n  const handleUnsell = useLastCallback(() => {\n    if (!savedGift || savedGift.gift.type !== 'starGiftUnique' || !savedGift.inputGift) return;\n    closeGiftInfoModal();\n    updateStarGiftPrice({ gift: savedGift.inputGift, price: {\n      currency: STARS_CURRENCY_CODE, amount: 0, nanos: 0,\n    } });\n    showNotification({\n      icon: 'unlist-outline',\n      message: {\n        key: 'NotificationGiftIsUnlist',\n        variables: { gift: lang('GiftUnique', { title: savedGift.gift.title, number: savedGift.gift.number }) },\n      },\n    });\n  });\n\n  const handleWear = useLastCallback(() => {\n    if (gift?.type !== 'starGiftUnique' || !userCollectibleStatus) return;\n    openGiftStatusInfoModal({ emojiStatus: userCollectibleStatus });\n  });\n\n  const handleTakeOff = useLastCallback(() => {\n    if (canTakeOff) {\n      setEmojiStatus({\n        emojiStatus: { type: 'regular', documentId: DEFAULT_STATUS_ICON_ID },\n      });\n    }\n  });\n\n  const handleTogglePin = useLastCallback(() => {\n    toggleSavedGiftPinned({ peerId, gift: savedGift! });\n  });\n\n  return (\n    <>\n      {hasPinOptions && (\n        <MenuItem icon={savedGift.isPinned ? 'unpin' : 'pin'} onClick={handleTogglePin}>\n          {lang(savedGift.isPinned ? 'ChatListUnpinFromTop' : 'ChatListPinToTop')}\n        </MenuItem>\n      )}\n      <MenuItem icon=\"link-badge\" onClick={handleCopyLink}>\n        {lang('CopyLink')}\n      </MenuItem>\n      <MenuItem icon=\"forward\" onClick={handleLinkShare}>\n        {lang('Share')}\n      </MenuItem>\n      {canManage && isGiftUnique && (\n        <MenuItem icon=\"diamond\" onClick={handleTransfer}>\n          {lang('GiftInfoTransfer')}\n        </MenuItem>\n      )}\n      {canManage && isGiftUnique && !giftResalePrice && (\n        <MenuItem icon=\"sell-outline\" onClick={handleSell}>\n          {lang('Sell')}\n        </MenuItem>\n      )}\n      {canManage && isGiftUnique && Boolean(giftResalePrice) && (\n        <MenuItem icon=\"unlist-outline\" onClick={handleUnsell}>\n          {lang('GiftInfoUnlist')}\n        </MenuItem>\n      )}\n      {canManage && savedGift && (\n        <MenuItem icon={savedGift.isUnsaved ? 'eye-outline' : 'eye-crossed-outline'} onClick={handleTriggerVisibility}>\n          {lang(savedGift.isUnsaved ? 'GiftActionShow' : 'GiftActionHide')}\n        </MenuItem>\n      )}\n      {canWear && (\n        <MenuItem icon=\"crown-wear-outline\" onClick={handleWear}>\n          {lang('GiftInfoWear')}\n        </MenuItem>\n      )}\n      {canTakeOff && (\n        <MenuItem icon=\"crown-take-off-outline\" onClick={handleTakeOff}>\n          {lang('GiftInfoTakeOff')}\n        </MenuItem>\n      )}\n    </>\n  );\n};\n\nexport default memo(GiftMenuItems);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Ef0cKSqQ\",\"giftPreview\":\"IvuNzslN\",\"backdrop\":\"dNukis4X\",\"arrow\":\"oufsMLLF\"};","import { memo, useMemo } from '../../../lib/teact/teact';\n\nimport type {\n  ApiPeer, ApiStarGiftUnique,\n} from '../../../api/types';\n\nimport { getGiftAttributes } from '../helpers/gifts';\nimport { REM } from '../helpers/mediaDimensions';\n\nimport AnimatedIconFromSticker from '../AnimatedIconFromSticker';\nimport Avatar from '../Avatar';\nimport Icon from '../icons/Icon';\nimport RadialPatternBackground from '../profile/RadialPatternBackground';\n\nimport styles from './GiftTransferPreview.module.scss';\n\ntype OwnProps = {\n  peer: ApiPeer;\n  gift: ApiStarGiftUnique;\n};\n\nconst AVATAR_SIZE = 4 * REM;\nconst GIFT_STICKER_SIZE = 3 * REM;\n\nconst GiftTransferPreview = ({\n  peer,\n  gift,\n}: OwnProps) => {\n  const giftAttributes = useMemo(() => {\n    return getGiftAttributes(gift);\n  }, [gift]);\n\n  if (!giftAttributes) return undefined;\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.giftPreview}>\n        <RadialPatternBackground\n          className={styles.backdrop}\n          backgroundColors={[giftAttributes.backdrop!.centerColor, giftAttributes.backdrop!.edgeColor]}\n          patternIcon={giftAttributes.pattern?.sticker}\n          ringsCount={1}\n          ovalFactor={1}\n          patternSize={12}\n        />\n        <AnimatedIconFromSticker\n          className={styles.sticker}\n          size={GIFT_STICKER_SIZE}\n          sticker={giftAttributes.model?.sticker}\n        />\n      </div>\n      <Icon name=\"next\" className={styles.arrow} />\n      <Avatar\n        peer={peer}\n        size={AVATAR_SIZE}\n        className={styles.avatar}\n      />\n    </div>\n  );\n};\n\nexport default memo(GiftTransferPreview);\n","import type { TeactNode } from '../../../lib/teact/teact';\n\nimport type { ApiPeer, ApiStarGiftAttributeOriginalDetails } from '../../../api/types';\n\nimport { getPeerTitle } from '../../../global/helpers/peers';\nimport { formatDateTimeToString } from '../../../util/dates/dateFormat';\nimport { type LangFn } from '../../../util/localization';\nimport { renderTextWithEntities } from './renderTextWithEntities';\n\nimport Link from '../../ui/Link';\n\ntype GiftOriginalInfoOptions = {\n  originalDetails: ApiStarGiftAttributeOriginalDetails;\n  recipient: ApiPeer;\n  sender?: ApiPeer;\n  onOpenChat: (peerId: string) => void;\n  lang: LangFn;\n};\n\nexport function renderGiftOriginalInfo({\n  originalDetails,\n  recipient,\n  sender,\n  onOpenChat,\n  lang,\n}: GiftOriginalInfoOptions): TeactNode | undefined {\n  const { recipientId, senderId, date, message } = originalDetails;\n\n  const formattedDate = formatDateTimeToString(date * 1000, lang.code, true);\n  const recipientLink = (\n    <Link onClick={() => onOpenChat(recipientId)} isPrimary>\n      {getPeerTitle(lang, recipient)}\n    </Link>\n  );\n\n  if (!sender || senderId === recipientId) {\n    return message\n      ? lang('GiftInfoPeerOriginalInfoText', {\n        peer: recipientLink,\n        text: renderTextWithEntities(message),\n        date: formattedDate,\n      }, {\n        withNodes: true,\n      })\n      : lang('GiftInfoPeerOriginalInfo', {\n        peer: recipientLink,\n        date: formattedDate,\n      }, {\n        withNodes: true,\n      });\n  }\n\n  const senderLink = (\n    <Link onClick={() => onOpenChat(sender.id)} isPrimary>\n      {getPeerTitle(lang, sender)}\n    </Link>\n  );\n\n  return message\n    ? lang('GiftInfoPeerOriginalInfoTextSender', {\n      peer: recipientLink,\n      sender: senderLink,\n      text: renderTextWithEntities(message),\n      date: formattedDate,\n    }, {\n      withNodes: true,\n    })\n    : lang('GiftInfoPeerOriginalInfoSender', {\n      peer: recipientLink,\n      date: formattedDate,\n      sender: senderLink,\n    }, {\n      withNodes: true,\n    });\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"s3k01dTm\",\"transition\":\"BNA0_b5j\",\"main\":\"Oadi16vt\",\"filter\":\"z84KbvhX\",\"title\":\"Jnsrau29\",\"buttons\":\"NnVyYB32\",\"picker\":\"cuI2eDIY\",\"avatars\":\"ILtw_aNL\",\"center\":\"eIfMzHv5\",\"description\":\"FlNJWZ5P\",\"premiumFeatures\":\"xIv0Yaur\",\"options\":\"eNJRXn6P\",\"button\":\"KDNKXBp5\"};","import type { FC } from '../../../lib/teact/teact';\nimport {\n  memo, useMemo,\n  useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport { SERVICE_NOTIFICATIONS_USER_ID } from '../../../config';\nimport {\n  isDeletedUser, isUserBot,\n} from '../../../global/helpers';\nimport { filterPeersByQuery } from '../../../global/helpers/peers';\nimport { unique } from '../../../util/iteratees';\nimport sortChatIds from '../../common/helpers/sortChatIds';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport PeerPicker from '../../common/pickers/PeerPicker';\nimport PickerModal from '../../common/pickers/PickerModal';\n\nimport styles from './StarsGiftingPickerModal.module.scss';\n\nexport type OwnProps = {\n  isOpen?: boolean;\n};\n\ninterface StateProps {\n  currentUserId?: string;\n  userIds?: string[];\n  activeListIds?: string[];\n  archivedListIds?: string[];\n}\n\nconst StarsGiftingPickerModal: FC<OwnProps & StateProps> = ({\n  isOpen,\n  currentUserId,\n  activeListIds,\n  archivedListIds,\n  userIds,\n}) => {\n  const { closeStarsGiftingPickerModal, openStarsGiftModal } = getActions();\n\n  const oldLang = useOldLang();\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const displayedUserIds = useMemo(() => {\n    const usersById = getGlobal().users.byId;\n    const combinedIds = unique([\n      ...(userIds || []),\n      ...(activeListIds || []),\n      ...(archivedListIds || []),\n    ]);\n\n    const filteredUserIds = filterPeersByQuery({\n      ids: combinedIds, query: searchQuery, type: 'user',\n    });\n\n    return sortChatIds(filteredUserIds.filter((id) => {\n      const user = usersById[id];\n\n      if (!user) {\n        return false;\n      }\n\n      return !user.isSupport\n        && !isUserBot(user) && !isDeletedUser(user)\n        && id !== currentUserId && id !== SERVICE_NOTIFICATIONS_USER_ID;\n    }));\n  }, [currentUserId, searchQuery, userIds, activeListIds, archivedListIds]);\n\n  const handleSelectedUserIdsChange = useLastCallback((newSelectedId?: string) => {\n    if (newSelectedId?.length) {\n      openStarsGiftModal({ forUserId: newSelectedId });\n      closeStarsGiftingPickerModal();\n    }\n  });\n\n  return (\n    <PickerModal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={closeStarsGiftingPickerModal}\n      title={oldLang('GiftStarsTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n      confirmButtonText={oldLang('Continue')}\n      onEnter={closeStarsGiftingPickerModal}\n    >\n      <PeerPicker\n        className={styles.picker}\n        itemIds={displayedUserIds}\n        filterValue={searchQuery}\n        filterPlaceholder={oldLang('Search')}\n        onFilterChange={setSearchQuery}\n        isSearchable\n        withDefaultPadding\n        withStatus\n        onSelectedIdChange={handleSelectedUserIdsChange}\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): Complete<StateProps> => {\n  const {\n    chats: {\n      listIds,\n    },\n    currentUserId,\n  } = global;\n\n  return {\n    userIds: global.contactList?.userIds,\n    activeListIds: listIds.active,\n    archivedListIds: listIds.archived,\n    currentUserId,\n  };\n})(StarsGiftingPickerModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"kSwGxZvD\",\"content\":\"rGPBNoZR\",\"videoPreviewWrapper\":\"e4SGnYtk\",\"sparkles\":\"wYp9XwdI\",\"title\":\"CMt0et4C\",\"subtitle\":\"exd4nt_X\",\"footer\":\"hx2wl4Ar\",\"understoodIcon\":\"qegJKhEH\"};","import { memo, useMemo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { TabState } from '../../../global/types';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Sparkles from '../../common/Sparkles';\nimport PremiumFeaturePreviewVideo from '../../main/premium/previews/PremiumFeaturePreviewVideo';\nimport Button from '../../ui/Button';\nimport TableAboutModal, { type TableAboutData } from '../common/TableAboutModal';\n\nimport styles from './AboutStarGiftModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['aboutStarGiftModal'];\n};\n\nconst AboutStarGiftModal = ({\n  modal,\n}: OwnProps) => {\n  const { closeAboutStarGiftModal } = getActions();\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const handleClose = useLastCallback(() => {\n    closeAboutStarGiftModal();\n  });\n\n  const header = useMemo(() => {\n    return (\n      <div className={styles.header}>\n        <div className={styles.videoPreviewWrapper}>\n          <Sparkles preset=\"progress\" className={styles.sparkles} />\n          <PremiumFeaturePreviewVideo\n            videoId={renderingModal?.videoId}\n            videoThumbnail={renderingModal?.videoThumbnail}\n            isActive={isOpen}\n            isDown\n          />\n        </div>\n        <div className={styles.title}>\n          {lang('StarGiftInfoTitle')}\n        </div>\n        <div className={styles.subtitle}>\n          {lang('StarGiftInfoSubtitle')}\n        </div>\n      </div>\n    );\n  }, [lang, renderingModal, isOpen]);\n\n  const footer = useMemo(() => {\n    if (!isOpen) return undefined;\n    return (\n      <div className={styles.footer}>\n        <Button\n          iconName=\"understood\"\n          iconClassName={styles.understoodIcon}\n          onClick={handleClose}\n        >\n          {lang('ButtonUnderstood')}\n        </Button>\n      </div>\n    );\n  }, [lang, isOpen, handleClose]);\n\n  const listItemData = useMemo(() => {\n    return [\n      ['diamond', lang('StarGiftInfoUniqueTitle'), lang('StarGiftInfoUniqueSubtitle')],\n      ['auction', lang('StarGiftInfoTradableTitle'), lang('StarGiftInfoTradableSubtitle')],\n      ['crown-wear-outline', lang('StarGiftInfoWearableTitle'), lang('StarGiftInfoWearableSubtitle')],\n    ] satisfies TableAboutData;\n  }, [lang]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      contentClassName={styles.content}\n      header={header}\n      listItemData={listItemData}\n      footer={footer}\n      hasBackdrop={Boolean(renderingModal?.videoId)}\n      absoluteCloseButtonColor=\"translucent-white\"\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(AboutStarGiftModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"jKOG0It6\",\"header\":\"A_fX4EXY\",\"spacer\":\"ATowWJ60\",\"title\":\"gDNtv9oz\",\"balance-container\":\"eAKZVhOT\",\"balanceContainer\":\"eAKZVhOT\",\"balance-caption\":\"vbwprYel\",\"balanceCaption\":\"vbwprYel\",\"star-balance\":\"lXuIlbVK\",\"starBalance\":\"lXuIlbVK\",\"balance\":\"dIEx_Iqi\",\"optionsSection\":\"Y68CEIKn\",\"checkboxTitle\":\"H4taXei_\",\"actionMessageView\":\"CB1mxsgp\",\"messageInput\":\"o5r2IPoA\",\"limited\":\"mWzLu0c0\",\"footer\":\"jxWZSvet\",\"switcher\":\"zZUpGRSI\",\"switcherStarIcon\":\"zAee80Dv\",\"bottomDescription\":\"j4s8T1dQ\",\"description\":\"nTPAv1ci\",\"main-button\":\"IDuhjrne\",\"mainButton\":\"IDuhjrne\",\"buttonSubtitle\":\"pB6hqcvA\",\"star\":\"Q4NlMT0o\",\"background\":\"ZORVRSG3\",\"customBgImage\":\"Eny_G3JI\",\"customBgColor\":\"TkJZPU2u\",\"withTransition\":\"soDpW2YR\",\"blurred\":\"M6k91TdM\",\"withRightColumn\":\"FBcNO8hj\"};","import type { ChangeEvent } from 'react';\nimport {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ThemeKey } from '../../../types';\nimport type { GiftOption } from './GiftModal';\nimport {\n  type ApiMessage, type ApiPeer, type ApiStarGiftAuctionState, type ApiStarsAmount, MAIN_THREAD_ID,\n} from '../../../api/types';\n\nimport { getPeerTitle, isApiPeerUser } from '../../../global/helpers/peers';\nimport {\n  selectPeer, selectPeerPaidMessagesStars, selectTabState, selectTheme, selectThemeValues, selectUserFullInfo,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport buildStyle from '../../../util/buildStyle';\nimport { formatCountdown } from '../../../util/dates/dateFormat';\nimport { HOUR } from '../../../util/dates/units';\nimport { formatCurrency } from '../../../util/formatCurrency';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\nimport { getServerTime } from '../../../util/serverTime';\n\nimport useCustomBackground from '../../../hooks/useCustomBackground';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport PremiumProgress from '../../common/PremiumProgress';\nimport ActionMessage from '../../middle/message/ActionMessage';\nimport Button from '../../ui/Button';\nimport Link from '../../ui/Link';\nimport ListItem from '../../ui/ListItem';\nimport Switcher from '../../ui/Switcher';\nimport TextArea from '../../ui/TextArea';\nimport TextTimer from '../../ui/TextTimer';\n\nimport styles from './GiftComposer.module.scss';\n\nexport type OwnProps = {\n  gift: GiftOption;\n  giftByStars?: GiftOption;\n  peerId: string;\n};\n\nexport type StateProps = {\n  captionLimit?: number;\n  theme: ThemeKey;\n  isBackgroundBlurred?: boolean;\n  patternColor?: string;\n  customBackground?: string;\n  backgroundColor?: string;\n  peer?: ApiPeer;\n  currentUserId?: string;\n  isPaymentFormLoading?: boolean;\n  starBalance?: ApiStarsAmount;\n  paidMessagesStars?: number;\n  areUniqueStarGiftsDisallowed?: boolean;\n  shouldDisallowLimitedStarGifts?: boolean;\n  giftAuction?: ApiStarGiftAuctionState;\n};\n\nconst LIMIT_DISPLAY_THRESHOLD = 50;\nconst TEXT_TIMER_THRESHOLD = 48 * HOUR;\n\nfunction GiftComposer({\n  gift,\n  giftByStars,\n  peerId,\n  peer,\n  captionLimit,\n  theme,\n  isBackgroundBlurred,\n  patternColor,\n  backgroundColor,\n  customBackground,\n  currentUserId,\n  isPaymentFormLoading,\n  starBalance,\n  paidMessagesStars,\n  areUniqueStarGiftsDisallowed,\n  shouldDisallowLimitedStarGifts,\n  giftAuction,\n}: OwnProps & StateProps) {\n  const {\n    sendStarGift, sendPremiumGiftByStars, openInvoice, openGiftUpgradeModal, openStarsBalanceModal,\n    openGiftAuctionBidModal, openGiftAuctionInfoModal, openGiftAuctionChangeRecipientModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const [giftMessage, setGiftMessage] = useState<string>('');\n  const [shouldHideName, setShouldHideName] = useState<boolean>(false);\n  const [shouldPayForUpgrade, setShouldPayForUpgrade] = useState<boolean>(false);\n  const [shouldPayByStars, setShouldPayByStars] = useState<boolean>(false);\n\n  const customBackgroundValue = useCustomBackground(theme, customBackground);\n\n  useEffect(() => {\n    if (shouldDisallowLimitedStarGifts) {\n      setShouldPayForUpgrade(true);\n    }\n  }, [shouldDisallowLimitedStarGifts, shouldPayForUpgrade]);\n\n  const isStarGift = 'id' in gift && gift.type === 'starGift';\n  const isPremiumGift = 'months' in gift;\n  const hasPremiumByStars = giftByStars && 'amount' in giftByStars;\n  const isPeerUser = peer && isApiPeerUser(peer);\n  const isSelf = peerId === currentUserId;\n\n  const localMessage = useMemo(() => {\n    if (isPremiumGift) {\n      const currentGift = shouldPayByStars && hasPremiumByStars ? giftByStars : gift;\n      return {\n        id: -1,\n        chatId: '0',\n        isOutgoing: false,\n        senderId: currentUserId,\n        date: Math.floor(Date.now() / 1000),\n        content: {\n          action: {\n            mediaType: 'action',\n            type: 'giftPremium',\n            amount: currentGift.amount,\n            currency: currentGift.currency,\n            days: gift.months * 30,\n            message: giftMessage ? { text: giftMessage } : undefined,\n          },\n        },\n      } satisfies ApiMessage;\n    }\n\n    if (isStarGift) {\n      return {\n        id: -1,\n        chatId: '0',\n        isOutgoing: false,\n        senderId: currentUserId,\n        date: Math.floor(Date.now() / 1000),\n        content: {\n          action: {\n            mediaType: 'action',\n            type: 'starGift',\n            message: giftMessage?.length ? {\n              text: giftMessage,\n            } : undefined,\n            isNameHidden: shouldHideName || undefined,\n            starsToConvert: gift.starsToConvert,\n            canUpgrade: shouldPayForUpgrade || undefined,\n            alreadyPaidUpgradeStars: shouldPayForUpgrade ? gift.upgradeStars : undefined,\n            gift,\n            peerId,\n            fromId: currentUserId,\n          },\n        },\n      } satisfies ApiMessage;\n    }\n    return undefined;\n  }, [currentUserId, gift, giftMessage, isStarGift,\n    shouldHideName, shouldPayForUpgrade, peerId,\n    shouldPayByStars, hasPremiumByStars, giftByStars, isPremiumGift]);\n\n  const handleGiftMessageChange = useLastCallback((e: ChangeEvent<HTMLTextAreaElement>) => {\n    setGiftMessage(e.target.value);\n  });\n\n  const handleShouldHideNameChange = useLastCallback(() => {\n    setShouldHideName(!shouldHideName);\n  });\n\n  const handleShouldPayForUpgradeChange = useLastCallback(() => {\n    setShouldPayForUpgrade(!shouldPayForUpgrade);\n  });\n\n  const toggleShouldPayByStars = useLastCallback(() => {\n    if (hasPremiumByStars) setShouldPayByStars(!shouldPayByStars);\n  });\n\n  const handleOpenUpgradePreview = useLastCallback(() => {\n    if (!isStarGift) return;\n    openGiftUpgradeModal({\n      giftId: gift.id,\n      peerId,\n    });\n  });\n\n  const handleGetMoreStars = useLastCallback(() => {\n    openStarsBalanceModal({});\n  });\n\n  const handleLearnMoreClick = useLastCallback(() => {\n    if (!giftAuction) return;\n    openGiftAuctionInfoModal({ auctionGiftId: giftAuction.gift.id });\n  });\n\n  const handleMainButtonClick = useLastCallback(() => {\n    if (giftAuction) {\n      const existingBidPeerId = giftAuction.userState.bidPeerId;\n      if (existingBidPeerId && existingBidPeerId !== peerId) {\n        openGiftAuctionChangeRecipientModal({\n          auctionGiftId: giftAuction.gift.id,\n          oldPeerId: existingBidPeerId,\n          newPeerId: peerId,\n          message: giftMessage || undefined,\n          shouldHideName: shouldHideName || undefined,\n        });\n        return;\n      }\n\n      openGiftAuctionBidModal({\n        auctionGiftId: giftAuction.gift.id,\n        peerId,\n        message: giftMessage || undefined,\n        shouldHideName: shouldHideName || undefined,\n      });\n      return;\n    }\n\n    if (isStarGift) {\n      sendStarGift({\n        peerId,\n        shouldHideName,\n        gift,\n        message: giftMessage ? { text: giftMessage } : undefined,\n        shouldUpgrade: shouldPayForUpgrade,\n      });\n      return;\n    }\n\n    if (shouldPayByStars && hasPremiumByStars) {\n      sendPremiumGiftByStars({\n        userId: peerId,\n        months: giftByStars.months,\n        amount: giftByStars.amount,\n        message: giftMessage ? { text: giftMessage } : undefined,\n      });\n      return;\n    }\n\n    if (isPremiumGift) {\n      openInvoice({\n        type: 'giftcode',\n        userIds: [peerId],\n        currency: gift.currency,\n        amount: gift.amount,\n        option: gift,\n        message: giftMessage ? { text: giftMessage } : undefined,\n      });\n    }\n  });\n\n  const canUseStarsPayment = hasPremiumByStars && starBalance && (starBalance.amount > giftByStars.amount);\n  function renderOptionsSection() {\n    const symbolsLeft = captionLimit ? captionLimit - giftMessage.length : undefined;\n\n    const title = getPeerTitle(lang, peer!)!;\n    return (\n      <div className={styles.optionsSection}>\n\n        {!paidMessagesStars && (\n          <TextArea\n            className={styles.messageInput}\n            onChange={handleGiftMessageChange}\n            value={giftMessage}\n            label={lang('GiftMessagePlaceholder')}\n            maxLength={captionLimit}\n            maxLengthIndicator={\n              symbolsLeft && symbolsLeft < LIMIT_DISPLAY_THRESHOLD ? symbolsLeft.toString() : undefined\n            }\n          />\n        )}\n\n        {canUseStarsPayment && (\n          <ListItem className={styles.switcher} narrow ripple onClick={toggleShouldPayByStars}>\n            <span>\n              {lang('GiftPremiumPayWithStars', {\n                stars: formatStarsAsIcon(lang, giftByStars.amount, { className: styles.switcherStarIcon }),\n              }, { withNodes: true })}\n            </span>\n            <Switcher\n              checked={shouldPayByStars}\n              onChange={toggleShouldPayByStars}\n              label={lang('GiftPremiumPayWithStarsAcc')}\n            />\n          </ListItem>\n        )}\n\n        {hasPremiumByStars && starBalance && (\n          <div className={styles.description}>\n            {lang('GiftPremiumDescriptionYourBalance', {\n              stars: formatStarsAsIcon(lang, starBalance.amount, { className: styles.switcherStarIcon }),\n              link: <Link isPrimary onClick={handleGetMoreStars}>{lang('GetMoreStarsLinkText')}</Link>,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n            })}\n          </div>\n        )}\n\n        {isStarGift && Boolean(gift.upgradeStars) && !areUniqueStarGiftsDisallowed && (\n          <ListItem\n            className={styles.switcher}\n            narrow\n            ripple\n            onClick={handleShouldPayForUpgradeChange}\n            disabled={shouldDisallowLimitedStarGifts}\n          >\n            <span>\n              {lang('GiftMakeUnique', {\n                stars: formatStarsAsIcon(lang, gift.upgradeStars, { className: styles.switcherStarIcon }),\n              }, { withNodes: true })}\n            </span>\n            <Switcher\n              checked={shouldPayForUpgrade}\n              onChange={handleShouldPayForUpgradeChange}\n              label={lang('GiftMakeUniqueAcc')}\n            />\n          </ListItem>\n        )}\n        {isStarGift && Boolean(gift.upgradeStars) && !areUniqueStarGiftsDisallowed && (\n          <div className={styles.description}>\n            {isPeerUser\n              ? lang('GiftMakeUniqueDescription', {\n                user: title,\n                link: <Link isPrimary onClick={handleOpenUpgradePreview}>{lang('GiftMakeUniqueLink')}</Link>,\n              }, {\n                withNodes: true,\n              })\n              : lang('GiftMakeUniqueDescriptionChannel', {\n                peer: title,\n                link: <Link isPrimary onClick={handleOpenUpgradePreview}>{lang('GiftMakeUniqueLink')}</Link>,\n              }, {\n                withNodes: true,\n              })}\n          </div>\n        )}\n\n        {isStarGift && (\n          <ListItem className={styles.switcher} narrow ripple onClick={handleShouldHideNameChange}>\n            <span>{lang('GiftHideMyName')}</span>\n            <Switcher\n              checked={shouldHideName}\n              onChange={handleShouldHideNameChange}\n              label={lang('GiftHideMyName')}\n            />\n          </ListItem>\n        )}\n        {isStarGift && (\n          <div className={styles.description}>\n            {isSelf ? lang('GiftHideNameDescriptionSelf')\n              : isPeerUser ? lang('GiftHideNameDescription', { receiver: title })\n                : lang('GiftHideNameDescriptionChannel')}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  function renderFooter() {\n    const amount = shouldPayByStars && hasPremiumByStars\n      ? formatStarsAsIcon(lang, giftByStars.amount, { asFont: true })\n      : isStarGift\n        ? formatStarsAsIcon(lang, gift.stars + (shouldPayForUpgrade ? gift.upgradeStars! : 0), { asFont: true })\n        : isPremiumGift ? formatCurrency(lang, gift.amount, gift.currency) : undefined;\n\n    const giftsPerRound = giftAuction?.gift.giftsPerRound;\n    const auctionEndDate = giftAuction?.state.endDate;\n    const auctionTimeLeft = auctionEndDate ? auctionEndDate - getServerTime() : undefined;\n    const shouldUseTextTimer = auctionTimeLeft !== undefined && auctionTimeLeft > 0\n      && auctionTimeLeft < TEXT_TIMER_THRESHOLD;\n\n    return (\n      <div className={styles.footer}>\n        {isStarGift && Boolean(gift.availabilityRemains) && (\n          <PremiumProgress\n            isPrimary\n            progress={gift.availabilityRemains / gift.availabilityTotal!}\n            rightText={lang('GiftSoldCount', {\n              count: gift.availabilityTotal! - gift.availabilityRemains,\n            })}\n            leftText={lang('GiftLeftCount', { count: gift.availabilityRemains })}\n            className={styles.limited}\n          />\n        )}\n        {giftAuction && Boolean(giftsPerRound) && (\n          <div className={styles.bottomDescription}>\n            {lang('GiftAuctionDescription', {\n              count: giftsPerRound,\n              link: <Link isPrimary onClick={handleLearnMoreClick}>{lang('GiftAuctionLearnMore')}</Link>,\n            }, { pluralValue: giftsPerRound, withNodes: true })}\n          </div>\n        )}\n        <Button\n          className={styles.mainButton}\n          size={auctionTimeLeft ? undefined : 'smaller'}\n          onClick={handleMainButtonClick}\n          isLoading={isPaymentFormLoading}\n          noForcedUpperCase\n        >\n          {giftAuction ? (\n            <div>\n              <div>\n                {lang('GiftAuctionPlaceBid')}\n              </div>\n              {auctionTimeLeft !== undefined && auctionTimeLeft > 0 && (\n                <div className={styles.buttonSubtitle}>\n                  {lang('GiftAuctionTimeLeft', {\n                    time: shouldUseTextTimer\n                      ? <TextTimer endsAt={auctionEndDate!} />\n                      : formatCountdown(lang, auctionTimeLeft),\n                  }, { withNodes: true })}\n                </div>\n              )}\n            </div>\n          ) : lang('GiftSend', {\n            amount,\n          }, {\n            withNodes: true,\n          })}\n        </Button>\n      </div>\n    );\n  }\n\n  const bgClassName = buildClassName(\n    styles.background,\n    styles.withTransition,\n    customBackground && styles.customBgImage,\n    backgroundColor && styles.customBgColor,\n    customBackground && isBackgroundBlurred && styles.blurred,\n  );\n\n  if ((!isStarGift && !isPremiumGift) || !localMessage) return;\n\n  return (\n    <div className={buildClassName(styles.root, 'custom-scroll')}>\n      <div\n        className={buildClassName(styles.actionMessageView, 'MessageList')}\n        // @ts-ignore -- FIXME: Find a way to disable interactions but keep a11y\n        inert\n        style={buildStyle(\n          `--pattern-color: ${patternColor}`,\n          backgroundColor && `--theme-background-color: ${backgroundColor}`,\n        )}\n      >\n        <div\n          className={bgClassName}\n          style={customBackgroundValue ? `--custom-background: ${customBackgroundValue}` : undefined}\n        />\n        <ActionMessage\n          key={isStarGift ? gift.id : isPremiumGift ? gift.months : undefined}\n          message={localMessage}\n          threadId={MAIN_THREAD_ID}\n          appearanceOrder={0}\n        />\n      </div>\n      {renderOptionsSection()}\n      <div className={styles.spacer} />\n      {renderFooter()}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { peerId, gift }): Complete<StateProps> => {\n    const theme = selectTheme(global);\n    const {\n      stars,\n    } = global;\n    const {\n      isBlurred: isBackgroundBlurred,\n      patternColor,\n      background: customBackground,\n      backgroundColor,\n    } = selectThemeValues(global, theme) || {};\n    const peer = selectPeer(global, peerId);\n    const paidMessagesStars = selectPeerPaidMessagesStars(global, peerId);\n    const userFullInfo = selectUserFullInfo(global, peerId);\n    const currentUserId = global.currentUserId;\n    const isGiftForSelf = currentUserId === peerId;\n    const areUniqueStarGiftsDisallowed = !isGiftForSelf\n      && userFullInfo?.disallowedGifts?.shouldDisallowUniqueStarGifts;\n    const shouldDisallowLimitedStarGifts = !isGiftForSelf\n      && userFullInfo?.disallowedGifts?.shouldDisallowLimitedStarGifts;\n\n    const tabState = selectTabState(global);\n    const auctionGiftId = 'id' in gift && gift.type === 'starGift' && gift.isAuction ? gift.id : undefined;\n    const giftAuction = auctionGiftId\n      ? global.giftAuctionByGiftId?.[auctionGiftId] : undefined;\n\n    return {\n      starBalance: stars?.balance,\n      peer,\n      theme,\n      isBackgroundBlurred,\n      patternColor,\n      customBackground,\n      backgroundColor,\n      captionLimit: global.appConfig.starGiftMaxMessageLength,\n      currentUserId: global.currentUserId,\n      isPaymentFormLoading: tabState.isPaymentFormLoading,\n      paidMessagesStars,\n      areUniqueStarGiftsDisallowed,\n      shouldDisallowLimitedStarGifts,\n      giftAuction,\n    };\n  },\n)(GiftComposer));\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"G1mBmzxs\",\"noClickable\":\"pcLi3lcD\",\"starGift\":\"f5ArEO1S\",\"monthsDescription\":\"rn9aWFNA\",\"description\":\"q4_ydkAx\",\"buy\":\"a8no5WH0\",\"transferBadge\":\"nqN62arv\",\"star\":\"DvJLTVFU\",\"auction\":\"WqBCC4Ce\",\"premiumRequired\":\"NBYIITte\",\"amount\":\"sbo2dMcH\",\"starsPriceBlock\":\"QB5SI7ta\",\"starsPriceIcon\":\"jgnEfoeM\",\"radialPattern\":\"Nkotr8Q4\",\"stickerWrapper\":\"rUSoeQXb\",\"lockIcon\":\"kwuipwV7\"};","import { memo } from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type {\n  ApiPremiumGiftCodeOption,\n  ApiSticker,\n} from '../../../api/types';\n\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectGiftStickerForDuration,\n} from '../../../global/selectors';\nimport { formatCurrencyAsString } from '../../../util/formatCurrency';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../common/AnimatedIconFromSticker';\nimport GiftRibbon from '../../common/gift/GiftRibbon';\nimport Button from '../../ui/Button';\n\nimport styles from './GiftItem.module.scss';\n\nexport type OwnProps = {\n  option: ApiPremiumGiftCodeOption;\n  optionByStars?: ApiPremiumGiftCodeOption;\n  baseMonthAmount?: number;\n  onClick: (gift: ApiPremiumGiftCodeOption) => void;\n};\n\nexport type StateProps = {\n  sticker?: ApiSticker;\n  canPlayAnimatedEmojis?: boolean;\n};\n\nconst GIFT_STICKER_SIZE = 86;\n\nfunction GiftItemPremium({\n  sticker, canPlayAnimatedEmojis, baseMonthAmount, option, optionByStars, onClick,\n}: OwnProps & StateProps) {\n  const {\n    months, amount, currency,\n  } = option;\n  const lang = useLang();\n\n  const handleGiftClick = useLastCallback(() => {\n    onClick(option);\n  });\n\n  const perMonth = Math.floor(amount / months);\n  const discount = baseMonthAmount && baseMonthAmount > perMonth\n    ? Math.ceil(100 - perMonth / (baseMonthAmount / 100))\n    : undefined;\n\n  function renderMonths() {\n    const caption = months === 12\n      ? lang('Years', { count: 1 }, { pluralValue: 1 })\n      : lang('Months', { count: months }, { pluralValue: months });\n    return (\n      <div className={styles.monthsDescription}>\n        {caption}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={styles.container}\n      tabIndex={0}\n      role=\"button\"\n      onClick={handleGiftClick}\n    >\n      <AnimatedIconFromSticker\n        sticker={sticker}\n        play={canPlayAnimatedEmojis}\n        noLoop\n        nonInteractive\n        size={GIFT_STICKER_SIZE}\n      />\n\n      {renderMonths()}\n      <div className={styles.description}>\n        {lang('PremiumGiftDescription')}\n      </div>\n      <Button className={styles.buy} color=\"adaptive\" nonInteractive size=\"tiny\" pill fluid>\n        {formatCurrencyAsString(amount, currency)}\n      </Button>\n      {optionByStars && (\n        <div className={styles.starsPriceBlock}>\n          {lang('GiftPremiumStarsPrice', {\n            stars: (formatStarsAsIcon(lang, optionByStars.amount, { className: styles.starsPriceIcon })),\n          }, { withNodes: true, withMarkdown: true })}\n        </div>\n      )}\n      {Boolean(discount) && (\n        <GiftRibbon color=\"purple\" text={lang('GiftDiscount', { percent: discount })} />\n      )}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { option }): Complete<StateProps> => {\n    const sticker = selectGiftStickerForDuration(global, option.months);\n    const canPlayAnimatedEmojis = selectCanPlayAnimatedEmojis(global);\n\n    return {\n      sticker,\n      canPlayAnimatedEmojis,\n    };\n  },\n)(GiftItemPremium));\n","import { memo, useMemo, useRef, useState } from '@teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiStarGift, ApiTypeCurrencyAmount } from '../../../api/types';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../config';\nimport { selectIsCurrentUserPremium } from '../../../global/selectors';\nimport { IS_TOUCH_ENV } from '../../../util/browser/windowEnvironment.ts';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatStarsAsIcon, formatTonAsIcon } from '../../../util/localization/format';\n\nimport Icon from '../../common/icons/Icon'; ;\nimport { getGiftAttributes, getStickerFromGift } from '../../common/helpers/gifts';\n\nimport useFlag from '../../../hooks/useFlag.ts';\nimport { type ObserveFn, useOnIntersect } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport GiftRibbon from '../../common/gift/GiftRibbon';\nimport RadialPatternBackground from '../../common/profile/RadialPatternBackground';\nimport StickerView from '../../common/StickerView';\nimport Button from '../../ui/Button';\n\nimport styles from './GiftItem.module.scss';\n\nexport type OwnProps = {\n  gift: ApiStarGift;\n  isResale?: boolean;\n  withTransferBadge?: boolean;\n  hideBadge?: boolean;\n  noClickable?: boolean;\n  observeIntersection?: ObserveFn;\n  onClick?: (gift: ApiStarGift, target: 'original' | 'resell') => void;\n};\n\ntype StateProps = {\n  isCurrentUserPremium?: boolean;\n};\n\nconst GIFT_STICKER_SIZE = 90;\n\nfunction GiftItemStar({\n  gift, isResale, isCurrentUserPremium, withTransferBadge, hideBadge, noClickable, observeIntersection, onClick,\n}: OwnProps & StateProps) {\n  const {\n    openGiftInfoModal, openPremiumModal, showNotification, checkCanSendGift, openGiftAuctionModal,\n  } = getActions();\n\n  const ref = useRef<HTMLDivElement>();\n  const stickerRef = useRef<HTMLDivElement>();\n\n  function getPriceAmount(amounts?: ApiTypeCurrencyAmount[]) {\n    if (!amounts) return { amount: 0, currency: STARS_CURRENCY_CODE };\n\n    if (gift.type === 'starGiftUnique' && gift.resaleTonOnly) {\n      const tonAmount = amounts.find((amount) => amount.currency === TON_CURRENCY_CODE);\n      if (tonAmount) return tonAmount;\n    }\n\n    const starsAmount = amounts.find((amount) => amount.currency === STARS_CURRENCY_CODE);\n    return starsAmount;\n  }\n\n  const lang = useLang();\n\n  const [isVisible, setIsVisible] = useState(false);\n  const [isHover, markHover, unmarkHover] = useFlag();\n\n  const sticker = getStickerFromGift(gift);\n  const isGiftUnique = gift.type === 'starGiftUnique';\n  const uniqueGift = isGiftUnique ? gift : undefined;\n  const regularGift = !isGiftUnique ? gift : undefined;\n\n  const priceInfo = !isGiftUnique\n    ? { amount: regularGift?.stars || 0, currency: STARS_CURRENCY_CODE }\n    : getPriceAmount(uniqueGift?.resellPrice);\n  const priceCurrency = priceInfo?.currency || STARS_CURRENCY_CODE;\n  const resellMinStars = regularGift?.resellMinStars;\n  const formattedPrice = !isGiftUnique && isResale && resellMinStars\n    ? lang.number(resellMinStars) + '+' : priceInfo?.amount || 0;\n  const isLimited = !isGiftUnique && Boolean(regularGift?.isLimited);\n  const isSoldOut = !isGiftUnique && Boolean(regularGift?.isSoldOut);\n  const isAuction = !isGiftUnique && !isResale && Boolean(regularGift?.isAuction);\n  const isPremiumRequired = Boolean(gift?.requirePremium);\n  const isUserLimitReached = Boolean(regularGift?.limitedPerUser && !regularGift?.perUserRemains);\n  const perUserTotal = regularGift?.perUserTotal;\n\n  const handleGiftClick = useLastCallback(() => {\n    if (isAuction) {\n      openGiftAuctionModal({ gift });\n      return;\n    }\n\n    if (isSoldOut && !isResale) {\n      openGiftInfoModal({ gift });\n      return;\n    }\n\n    if (isUserLimitReached) {\n      showNotification({\n        message: lang('NotificationGiftsLimit2', {\n          count: perUserTotal,\n        }, {\n          pluralValue: perUserTotal!,\n          withMarkdown: true,\n          withNodes: true,\n        }),\n      });\n      return;\n    }\n\n    if (isPremiumRequired && !isCurrentUserPremium) {\n      openPremiumModal({\n        gift,\n      });\n      return;\n    }\n\n    if (isLocked) {\n      checkCanSendGift({\n        gift,\n        onSuccess: () => onClick?.(gift, isResale ? 'resell' : 'original'),\n      });\n      return;\n    }\n\n    onClick?.(gift, isResale ? 'resell' : 'original');\n  });\n\n  const radialPatternBackdrop = useMemo(() => {\n    const { backdrop, pattern } = getGiftAttributes(gift) || {};\n\n    if (!backdrop || !pattern) {\n      return undefined;\n    }\n\n    const backdropColors = [backdrop.centerColor, backdrop.edgeColor];\n\n    return (\n      <RadialPatternBackground\n        className={styles.radialPattern}\n        backgroundColors={backdropColors}\n        patternIcon={pattern.sticker}\n        ringsCount={1}\n        ovalFactor={1}\n      />\n    );\n  }, [gift]);\n\n  const giftNumber = isGiftUnique ? gift.number : 0;\n  const isLocked = Boolean(gift.type === 'starGift' && gift.lockedUntilDate);\n\n  const giftRibbon = useMemo(() => {\n    if (isGiftUnique) {\n      const { backdrop } = getGiftAttributes(gift) || {};\n      if (!backdrop) {\n        return undefined;\n      }\n      return (\n        <GiftRibbon\n          color={[backdrop.centerColor, backdrop.edgeColor]}\n          text={\n            lang('GiftSavedNumber', { number: giftNumber })\n          }\n        />\n      );\n    }\n    if (isResale) {\n      return <GiftRibbon color=\"green\" text={lang('GiftRibbonResale')} />;\n    }\n    if (isSoldOut) {\n      return <GiftRibbon color=\"red\" text={lang('GiftSoldOut')} />;\n    }\n    if (isAuction) {\n      return <GiftRibbon color=\"orange\" text={lang('GiftRibbonAuction')} />;\n    }\n    if (isPremiumRequired) {\n      return <GiftRibbon color=\"orange\" text={lang('GiftRibbonPremium')} />;\n    }\n    if (isLimited) {\n      return <GiftRibbon color=\"blue\" text={lang('GiftLimited')} />;\n    }\n    return undefined;\n  }, [isGiftUnique, isResale, gift, isSoldOut,\n    isLimited, lang, giftNumber, isPremiumRequired, isAuction]);\n\n  useOnIntersect(ref, observeIntersection, (entry) => {\n    const visible = entry.isIntersecting;\n    setIsVisible(visible);\n  });\n\n  const badgeContent = useMemo(() => {\n    if (withTransferBadge) {\n      return lang('GiftTransferTitle');\n    }\n\n    if (isAuction) {\n      return lang('GiftAuctionJoin');\n    }\n\n    if (priceCurrency === TON_CURRENCY_CODE) {\n      return formatTonAsIcon(lang, formattedPrice || 0, {\n        shouldConvertFromNanos: true,\n        className: styles.star,\n      });\n    }\n\n    return formatStarsAsIcon(lang, formattedPrice || 0, {\n      asFont: true,\n      className: styles.star,\n    });\n  }, [withTransferBadge, priceCurrency, formattedPrice, isAuction, lang]);\n\n  return (\n    <div\n      ref={ref}\n      className={buildClassName(\n        'interactive-gift',\n        styles.container,\n        styles.starGift,\n        'starGiftItem',\n        isPremiumRequired && styles.premiumRequired,\n        isAuction && styles.auction,\n        noClickable && styles.noClickable,\n      )}\n      tabIndex={noClickable ? undefined : 0}\n      role={noClickable ? undefined : 'button'}\n      onClick={noClickable ? undefined : handleGiftClick}\n      onMouseEnter={!IS_TOUCH_ENV && !noClickable ? markHover : undefined}\n      onMouseLeave={!IS_TOUCH_ENV && !noClickable ? unmarkHover : undefined}\n    >\n      {radialPatternBackdrop}\n\n      <div\n        ref={stickerRef}\n        className={styles.stickerWrapper}\n        style={`width: ${GIFT_STICKER_SIZE}px; height: ${GIFT_STICKER_SIZE}px`}\n      >\n        {sticker && (\n          <StickerView\n            observeIntersectionForPlaying={observeIntersection}\n            observeIntersectionForLoading={observeIntersection}\n            containerRef={stickerRef}\n            sticker={sticker}\n            size={GIFT_STICKER_SIZE}\n            shouldLoop={isHover}\n            shouldPreloadPreview\n          />\n        )}\n\n      </div>\n      {!hideBadge && (\n        <Button\n          className={buildClassName(\n            styles.buy,\n            withTransferBadge && styles.transferBadge,\n          )}\n          nonInteractive\n          size=\"tiny\"\n          color={isGiftUnique ? 'bluredStarsBadge' : 'stars'}\n          withSparkleEffect={isVisible && !withTransferBadge}\n          pill\n          fluid\n        >\n          {badgeContent}\n        </Button>\n      )}\n      {giftRibbon}\n      {isLocked && <Icon name=\"lock-badge\" className={styles.lockIcon} />}\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global): Complete<StateProps> => {\n    const isCurrentUserPremium = selectIsCurrentUserPremium(global);\n\n    return {\n      isCurrentUserPremium,\n    };\n  })(GiftItemStar),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"tJK1W0pJ\",\"transition\":\"pP8TxefR\",\"content\":\"o3V1HqbL\",\"resaleScreenRoot\":\"Vce_TsJO\",\"main\":\"cVXqeu9P\",\"giftSection\":\"v4eKefwN\",\"section\":\"EqfarEYb\",\"resaleStarGiftsContainer\":\"RSFcSNGL\",\"starGiftsContainer\":\"OQX3GZl5\",\"premiumGiftsGallery\":\"n40m3BK2\",\"header\":\"iqqoyRgW\",\"noBorder\":\"cuvdjW2y\",\"resaleHeader\":\"cJRBgg9B\",\"resaleHeaderContentContainer\":\"OXYQmfGK\",\"headerSlide\":\"BTWhJUQB\",\"headerText\":\"lLRmbpIu\",\"hiddenHeader\":\"XgGzn1cQ\",\"resaleHeaderText\":\"bp_KPx8I\",\"commonHeaderText\":\"ybZo03if\",\"resaleHeaderDescription\":\"XefHUFm1\",\"closeButton\":\"r_Y5uG1T\",\"balance\":\"soqAknia\",\"avatars\":\"N_7tYJKr\",\"avatar\":\"_3hY4vIep\",\"logoBackground\":\"ieK4TzSb\",\"center\":\"Ey5gX40t\",\"description\":\"ZioU5h_k\",\"starGiftsDescription\":\"gFgzS8pV\",\"boostIcon\":\"Qi2YR6Dz\",\"optionBottom\":\"RTbClMKE\",\"secondaryInfo\":\"g0R9GSNq\",\"footer\":\"J3Gju3bv\",\"starGiftsTransition\":\"kB6IyXqS\",\"notFoundGiftsRoot\":\"UqnRlJ1n\",\"notFoundGiftsDescription\":\"g0VbwIG_\",\"notFoundGiftsLink\":\"j2zPEQr8\"};","import type { FC } from '@teact';\nimport {\n  memo, useEffect,\n  useMemo, useRef, useState } from '@teact';\nimport type React from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiDisallowedGifts,\n  ApiPeer,\n  ApiPremiumGiftCodeOption,\n  ApiSavedStarGift,\n  ApiStarGift,\n  ApiStarGiftRegular,\n  ApiStarsAmount,\n} from '../../../api/types';\nimport type { TabState } from '../../../global/types';\nimport type { StarGiftCategory } from '../../../types';\n\nimport { STARS_CURRENCY_CODE } from '../../../config';\nimport { getUserFullName } from '../../../global/helpers';\nimport { getPeerTitle, isApiPeerChat, isApiPeerUser } from '../../../global/helpers/peers';\nimport { selectTabState } from '../../../global/selectors';\nimport { selectPeer, selectUserFullInfo } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { throttle } from '../../../util/schedulers';\nimport { REM } from '../../common/helpers/mediaDimensions';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport useFlag from '../../../hooks/useFlag';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport InteractiveSparkles from '../../common/InteractiveSparkles';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Modal from '../../ui/Modal';\nimport Transition from '../../ui/Transition';\nimport BalanceBlock from '../stars/BalanceBlock';\nimport GiftComposer from './GiftComposer';\nimport GiftItemPremium from './GiftItemPremium';\nimport GiftItemStar from './GiftItemStar';\nimport GiftModalResaleScreen from './GiftModalResaleScreen';\nimport GiftResaleFilters from './GiftResaleFilters';\nimport StarGiftCategoryList from './StarGiftCategoryList';\n\nimport styles from './GiftModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftModal'];\n};\n\nexport type GiftOption = ApiPremiumGiftCodeOption | ApiStarGift;\n\ntype StateProps = {\n  boostPerSentGift?: number;\n  starGiftsById?: Record<string, ApiStarGiftRegular>;\n  starGiftIdsByCategory?: Record<StarGiftCategory, string[]>;\n  myUniqueGiftsById?: Record<string, ApiSavedStarGift>;\n  myUniqueGiftIds?: string[];\n  starBalance?: ApiStarsAmount;\n  peer?: ApiPeer;\n  isSelf?: boolean;\n  disallowedGifts?: ApiDisallowedGifts;\n  resaleGiftsCount?: number;\n  areResaleGiftsLoading?: boolean;\n  selectedResaleGift?: ApiStarGift;\n  tabId: number;\n};\n\nconst AVATAR_SIZE = 100;\nconst INTERSECTION_THROTTLE = 200;\nconst SCROLL_THROTTLE = 200;\nconst AVATAR_SPARKLES_CENTER_SHIFT = [0, -50] as const;\nconst CATEGORY_LIST_STICKY_TOP = 3.5 * REM;\n\nconst runThrottledForScroll = throttle((cb) => cb(), SCROLL_THROTTLE, true);\n\nconst GiftModal: FC<OwnProps & StateProps> = ({\n  modal,\n  starGiftsById,\n  starGiftIdsByCategory,\n  myUniqueGiftsById,\n  myUniqueGiftIds,\n  starBalance,\n  peer,\n  isSelf,\n  disallowedGifts,\n  resaleGiftsCount,\n  areResaleGiftsLoading,\n  selectedResaleGift,\n  tabId,\n}) => {\n  const {\n    closeGiftModal,\n    openGiftInfoModal,\n    resetResaleGifts,\n    loadResaleGifts,\n    openGiftInMarket,\n    closeResaleGiftsMarket,\n    loadMyUniqueGifts,\n    openGiftTransferConfirmModal,\n    setGiftModalSelectedGift,\n  } = getActions();\n  const dialogRef = useRef<HTMLDivElement>();\n  const transitionRef = useRef<HTMLDivElement>();\n  const giftHeaderRef = useRef<HTMLHeadingElement>();\n  const categoryListRef = useRef<HTMLDivElement>();\n\n  const scrollerRef = useRef<HTMLDivElement>();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const user = peer && isApiPeerUser(peer) ? peer : undefined;\n  const chat = peer && isApiPeerChat(peer) ? peer : undefined;\n\n  const selectedGift = renderingModal?.selectedGift;\n  const [shouldShowMainScreenHeader, setShouldShowMainScreenHeader] = useState(false);\n  const [isMainScreenHeaderForStarGifts, setIsMainScreenHeaderForStarGifts] = useState(false);\n  const [isGiftScreenHeaderForStarGifts, setIsGiftScreenHeaderForStarGifts] = useState(false);\n  const [selectedCategory, setSelectedCategory] = useState<StarGiftCategory>('all');\n  const [isCategoryListPinned, pinCategoryList, unpinCategoryList] = useFlag(false);\n  const triggerSparklesRef = useRef<(() => void) | undefined>();\n\n  const areAllGiftsDisallowed = useMemo(() => {\n    if (!disallowedGifts) {\n      return undefined;\n    }\n    const {\n      shouldDisallowPremiumGifts,\n      ...disallowedGiftTypes\n    } = disallowedGifts;\n    return !isSelf && Object.values(disallowedGiftTypes).every(Boolean);\n  }, [isSelf, disallowedGifts]);\n\n  const areUnlimitedStarGiftsDisallowed = !isSelf && disallowedGifts?.shouldDisallowUnlimitedStarGifts;\n  const areLimitedStarGiftsDisallowed = !isSelf && disallowedGifts?.shouldDisallowLimitedStarGifts;\n  const areUniqueStarGiftsDisallowed = !isSelf && disallowedGifts?.shouldDisallowUniqueStarGifts;\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n  const allGifts = renderingModal?.gifts;\n  const filteredGifts = useMemo(() => {\n    return allGifts?.sort((prevGift, gift) => prevGift.months - gift.months)\n      .filter((gift) => gift.users === 1 && gift.currency !== STARS_CURRENCY_CODE);\n  }, [allGifts]);\n\n  const giftsByStars = useMemo(() => {\n    const mapGifts = new Map();\n\n    if (!filteredGifts) return mapGifts;\n\n    filteredGifts.forEach((gift) => {\n      const giftByStars = allGifts?.find(\n        (starsGift) => starsGift.currency === STARS_CURRENCY_CODE\n          && starsGift.months === gift.months,\n      );\n      if (giftByStars) {\n        mapGifts.set(gift, giftByStars);\n      }\n    });\n\n    return mapGifts;\n  }, [allGifts, filteredGifts]);\n\n  const baseGift = useMemo(() => {\n    return filteredGifts?.reduce((prev, gift) => (prev.amount < gift.amount ? prev : gift));\n  }, [filteredGifts]);\n\n  const {\n    observe: observeIntersection,\n  } = useIntersectionObserver({ rootRef: scrollerRef, throttleMs: INTERSECTION_THROTTLE, isDisabled: !isOpen });\n\n  const isResaleScreen = Boolean(selectedResaleGift) && !selectedGift;\n  const isGiftScreen = Boolean(selectedGift);\n  const shouldShowHeader = isResaleScreen || isGiftScreen || shouldShowMainScreenHeader;\n  const isHeaderForStarGifts = isGiftScreen ? isGiftScreenHeaderForStarGifts : isMainScreenHeaderForStarGifts;\n\n  useEffect(() => {\n    if (selectedResaleGift) {\n      const giftId = 'regularGiftId' in selectedResaleGift\n        ? selectedResaleGift.regularGiftId\n        : selectedResaleGift.id;\n      loadResaleGifts({ giftId });\n    }\n  }, [selectedResaleGift]);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setShouldShowMainScreenHeader(false);\n      setGiftModalSelectedGift({ gift: undefined });\n      setSelectedCategory('all');\n    }\n  }, [isOpen]);\n\n  useEffect(() => {\n    setIsGiftScreenHeaderForStarGifts(Boolean(selectedGift && 'id' in selectedGift));\n  }, [selectedGift]);\n\n  const handleScroll = useLastCallback((e: React.UIEvent<HTMLDivElement>) => {\n    if (isGiftScreen) return;\n    const currentTarget = e.currentTarget;\n\n    runThrottledForScroll(() => {\n      const { scrollTop } = currentTarget;\n\n      setShouldShowMainScreenHeader(scrollTop > 150);\n\n      if (transitionRef.current && giftHeaderRef.current) {\n        const { top: headerTop } = giftHeaderRef.current.getBoundingClientRect();\n        const { top: transitionTop } = transitionRef.current.getBoundingClientRect();\n        setIsMainScreenHeaderForStarGifts(headerTop - transitionTop <= 0);\n      }\n\n      if (categoryListRef.current && scrollerRef.current) {\n        const { top: listTop } = categoryListRef.current.getBoundingClientRect();\n        const { top: scrollerTop } = scrollerRef.current.getBoundingClientRect();\n        const isPinned = listTop - scrollerTop <= CATEGORY_LIST_STICKY_TOP;\n        if (isPinned) {\n          pinCategoryList();\n        } else {\n          unpinCategoryList();\n        }\n      }\n    });\n  });\n\n  const giftPremiumDescription = lang('GiftPremiumDescription', {\n    user: getUserFullName(user)!,\n    link: (\n      <SafeLink\n        text={lang('GiftPremiumDescriptionLinkCaption')}\n        url={lang('GiftPremiumDescriptionLink')}\n      />\n    ),\n  }, { withNodes: true });\n\n  const starGiftDescription = useMemo(() => {\n    if (chat) {\n      return lang('StarGiftDescriptionChannel', { peer: getPeerTitle(lang, chat) }, {\n        withNodes: true,\n        withMarkdown: true,\n      });\n    }\n\n    if (isSelf) {\n      return lang('StarGiftDescriptionSelf', undefined, {\n        withNodes: true,\n        renderTextFilters: ['br'],\n      });\n    }\n\n    if (selectedCategory === 'collectible') {\n      return lang('StarGiftDescriptionCollectibles');\n    }\n\n    return lang('StarGiftDescription', {\n      user: getUserFullName(user)!,\n    }, { withNodes: true, withMarkdown: true });\n  }, [chat, isSelf, selectedCategory, user, lang]);\n\n  function renderGiftPremiumHeader() {\n    return (\n      <h2 className={buildClassName(styles.headerText, styles.center)}>\n        {lang('GiftPremiumHeader')}\n      </h2>\n    );\n  }\n\n  function renderGiftPremiumDescription() {\n    return (\n      <p className={buildClassName(styles.description, styles.center)}>\n        {giftPremiumDescription}\n      </p>\n    );\n  }\n\n  function renderStarGiftsHeader() {\n    return (\n      <h2 ref={giftHeaderRef} className={buildClassName(styles.headerText, styles.center)}>\n        {lang(isSelf ? 'StarsGiftHeaderSelf' : 'StarsGiftHeader')}\n      </h2>\n    );\n  }\n\n  function renderStarGiftsDescription() {\n    return (\n      <p className={buildClassName(styles.description, styles.starGiftsDescription, styles.center)}>\n        {starGiftDescription}\n      </p>\n    );\n  }\n\n  const handleGiftClick = useLastCallback((gift: GiftOption, target?: 'resell' | 'original') => {\n    if (target === 'resell') {\n      if (!('id' in gift)) {\n        return;\n      }\n      if (isResaleScreen) {\n        openGiftInfoModal({ gift, recipientId: renderingModal?.forPeerId });\n        return;\n      }\n      openGiftInMarket({ gift, tabId });\n      return;\n    }\n    setGiftModalSelectedGift({ gift });\n  });\n\n  const handleMyGiftClick = useLastCallback((gift: ApiStarGift) => {\n    if (gift.type === 'starGift' || !myUniqueGiftsById || !peer?.id) return;\n    const savedGift = myUniqueGiftsById[gift.id];\n\n    openGiftTransferConfirmModal({\n      gift: savedGift,\n      recipientId: peer.id,\n    });\n  });\n\n  const handleLoadMore = useLastCallback(() => {\n    if (selectedCategory === 'myUnique') {\n      loadMyUniqueGifts();\n    }\n  });\n\n  function renderStarGifts() {\n    if (selectedCategory === 'myUnique') {\n      return (\n        <InfiniteScroll\n          className={styles.starGiftsContainer}\n          items={myUniqueGiftIds}\n          onLoadMore={handleLoadMore}\n          scrollContainerClosest={`.${styles.main}`}\n          itemSelector=\".starGiftItem\"\n        >\n          {myUniqueGiftsById && myUniqueGiftIds?.map((giftId) => {\n            const savedGift = myUniqueGiftsById[giftId];\n            if (!savedGift) return undefined;\n\n            return (\n              <GiftItemStar\n                key={giftId}\n                gift={savedGift.gift}\n                observeIntersection={observeIntersection}\n                onClick={handleMyGiftClick}\n                withTransferBadge\n              />\n            );\n          })}\n        </InfiniteScroll>\n      );\n    }\n\n    const filteredGiftIds = starGiftIdsByCategory?.[selectedCategory]?.filter((giftId) => {\n      const gift = starGiftsById?.[giftId];\n      if (!gift) return false;\n\n      const { isLimited, availabilityResale } = gift;\n\n      if (areLimitedStarGiftsDisallowed && isLimited) {\n        return !areUniqueStarGiftsDisallowed ? availabilityResale : false;\n      }\n\n      if (areUnlimitedStarGiftsDisallowed && !isLimited) return false;\n\n      return true;\n    });\n\n    return (\n      <div className={styles.starGiftsContainer}>\n        {starGiftsById && filteredGiftIds?.flatMap((giftId) => {\n          const gift = starGiftsById[giftId];\n          const shouldShowResale = Boolean(gift.availabilityResale) && !areUniqueStarGiftsDisallowed;\n          const shouldDuplicateAsResale = shouldShowResale && !gift.isSoldOut && !areLimitedStarGiftsDisallowed;\n\n          const elements = [\n            <GiftItemStar\n              key={giftId}\n              gift={gift}\n              observeIntersection={observeIntersection}\n              isResale={shouldShowResale && !shouldDuplicateAsResale}\n              onClick={handleGiftClick}\n            />,\n          ];\n\n          if (shouldDuplicateAsResale) {\n            elements.push(\n              <GiftItemStar\n                key={`resale_${giftId}`}\n                isResale\n                gift={gift}\n                observeIntersection={observeIntersection}\n                onClick={handleGiftClick}\n              />,\n            );\n          }\n\n          return elements;\n        })}\n      </div>\n    );\n  }\n\n  function renderPremiumGifts() {\n    return (\n      <div className={styles.premiumGiftsGallery}>\n        {filteredGifts?.map((gift) => {\n          return (\n            <GiftItemPremium\n              option={gift}\n              optionByStars={giftsByStars.get(gift)}\n              baseMonthAmount={baseGift ? Math.floor(baseGift.amount / baseGift.months) : undefined}\n              onClick={handleGiftClick}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  const onCategoryChanged = useLastCallback((category: StarGiftCategory) => {\n    setSelectedCategory(category);\n  });\n\n  const handleCloseModal = useLastCallback(() => {\n    setGiftModalSelectedGift({ gift: undefined });\n    resetResaleGifts();\n    closeGiftModal();\n  });\n\n  const handleCloseButtonClick = useLastCallback(() => {\n    if (isResaleScreen) {\n      closeResaleGiftsMarket({ tabId });\n      return;\n    }\n    if (isGiftScreen) {\n      setGiftModalSelectedGift({ gift: undefined });\n      return;\n    }\n    handleCloseModal();\n  });\n\n  const handleAvatarMouseMove = useLastCallback(() => {\n    triggerSparklesRef.current?.();\n  });\n\n  const handleRequestAnimation = useLastCallback((animate: NoneToVoidFunction) => {\n    triggerSparklesRef.current = animate;\n  });\n\n  function renderMainScreen() {\n    return (\n      <div ref={scrollerRef} className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <div className={styles.avatars}>\n          <Avatar\n            className={styles.avatar}\n            size={AVATAR_SIZE}\n            peer={peer}\n            onMouseMove={handleAvatarMouseMove}\n          />\n          <InteractiveSparkles\n            className={styles.logoBackground}\n            color=\"gold\"\n            centerShift={AVATAR_SPARKLES_CENTER_SHIFT}\n            onRequestAnimation={handleRequestAnimation}\n          />\n        </div>\n        {!isSelf && !chat && !disallowedGifts?.shouldDisallowPremiumGifts && (\n          <>\n            {renderGiftPremiumHeader()}\n            {renderGiftPremiumDescription()}\n            {renderPremiumGifts()}\n          </>\n        )}\n\n        {!areAllGiftsDisallowed && (\n          <>\n            {renderStarGiftsHeader()}\n            {renderStarGiftsDescription()}\n            <StarGiftCategoryList\n              ref={categoryListRef}\n              areUniqueStarGiftsDisallowed={areUniqueStarGiftsDisallowed}\n              areLimitedStarGiftsDisallowed={areLimitedStarGiftsDisallowed}\n              isSelf={isSelf}\n              hasMyUnique={Boolean(myUniqueGiftIds?.length)}\n              isPinned={isCategoryListPinned}\n              onCategoryChanged={onCategoryChanged}\n            />\n            <Transition\n              name=\"zoomFade\"\n              activeKey={getCategoryKey(selectedCategory)}\n              className={styles.starGiftsTransition}\n            >\n              {renderStarGifts()}\n            </Transition>\n          </>\n        )}\n      </div>\n    );\n  }\n\n  const isBackButton = isGiftScreen || isResaleScreen;\n\n  const buttonClassName = buildClassName(\n    'animated-close-icon',\n    isBackButton && 'state-back',\n  );\n\n  function renderHeader() {\n    if (!shouldShowHeader) return undefined;\n    if (isResaleScreen) {\n      const isFirstLoading = areResaleGiftsLoading && !resaleGiftsCount;\n      return (\n        <div className={styles.resaleHeaderContentContainer}>\n          <h2 className={styles.resaleHeaderText}>\n            {selectedResaleGift.title}\n          </h2>\n          {isFirstLoading\n            && (\n              <div className={styles.resaleHeaderDescription}>\n                {lang('Loading')}\n              </div>\n            )}\n          {!isFirstLoading && resaleGiftsCount !== undefined\n            && (\n              <div className={styles.resaleHeaderDescription}>\n                {lang('HeaderDescriptionResaleGifts', {\n                  count: resaleGiftsCount,\n                }, { withNodes: true, withMarkdown: true, pluralValue: resaleGiftsCount })}\n              </div>\n            )}\n          <GiftResaleFilters dialogRef={dialogRef} />\n        </div>\n      );\n    }\n    return (\n      <h2 className={styles.commonHeaderText}>\n        {lang(isHeaderForStarGifts ? (isSelf ? 'StarsGiftHeaderSelf' : 'StarsGiftHeader') : 'GiftPremiumHeader')}\n      </h2>\n    );\n  }\n\n  return (\n    <Modal\n      dialogRef={dialogRef}\n      onClose={handleCloseModal}\n      isOpen={isOpen}\n      isSlim\n      contentClassName={styles.content}\n      className={buildClassName(styles.modalDialog, styles.root)}\n      isLowStackPriority\n    >\n      <Button\n        className={styles.closeButton}\n        round\n        color=\"translucent\"\n        size=\"tiny\"\n        onClick={handleCloseButtonClick}\n        ariaLabel={isBackButton ? oldLang('Common.Back') : oldLang('Common.Close')}\n      >\n        <div className={buttonClassName} />\n      </Button>\n      <BalanceBlock className={styles.balance} balance={starBalance} withAddButton />\n      <div className={buildClassName(\n        styles.header,\n        isResaleScreen && styles.resaleHeader,\n        !shouldShowHeader && styles.hiddenHeader,\n        isCategoryListPinned && styles.noBorder)}\n      >\n        <Transition\n          name=\"slideVerticalFade\"\n          activeKey={!shouldShowHeader ? 0 : isResaleScreen ? 1 : isHeaderForStarGifts ? 2 : 3}\n          slideClassName={styles.headerSlide}\n        >\n          {renderHeader()}\n        </Transition>\n      </div>\n      <Transition\n        ref={transitionRef}\n        className={styles.transition}\n        name=\"pushSlide\"\n        activeKey={isGiftScreen ? 1 : isResaleScreen ? 2 : 0}\n      >\n        {!isGiftScreen && !isResaleScreen && renderMainScreen()}\n        {isResaleScreen && selectedResaleGift\n          && (\n            <GiftModalResaleScreen\n              onGiftClick={handleGiftClick}\n            />\n          )}\n        {isGiftScreen && renderingModal?.forPeerId && (\n          <GiftComposer\n            gift={selectedGift}\n            giftByStars={giftsByStars.get(selectedGift)}\n            peerId={renderingModal.forPeerId}\n          />\n        )}\n      </Transition>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n  const {\n    starGifts,\n    stars,\n    currentUserId,\n  } = global;\n\n  const peer = modal?.forPeerId ? selectPeer(global, modal.forPeerId) : undefined;\n  const isSelf = Boolean(currentUserId && modal?.forPeerId === currentUserId);\n  const userFullInfo = peer ? selectUserFullInfo(global, peer?.id) : undefined;\n\n  const { resaleGifts } = selectTabState(global);\n  const resaleGiftsCount = resaleGifts.count;\n  const areResaleGiftsLoading = resaleGifts.isLoading !== false;\n  const selectedResaleGift = modal?.selectedResaleGift;\n\n  return {\n    boostPerSentGift: global.appConfig.boostsPerSentGift,\n    starGiftsById: starGifts?.byId,\n    starGiftIdsByCategory: starGifts?.idsByCategory,\n    myUniqueGiftsById: global.myUniqueGifts?.byId,\n    myUniqueGiftIds: global.myUniqueGifts?.ids,\n    starBalance: stars?.balance,\n    peer,\n    isSelf,\n    disallowedGifts: userFullInfo?.disallowedGifts,\n    resaleGiftsCount,\n    areResaleGiftsLoading,\n    selectedResaleGift,\n    tabId: selectTabState(global).id,\n  };\n})(GiftModal));\n\nfunction getCategoryKey(category: StarGiftCategory) {\n  if (category === 'all') return 0;\n  if (category === 'myUnique') return 1;\n  return 2;\n}\n","import type { FC } from '../../../lib/teact/teact';\nimport {\n  memo,\n  useMemo,\n  useRef } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiStarGift,\n} from '../../../api/types';\nimport type { ResaleGiftsFilterOptions } from '../../../types';\n\nimport { selectTabState,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { RESALE_GIFTS_LIMIT } from '../../../limits';\nimport { LOCAL_TGS_URLS } from '../../common/helpers/animatedAssets';\n\nimport useInfiniteScroll from '../../../hooks/useInfiniteScroll';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../common/AnimatedIconWithPreview';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Link from '../../ui/Link';\nimport Transition from '../../ui/Transition';\nimport GiftItemStar from './GiftItemStar';\n\nimport styles from './GiftModal.module.scss';\n\nexport type OwnProps = {\n  onGiftClick: (gift: ApiStarGift) => void;\n};\n\ntype StateProps = {\n  gift?: ApiStarGift;\n  resellGifts?: ApiStarGift[];\n  filter: ResaleGiftsFilterOptions;\n  areGiftsAllLoaded?: boolean;\n  areGiftsLoading?: boolean;\n  updateIteration: number;\n};\n\nconst INTERSECTION_THROTTLE = 200;\n\nconst GiftModalResaleScreen: FC<OwnProps & StateProps> = ({\n  resellGifts,\n  gift,\n  filter,\n  areGiftsAllLoaded,\n  areGiftsLoading,\n  updateIteration,\n  onGiftClick,\n}) => {\n  const {\n    loadResaleGifts,\n    updateResaleGiftsFilter,\n  } = getActions();\n  const scrollerRef = useRef<HTMLDivElement>();\n\n  const lang = useLang();\n  const resellGiftsIds = useMemo(() => {\n    return resellGifts?.map((g) => g.id);\n  }, [resellGifts]);\n\n  const hasFilter = Boolean(filter?.modelAttributes?.length\n    || filter?.patternAttributes?.length || filter?.backdropAttributes?.length);\n\n  const handleLoadMoreResellGifts = useLastCallback(() => {\n    if (gift) {\n      const giftId = 'regularGiftId' in gift\n        ? gift.regularGiftId\n        : gift.id;\n      loadResaleGifts({ giftId });\n    }\n  });\n\n  const isGiftsEmpty = Boolean(!resellGifts || resellGifts.length === 0);\n\n  const [viewportIds, onLoadMore] = useInfiniteScroll(\n    handleLoadMoreResellGifts,\n    resellGiftsIds,\n    !gift,\n    RESALE_GIFTS_LIMIT,\n  );\n\n  const { observe } = useIntersectionObserver({ rootRef: scrollerRef, throttleMs: INTERSECTION_THROTTLE });\n\n  const handleResetGiftsFilter = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      modelAttributes: [],\n      backdropAttributes: [],\n      patternAttributes: [],\n    } });\n  });\n\n  function renderNothingFoundGiftsWithFilter() {\n    return (\n      <div className={styles.notFoundGiftsRoot}>\n        <AnimatedIconWithPreview\n          size={160}\n          tgsUrl={LOCAL_TGS_URLS.SearchingDuck}\n          nonInteractive\n          noLoop\n        />\n        <div className={styles.notFoundGiftsDescription}>\n          {lang('ResellGiftsNoFound')}\n        </div>\n        {hasFilter && (\n          <Link\n            className={styles.notFoundGiftsLink}\n            onClick={handleResetGiftsFilter}\n          >\n            {lang('ResellGiftsClearFilters')}\n          </Link>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div ref={scrollerRef} className={buildClassName(styles.resaleScreenRoot, 'custom-scroll')}>\n      <Transition\n        name=\"zoomFade\"\n        activeKey={updateIteration}\n      >\n        {isGiftsEmpty && areGiftsAllLoaded && renderNothingFoundGiftsWithFilter()}\n        <InfiniteScroll\n          className={buildClassName(styles.resaleStarGiftsContainer)}\n          items={viewportIds}\n          onLoadMore={onLoadMore}\n          itemSelector=\".starGiftItem\"\n          noFastList\n          preloadBackwards={RESALE_GIFTS_LIMIT}\n          scrollContainerClosest={`.${styles.resaleScreenRoot}`}\n        >\n          {resellGifts?.map((g) => (\n            <GiftItemStar\n              key={g.id}\n              gift={g}\n              observeIntersection={observe}\n              isResale\n              onClick={onGiftClick}\n            />\n          ))}\n        </InfiniteScroll>\n      </Transition>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): Complete<StateProps> => {\n  const {\n    starGifts,\n  } = global;\n\n  const { resaleGifts } = selectTabState(global);\n  const gift = resaleGifts?.giftId ? starGifts?.byId[resaleGifts.giftId] : undefined;\n  const filter = resaleGifts.filter;\n  const areGiftsAllLoaded = resaleGifts.isAllLoaded;\n  const areGiftsLoading = resaleGifts.isLoading;\n  const updateIteration = resaleGifts.updateIteration;\n\n  return {\n    resellGifts: resaleGifts.gifts,\n    gift,\n    filter,\n    areGiftsAllLoaded,\n    areGiftsLoading,\n    updateIteration,\n  };\n})(GiftModalResaleScreen));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_VgmQnUg\",\"buttonsContainer\":\"IDlp6U6g\",\"itemIcon\":\"yuctLnuR\",\"sticker\":\"VT562JS0\",\"backdropAttributeMenuItemText\":\"D50wFfRL\",\"menuItemStickerText\":\"THcGWXSA\",\"menuItemText\":\"L6EVE2Ux\",\"backdrop\":\"A29QNxKb\",\"menuItemIcon\":\"GL4rVsev\",\"item\":\"qiYcBOYc\",\"menuContentContainer\":\"EDsBn29z\",\"menu\":\"ISaNdBwd\",\"left\":\"e4Kkh_MR\",\"right\":\"Kz_nCGC3\"};","import { type MouseEvent as ReactMouseEvent } from 'react';\nimport type { ElementRef, FC } from '../../../lib/teact/teact';\nimport type React from '../../../lib/teact/teact';\nimport {\n  memo,\n  useCallback,\n  useMemo,\n  useRef,\n  useState } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiStarGiftAttribute,\n  ApiStarGiftAttributeBackdrop,\n  ApiStarGiftAttributeCounter,\n  ApiStarGiftAttributeIdBackdrop,\n  ApiStarGiftAttributeIdPattern,\n  ApiStarGiftAttributeModel,\n  ApiStarGiftAttributePattern,\n  StarGiftAttributeIdModel,\n} from '../../../api/types';\nimport type { ResaleGiftsFilterOptions, ResaleGiftsSortType } from '../../../types';\n\nimport { selectTabState,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useContextMenuHandlers from '../../../hooks/useContextMenuHandlers';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Icon from '../../common/icons/Icon';\nimport RadialPatternBackground from '../../common/profile/RadialPatternBackground';\nimport Menu from '../../ui/Menu';\nimport MenuItem from '../../ui/MenuItem';\nimport SearchInput from '../../ui/SearchInput';\nimport ResaleGiftMenuAttributeSticker from './ResaleGiftMenuAttributeSticker';\n\nimport styles from './GiftResaleFilters.module.scss';\n\ntype OwnProps = {\n  dialogRef: ElementRef<HTMLDivElement>;\n};\ntype StateProps = {\n  filter: ResaleGiftsFilterOptions;\n  attributes?: ApiStarGiftAttribute[];\n  counters?: ApiStarGiftAttributeCounter[];\n};\n\nconst GiftResaleFilters: FC<StateProps & OwnProps> = ({\n  attributes,\n  counters,\n  filter,\n  dialogRef,\n}) => {\n  const lang = useLang();\n  const {\n    updateResaleGiftsFilter,\n  } = getActions();\n\n  const [searchModelQuery, setSearchModelQuery] = useState('');\n  const [searchBackdropQuery, setSearchBackdropQuery] = useState('');\n  const [searchPatternQuery, setSearchPatternQuery] = useState('');\n  const filteredAttributes = useMemo(() => {\n    const map: {\n      model: ApiStarGiftAttributeModel[];\n      pattern: ApiStarGiftAttributePattern[];\n      backdrop: ApiStarGiftAttributeBackdrop[];\n    } = {\n      model: [],\n      pattern: [],\n      backdrop: [],\n    };\n\n    for (const counter of counters ?? []) {\n      const { attribute } = counter;\n\n      if (!counter.count) {\n        continue;\n      }\n\n      const found = attributes?.find((attr) => {\n        if (attr.type === 'backdrop' && attribute.type === 'backdrop') {\n          return attr.backdropId === attribute.backdropId;\n        }\n\n        if (attr.type === 'model' && attribute.type === 'model') {\n          return attr.sticker.id === attribute.documentId;\n        }\n\n        if (attr.type === 'pattern' && attribute.type === 'pattern') {\n          return attr.sticker.id === attribute.documentId;\n        }\n\n        return false;\n      });\n\n      if (found?.type === 'backdrop') {\n        map.backdrop.push(found);\n      }\n      if (found?.type === 'model') {\n        map.model.push(found);\n      }\n      if (found?.type === 'pattern') {\n        map.pattern.push(found);\n      }\n    }\n\n    return map;\n  }, [attributes, counters]);\n\n  const filteredAndSearchedAttributes = useMemo(() => {\n    const filterBySearch = <T extends { name?: string }>(items: T[], query: string): T[] => {\n      if (!query.trim()) return items;\n\n      return items.filter(\n        (item): item is T => Boolean(item.name?.toLowerCase().includes(query.toLowerCase())),\n      );\n    };\n\n    return {\n      model: filterBySearch(filteredAttributes.model, searchModelQuery),\n      pattern: filterBySearch(filteredAttributes.pattern, searchPatternQuery),\n      backdrop: filterBySearch(filteredAttributes.backdrop, searchBackdropQuery),\n    };\n  }, [filteredAttributes, searchModelQuery, searchBackdropQuery, searchPatternQuery]);\n\n  // Sort Menu\n  const sortMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isSortContextMenuOpen,\n    contextMenuAnchor: sortContextMenuAnchor,\n    handleContextMenu: handleSortContextMenu,\n    handleContextMenuClose: handleSortContextMenuClose,\n    handleContextMenuHide: handleSortContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getSortMenuElement = useLastCallback(() => sortMenuRef.current!);\n\n  // Model Menu\n  const modelMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isModelContextMenuOpen,\n    contextMenuAnchor: modelContextMenuAnchor,\n    handleContextMenu: handleModelContextMenu,\n    handleContextMenuClose: handleModelContextMenuClose,\n    handleContextMenuHide: handleModelContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getModelMenuElement = useLastCallback(\n    () => modelMenuRef.current!,\n  );\n\n  // Backdrop Menu\n  const backdropMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isBackdropContextMenuOpen,\n    contextMenuAnchor: backdropContextMenuAnchor,\n    handleContextMenu: handleBackdropContextMenu,\n    handleContextMenuClose: handleBackdropContextMenuClose,\n    handleContextMenuHide: handleBackdropContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getBackdropMenuElement = useLastCallback(() => backdropMenuRef.current!);\n\n  // Pattern Menu\n  const patternMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isPatternContextMenuOpen,\n    contextMenuAnchor: patternContextMenuAnchor,\n    handleContextMenu: handlePatternContextMenu,\n    handleContextMenuClose: handlePatternContextMenuClose,\n    handleContextMenuHide: handlePatternContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getPatternMenuElement = useLastCallback(() => patternMenuRef.current!);\n\n  const SortMenuButton: FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n    = useMemo(() => {\n      const sortType = filter.sortType;\n      return ({ onTrigger, isOpen: isMenuOpen }) => (\n        <div\n          className={styles.item}\n          onClick={onTrigger}\n        >\n          {sortType === 'byDate' && lang('ValueGiftSortByDate')}\n          {sortType === 'byNumber' && lang('ValueGiftSortByNumber')}\n          {sortType === 'byPrice' && lang('ValueGiftSortByPrice')}\n          <Icon\n            name=\"dropdown-arrows\"\n            className={styles.itemIcon}\n          />\n        </div>\n      );\n    }, [lang, filter]);\n\n  const ModelMenuButton:\n  FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n    = useMemo(() => {\n      const attributesCount = filter?.modelAttributes?.length || 0;\n      return ({ onTrigger, isOpen: isMenuOpen }) => (\n        <div\n          className={styles.item}\n          onClick={onTrigger}\n        >\n          {attributesCount === 0 && lang('GiftAttributeModel')}\n          {attributesCount > 0\n            && lang('GiftAttributeModelPlural', { count: attributesCount }, { pluralValue: attributesCount })}\n          <Icon\n            name=\"dropdown-arrows\"\n            className={styles.itemIcon}\n          />\n        </div>\n      );\n    }, [lang, filter]);\n  const BackdropMenuButton:\n  FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n    = useMemo(() => {\n      const attributesCount = filter?.backdropAttributes?.length || 0;\n      return ({ onTrigger, isOpen: isMenuOpen }) => (\n        <div\n          className={styles.item}\n          onClick={onTrigger}\n        >\n          {attributesCount === 0 && lang('GiftAttributeBackdrop')}\n          {attributesCount > 0\n            && lang('GiftAttributeBackdropPlural', { count: attributesCount }, { pluralValue: attributesCount })}\n          <Icon\n            name=\"dropdown-arrows\"\n            className={styles.itemIcon}\n          />\n        </div>\n      );\n    }, [lang, filter]);\n  const PatternMenuButton: FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n    = useMemo(() => {\n      const attributesCount = filter?.patternAttributes?.length || 0;\n      return ({ onTrigger, isOpen: isMenuOpen }) => (\n        <div\n          className={styles.item}\n          onClick={onTrigger}\n        >\n          {attributesCount === 0 && lang('GiftAttributeSymbol')}\n          {attributesCount > 0\n            && lang('GiftAttributeSymbolPlural', { count: attributesCount }, { pluralValue: attributesCount })}\n          <Icon\n            name=\"dropdown-arrows\"\n            className={styles.itemIcon}\n          />\n        </div>\n      );\n    }, [lang, filter]);\n\n  const handleSortMenuItemClick = useLastCallback((type: ResaleGiftsSortType) => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      sortType: type,\n    } });\n  });\n\n  const handleSelectedAllModelsClick = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      modelAttributes: [],\n    } });\n  });\n  const handleSelectedAllPatternsClick = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      patternAttributes: [],\n    } });\n  });\n  const handleSelectedAllBackdropsClick = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      backdropAttributes: [],\n    } });\n  });\n\n  const handleModelMenuItemClick = useLastCallback((attribute: ApiStarGiftAttributeModel) => {\n    if (!counters) return;\n    const modelAttributes = filter.modelAttributes || [];\n    const modelAttribute\n      = counters.find((counter): counter is ApiStarGiftAttributeCounter<StarGiftAttributeIdModel> =>\n        counter.attribute.type === 'model' && counter.attribute.documentId === attribute.sticker.id,\n      )?.attribute;\n\n    if (!modelAttribute) return;\n\n    const isActive = modelAttributes.some((item) => item.documentId === modelAttribute.documentId);\n    const updatedAttributes = isActive\n      ? modelAttributes.filter((item) => item.documentId !== modelAttribute.documentId)\n      : [...modelAttributes, modelAttribute];\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      modelAttributes: updatedAttributes,\n    } });\n  });\n\n  const handlePatternMenuItemClick = useLastCallback((attribute: ApiStarGiftAttributePattern) => {\n    if (!counters) return;\n    const patternAttributes = filter.patternAttributes || [];\n    const patternAttribute = counters.find(\n      (counter): counter is ApiStarGiftAttributeCounter<ApiStarGiftAttributeIdPattern> =>\n        counter.attribute.type === 'pattern' && counter.attribute.documentId === attribute.sticker.id,\n    )?.attribute;\n\n    if (!patternAttribute) return;\n\n    const isActive = patternAttributes.some((item) => item.documentId === patternAttribute.documentId);\n    const updatedAttributes = isActive\n      ? patternAttributes.filter((item) => item.documentId !== patternAttribute.documentId)\n      : [...patternAttributes, patternAttribute];\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      patternAttributes: updatedAttributes,\n    } });\n  });\n\n  const handleBackdropMenuItemClick = useLastCallback((attribute: ApiStarGiftAttributeBackdrop) => {\n    if (!counters) return;\n    const backdropAttributes = filter.backdropAttributes || [];\n    const backdropAttribute = counters.find(\n      (counter): counter is ApiStarGiftAttributeCounter<ApiStarGiftAttributeIdBackdrop> =>\n        counter.attribute.type === 'backdrop' && counter.attribute.backdropId === attribute.backdropId,\n    )?.attribute;\n\n    if (!backdropAttribute) return;\n\n    const isActive = backdropAttributes.some((item) => item.backdropId === backdropAttribute.backdropId);\n    const updatedAttributes = isActive\n      ? backdropAttributes.filter((item) => item.backdropId !== backdropAttribute.backdropId)\n      : [...backdropAttributes, backdropAttribute];\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      backdropAttributes: updatedAttributes,\n    } });\n  });\n\n  function renderSortMenuItems() {\n    return (\n      <>\n        <MenuItem icon=\"sort-by-price\" onClick={() => { handleSortMenuItemClick('byPrice'); }}>\n          <div className={styles.menuItemText}>\n            {lang('GiftSortByPrice')}\n          </div>\n          <Icon\n            className={styles.menuItemIcon}\n            name={filter?.sortType === 'byPrice' ? 'check' : 'placeholder'}\n          />\n        </MenuItem>\n        <MenuItem icon=\"sort-by-date\" onClick={() => { handleSortMenuItemClick('byDate'); }}>\n          <div className={styles.menuItemText}>\n            {lang('GiftSortByDate')}\n          </div>\n          <Icon\n            className={styles.menuItemIcon}\n            name={filter?.sortType === 'byDate' ? 'check' : 'placeholder'}\n          />\n\n        </MenuItem>\n        <MenuItem icon=\"sort-by-number\"onClick={() => { handleSortMenuItemClick('byNumber'); }}>\n          <div className={styles.menuItemText}>\n            {lang('GiftSortByNumber')}\n          </div>\n          <Icon\n            className={styles.menuItemIcon}\n            name={filter?.sortType === 'byNumber' ? 'check' : 'placeholder'}\n          />\n        </MenuItem>\n      </>\n    );\n  }\n\n  function renderSortMenu() {\n    return (\n      <Menu\n        isOpen={isSortContextMenuOpen}\n        anchor={sortContextMenuAnchor}\n        ref={sortMenuRef}\n        className={buildClassName(\n          styles.menu,\n          styles.left,\n          'with-menu-transitions',\n        )}\n        getMenuElement={getSortMenuElement}\n        autoClose\n        onClose={handleSortContextMenuClose}\n        onCloseAnimationEnd={handleSortContextMenuHide}\n        positionX=\"left\"\n      >\n        {renderSortMenuItems()}\n      </Menu>\n    );\n  }\n\n  const handleSearchModelInputReset = useCallback(() => {\n    setSearchModelQuery('');\n  }, []);\n  const handleSearchBackdropInputReset = useCallback(() => {\n    setSearchBackdropQuery('');\n  }, []);\n  const handleSearchPatternInputReset = useCallback(() => {\n    setSearchPatternQuery('');\n  }, []);\n  const handleSearchInputClick = useLastCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n  });\n\n  const modelMenuItemsContainerRef = useRef<HTMLDivElement>();\n  const { observe } = useIntersectionObserver({\n    rootRef: modelMenuItemsContainerRef,\n    isDisabled: !modelContextMenuAnchor,\n  });\n\n  function renderModelMenuItems() {\n    const models = filteredAndSearchedAttributes.model;\n    const selectedAttributes = filter.modelAttributes ?? [];\n    const isSelectedAll = selectedAttributes.length === 0;\n    return (\n      <div className={styles.menuContentContainer} ref={modelMenuItemsContainerRef}>\n        <SearchInput\n          onClick={handleSearchInputClick}\n          className={styles.search}\n          value={searchModelQuery}\n          onChange={setSearchModelQuery}\n          onReset={handleSearchModelInputReset}\n          placeholder={lang('Search')}\n        />\n        <MenuItem icon=\"select\" onClick={handleSelectedAllModelsClick} disabled={isSelectedAll}>\n          {lang('ContextMenuItemSelectAll')}\n        </MenuItem>\n        {models.map((model) => {\n          const isSelected = isSelectedAll\n            || selectedAttributes.some((attr) => attr.documentId === model.sticker.id);\n          return (\n            <MenuItem\n              key={model.name}\n              onClick={() => {\n                handleModelMenuItemClick(model);\n              }}\n            >\n              <ResaleGiftMenuAttributeSticker\n                className={styles.sticker}\n                sticker={model.sticker}\n                type=\"model\"\n                observeIntersectionForLoading={observe}\n                observeIntersectionForPlaying={observe}\n              />\n              <div className={styles.menuItemStickerText}>\n                {model.name}\n              </div>\n              <Icon\n                className={styles.menuItemIcon}\n                name={isSelected ? 'check' : 'placeholder'}\n              />\n            </MenuItem>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderModelMenu() {\n    return (\n      <Menu\n        isOpen={isModelContextMenuOpen}\n        anchor={modelContextMenuAnchor}\n        ref={modelMenuRef}\n        className={buildClassName(\n          styles.menu,\n          styles.left,\n          'with-menu-transitions',\n        )}\n        getMenuElement={getModelMenuElement}\n        autoClose\n        onClose={handleModelContextMenuClose}\n        onCloseAnimationEnd={handleModelContextMenuHide}\n      >\n        {renderModelMenuItems()}\n      </Menu>\n    );\n  }\n\n  function renderBackdropMenuItems() {\n    const backdrops = filteredAndSearchedAttributes.backdrop;\n    const selectedAttributes = filter.backdropAttributes ?? [];\n    const isSelectedAll = selectedAttributes.length === 0;\n\n    return (\n      <div className={styles.menuContentContainer}>\n        <SearchInput\n          onClick={handleSearchInputClick}\n          className={styles.search}\n          value={searchBackdropQuery}\n          onChange={setSearchBackdropQuery}\n          onReset={handleSearchBackdropInputReset}\n          placeholder={lang('Search')}\n        />\n        <MenuItem icon=\"select\" onClick={handleSelectedAllBackdropsClick} disabled={isSelectedAll}>\n          {lang('ContextMenuItemSelectAll')}\n        </MenuItem>\n        {backdrops.map((backdrop) => {\n          const isSelected = isSelectedAll\n            || selectedAttributes.some((attr) => attr.backdropId === backdrop.backdropId);\n\n          return (\n            <MenuItem\n              key={backdrop.name}\n              onClick={() => {\n                handleBackdropMenuItemClick(backdrop);\n              }}\n            >\n              <RadialPatternBackground\n                className={styles.backdrop}\n                backgroundColors={[backdrop.centerColor, backdrop.edgeColor]}\n              />\n              <div className={styles.backdropAttributeMenuItemText}>\n                {backdrop.name}\n              </div>\n              <Icon\n                className={styles.menuItemIcon}\n                name={isSelected ? 'check' : 'placeholder'}\n              />\n            </MenuItem>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderBackdropMenu() {\n    return (\n      <Menu\n        isOpen={isBackdropContextMenuOpen}\n        anchor={backdropContextMenuAnchor}\n        ref={backdropMenuRef}\n        className={buildClassName(styles.menu, styles.right, 'with-menu-transitions')}\n        getMenuElement={getBackdropMenuElement}\n        autoClose\n        onClose={handleBackdropContextMenuClose}\n        onCloseAnimationEnd={handleBackdropContextMenuHide}\n        positionX=\"right\"\n      >\n        {renderBackdropMenuItems()}\n      </Menu>\n    );\n  }\n\n  function renderPatternMenuItems() {\n    const patterns = filteredAndSearchedAttributes.pattern;\n    const selectedAttributes = filter.patternAttributes ?? [];\n    const isSelectedAll = selectedAttributes.length === 0;\n\n    return (\n      <div className={styles.menuContentContainer}>\n        <SearchInput\n          onClick={handleSearchInputClick}\n          className={styles.search}\n          value={searchPatternQuery}\n          onChange={setSearchPatternQuery}\n          onReset={handleSearchPatternInputReset}\n          placeholder={lang('Search')}\n        />\n        <MenuItem icon=\"select\" onClick={handleSelectedAllPatternsClick} disabled={isSelectedAll}>\n          {lang('ContextMenuItemSelectAll')}\n        </MenuItem>\n        {patterns.map((pattern) => {\n          const isSelected = isSelectedAll\n            || selectedAttributes.some((attr) => attr.documentId === pattern.sticker.id);\n\n          return (\n            <MenuItem\n              key={pattern.name}\n              onClick={() => {\n                handlePatternMenuItemClick(pattern);\n              }}\n            >\n\n              <ResaleGiftMenuAttributeSticker\n                className={styles.sticker}\n                sticker={pattern.sticker}\n                type=\"pattern\"\n              />\n\n              <div className={styles.menuItemStickerText}>\n                {pattern.name}\n              </div>\n              <Icon\n                className={styles.menuItemIcon}\n                name={isSelected ? 'check' : 'placeholder'}\n              />\n            </MenuItem>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderPatternMenu() {\n    return (\n      <Menu\n        isOpen={isPatternContextMenuOpen}\n        anchor={patternContextMenuAnchor}\n        ref={patternMenuRef}\n        className={buildClassName(styles.menu, styles.right, 'with-menu-transitions')}\n        getMenuElement={getPatternMenuElement}\n        autoClose\n        onClose={handlePatternContextMenuClose}\n        onCloseAnimationEnd={handlePatternContextMenuHide}\n      >\n        {renderPatternMenuItems()}\n      </Menu>\n    );\n  }\n\n  return (\n    <div className={styles.root}>\n      {Boolean(sortContextMenuAnchor) && renderSortMenu()}\n      {Boolean(modelContextMenuAnchor) && renderModelMenu()}\n      {Boolean(backdropContextMenuAnchor) && renderBackdropMenu()}\n      {Boolean(patternContextMenuAnchor) && renderPatternMenu()}\n      <div className={styles.buttonsContainer}>\n        <SortMenuButton\n          onTrigger={handleSortContextMenu}\n          isOpen={isSortContextMenuOpen}\n        />\n        <ModelMenuButton\n          onTrigger={handleModelContextMenu}\n          isOpen={isModelContextMenuOpen}\n        />\n        <BackdropMenuButton\n          onTrigger={handleBackdropContextMenu}\n          isOpen={isBackdropContextMenuOpen}\n        />\n        <PatternMenuButton\n          onTrigger={handlePatternContextMenu}\n          isOpen={isPatternContextMenuOpen}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal((global): Complete<StateProps> => {\n  const { resaleGifts } = selectTabState(global);\n\n  const attributes = resaleGifts.attributes;\n  const counters = resaleGifts.counters;\n  const filter = resaleGifts.filter;\n\n  return {\n    attributes,\n    counters,\n    filter,\n  };\n})(GiftResaleFilters));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"KLFLR9ji\",\"thumb\":\"fCL5rY2D\"};","import type { FC } from '../../../lib/teact/teact';\nimport { memo, useRef } from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { ApiSticker } from '../../../api/types';\nimport type { ThemeKey } from '../../../types';\n\nimport { selectTheme } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { REM } from '../../common/helpers/mediaDimensions';\n\nimport useDynamicColorListener from '../../../hooks/stickers/useDynamicColorListener';\nimport { type ObserveFn } from '../../../hooks/useIntersectionObserver';\n\nimport StickerView from '../../common/StickerView';\n\nimport styles from './ResaleGiftMenuAttributeSticker.module.scss';\n\ntype OwnProps = {\n  className?: string;\n  type: 'model' | 'pattern';\n  sticker: ApiSticker;\n  observeIntersectionForLoading?: ObserveFn;\n  observeIntersectionForPlaying?: ObserveFn;\n};\n\ntype StateProps = {\n  theme: ThemeKey;\n};\n\nconst ATTRIBUTE_STICKER_SIZE = 1.5 * REM;\n\nconst ResaleGiftMenuAttributeSticker: FC<StateProps & OwnProps> = ({\n  className,\n  type,\n  sticker,\n  observeIntersectionForLoading,\n  observeIntersectionForPlaying,\n  theme,\n}) => {\n  const stickerRef = useRef<HTMLDivElement>();\n\n  const customColor = useDynamicColorListener(stickerRef, undefined, type !== 'pattern');\n\n  return (\n    <div\n      ref={stickerRef}\n      className={buildClassName(styles.root, className)}\n      style={`width: ${ATTRIBUTE_STICKER_SIZE}px; height: ${ATTRIBUTE_STICKER_SIZE}px`}\n    >\n      <StickerView\n        containerRef={stickerRef}\n        sticker={sticker}\n        size={ATTRIBUTE_STICKER_SIZE}\n        shouldPreloadPreview\n        observeIntersectionForLoading={observeIntersectionForLoading}\n        observeIntersectionForPlaying={observeIntersectionForPlaying}\n        thumbClassName={styles.thumb}\n        customColor={customColor}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): Complete<StateProps> => {\n  return {\n    theme: selectTheme(global),\n  };\n})(ResaleGiftMenuAttributeSticker));\n","// extracted by mini-css-extract-plugin\nexport default {\"list\":\"cUjwvN00\",\"pinned\":\"NhJABU3M\",\"item-selected\":\"medfcJpd\",\"itemSelected\":\"medfcJpd\",\"item\":\"dO7FKYY4\",\"selected-item\":\"B2lEJk1v\",\"selectedItem\":\"B2lEJk1v\",\"star\":\"Pb7AU805\"};","import type { ElementRef } from '../../../lib/teact/teact';\nimport {\n  memo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { StarGiftCategory } from '../../../types';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useHorizontalScroll from '../../../hooks/useHorizontalScroll';\nimport useLang from '../../../hooks/useLang';\n\nimport styles from './StarGiftCategoryList.module.scss';\n\ntype OwnProps = {\n  ref?: ElementRef<HTMLDivElement>;\n  areUniqueStarGiftsDisallowed?: boolean;\n  areLimitedStarGiftsDisallowed?: boolean;\n  isSelf?: boolean;\n  hasMyUnique?: boolean;\n  isPinned?: boolean;\n  onCategoryChanged: (category: StarGiftCategory) => void;\n};\n\ntype StateProps = {\n  idsByCategory?: Record<StarGiftCategory, string[]>;\n};\n\nconst StarGiftCategoryList = ({\n  ref: externalRef,\n  idsByCategory,\n  onCategoryChanged,\n  areUniqueStarGiftsDisallowed,\n  areLimitedStarGiftsDisallowed,\n  isSelf,\n  hasMyUnique,\n  isPinned,\n}: StateProps & OwnProps) => {\n  let ref = useRef<HTMLDivElement>();\n  if (externalRef) {\n    ref = externalRef;\n  }\n\n  const lang = useLang();\n\n  const hasCollectible = Boolean(idsByCategory?.collectible?.length);\n\n  const [selectedCategory, setSelectedCategory] = useState<StarGiftCategory>('all');\n\n  function handleItemClick(category: StarGiftCategory) {\n    setSelectedCategory(category);\n    onCategoryChanged(category);\n  }\n\n  function renderCategoryName(category: StarGiftCategory) {\n    if (category === 'all') return lang('AllGiftsCategory');\n    if (category === 'myUnique') return lang('GiftCategoryMyGifts');\n    if (category === 'collectible') return lang('GiftCategoryCollectibles');\n    return category;\n  }\n\n  function renderCategoryItem(category: StarGiftCategory) {\n    return (\n      <div\n        className={buildClassName(\n          styles.item,\n          selectedCategory === category && styles.selectedItem,\n        )}\n        onClick={() => handleItemClick(category)}\n      >\n        {renderCategoryName(category)}\n      </div>\n    );\n  }\n\n  useHorizontalScroll(ref, undefined, true);\n\n  return (\n    <div ref={ref} className={buildClassName(styles.list, isPinned && styles.pinned, 'no-scrollbar')}>\n      {renderCategoryItem('all')}\n      {!areUniqueStarGiftsDisallowed && !isSelf && hasMyUnique && renderCategoryItem('myUnique')}\n      {(!areUniqueStarGiftsDisallowed || !areLimitedStarGiftsDisallowed)\n        && hasCollectible && renderCategoryItem('collectible')}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { starGifts } = global;\n\n    return {\n      idsByCategory: starGifts?.idsByCategory,\n    };\n  },\n)(StarGiftCategoryList));\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"ETFjTQkC\",\"headerTitle\":\"JKYZ8cFl\",\"headerHint\":\"wHxufgix\",\"starIconContainer\":\"NEElQBO6\",\"progress\":\"DJPf4ekd\",\"table\":\"WuL_UIYd\",\"footerText\":\"TWuxZcHO\",\"footer\":\"OXLUuiYb\",\"understoodIcon\":\"QJryEH9W\"};","import { memo, useMemo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { TabState } from '../../../global/types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../util/dates/dateFormat';\nimport { formatStarsAsIcon, formatStarsAsText } from '../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport PremiumProgress from '../../common/PremiumProgress';\nimport Button from '../../ui/Button';\nimport TableInfoModal, { type TableData } from '../common/TableInfoModal';\n\nimport styles from './StarGiftPriceDecreaseInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['starGiftPriceDecreaseInfoModal'];\n};\n\nconst StarGiftPriceDecreaseInfoModal = ({ modal }: OwnProps) => {\n  const { closeStarGiftPriceDecreaseInfoModal } = getActions();\n\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const handleClose = useLastCallback(() => {\n    closeStarGiftPriceDecreaseInfoModal();\n  });\n\n  const tableData = useMemo(() => {\n    if (!renderingModal) return undefined;\n    const { prices } = renderingModal;\n    return prices.map((price): TableData[number] => [\n      formatDateTimeToString(price.date * 1000, lang.code, true, undefined, true),\n      formatStarsAsIcon(lang, price.upgradeStars, { containerClassName: styles.starIconContainer }),\n    ]);\n  }, [lang, renderingModal]);\n\n  const footer = useMemo(() => {\n    if (!isOpen) return undefined;\n    return (\n      <div className={styles.footer}>\n        <p className={styles.footerText}>{lang('UpgradeCostDrops')}</p>\n        <Button\n          onClick={handleClose}\n          iconName=\"understood\"\n          iconClassName={styles.understoodIcon}\n        >\n          {lang('ButtonUnderstood')}\n        </Button>\n      </div>\n    );\n  }, [lang, isOpen, handleClose]);\n\n  if (!tableData || !renderingModal) return undefined;\n\n  const { currentPrice, minPrice, maxPrice } = renderingModal;\n  const progress = maxPrice !== minPrice ? (currentPrice - minPrice) / (maxPrice - minPrice) : 0;\n\n  const header = (\n    <div className={styles.header}>\n      <PremiumProgress\n        leftText={formatStarsAsText(lang, maxPrice)}\n        rightText={formatStarsAsText(lang, minPrice)}\n        floatingBadgeText={formatStarsAsText(lang, currentPrice)}\n        floatingBadgeIcon=\"star\"\n        progress={progress}\n        isInverted\n        shouldSkipGradient\n        className={styles.progress}\n      />\n      <p className={styles.headerTitle}>{lang('StarGiftUpgradeCostModalTitle')}</p>\n      <p className={styles.headerHint}>{lang('StarGiftUpgradeCostHint')}</p>\n    </div>\n  );\n\n  return (\n    <TableInfoModal\n      isOpen={isOpen}\n      onClose={handleClose}\n      header={header}\n      tableData={tableData}\n      tableClassName={buildClassName(styles.table, 'custom-scroll')}\n      footer={footer}\n    />\n  );\n};\n\nexport default memo(StarGiftPriceDecreaseInfoModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"irv1C8bo\",\"withManageButtons\":\"QcTw5OSp\",\"sticker\":\"a1ASgPwu\",\"withBadge\":\"OFWOLtAH\",\"subtitleBadge\":\"V7kDVPLm\",\"badge\":\"PAmbIL6y\",\"radialPattern\":\"UvhsGZLf\",\"amount\":\"zTVWZg63\",\"transition\":\"Tu6_OHoq\",\"transitionSlide\":\"iUTKLzTN\",\"title\":\"ECTvfOda\",\"subtitle\":\"S6JwvHWD\"};","import type { TeactNode } from '@teact';\nimport { memo, useMemo } from '@teact';\nimport { getActions } from '../../../global';\n\nimport type {\n  ApiPeer,\n  ApiSavedStarGift,\n  ApiStarGiftAttributeBackdrop, ApiStarGiftAttributeModel, ApiStarGiftAttributePattern,\n  ApiTypeCurrencyAmount } from '../../../api/types';\n\nimport {\n  formatStarsTransactionAmount,\n} from '../../../global/helpers/payments';\nimport { IS_TOUCH_ENV } from '../../../util/browser/windowEnvironment.ts';\nimport buildClassName from '../../../util/buildClassName';\nimport buildStyle from '../../../util/buildStyle';\nimport { REM } from '../../common/helpers/mediaDimensions.ts';\n\nimport { useTransitionActiveKey } from '../../../hooks/animations/useTransitionActiveKey';\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\n\nimport AnimatedIconFromSticker from '../../common/AnimatedIconFromSticker';\nimport Icon from '../../common/icons/Icon';\nimport StarIcon from '../../common/icons/StarIcon';\nimport RadialPatternBackground from '../../common/profile/RadialPatternBackground';\nimport Transition from '../../ui/Transition';\nimport UniqueGiftManageButtons from './UniqueGiftManageButtons';\n\nimport styles from './UniqueGiftHeader.module.scss';\n\ntype OwnProps = {\n  modelAttribute: ApiStarGiftAttributeModel;\n  backdropAttribute: ApiStarGiftAttributeBackdrop;\n  patternAttribute: ApiStarGiftAttributePattern;\n  title?: string;\n  badge?: TeactNode;\n  subtitle?: TeactNode;\n  subtitlePeer?: ApiPeer;\n  className?: string;\n  resellPrice?: ApiTypeCurrencyAmount;\n  showManageButtons?: boolean;\n  savedGift?: ApiSavedStarGift;\n};\n\nconst STICKER_SIZE = 120;\n\nconst UniqueGiftHeader = ({\n  modelAttribute,\n  backdropAttribute,\n  patternAttribute,\n  title,\n  badge,\n  subtitle,\n  subtitlePeer,\n  className,\n  resellPrice,\n  showManageButtons,\n  savedGift,\n}: OwnProps) => {\n  const {\n    openChat,\n  } = getActions();\n\n  const { isMobile } = useAppLayout();\n\n  const lang = useLang();\n  const [isGiftHover, markGiftHover, unmarkGiftHover] = useFlag(false);\n  const activeKey = useTransitionActiveKey([modelAttribute, backdropAttribute, patternAttribute]);\n  const subtitleColor = backdropAttribute?.textColor;\n\n  const radialPatternBackdrop = useMemo(() => {\n    const backdropColors = [backdropAttribute.centerColor, backdropAttribute.edgeColor];\n\n    return (\n      <RadialPatternBackground\n        className={styles.radialPattern}\n        canvasClassName={styles.radialPatternCanvas}\n        backgroundColors={backdropColors}\n        patternIcon={patternAttribute.sticker}\n        yPosition={7.5 * REM}\n        maxRadius={0.26}\n        patternSize={isMobile ? 14 : 16}\n        ovalFactor={1.2}\n      />\n    );\n  }, [backdropAttribute, patternAttribute, isMobile]);\n\n  return (\n    <div className={buildClassName(styles.root,\n      'interactive-gift',\n      showManageButtons && styles.withManageButtons,\n      badge && styles.withBadge,\n      className)}\n    >\n      <Transition\n        className={styles.transition}\n        slideClassName={buildClassName(styles.transitionSlide)}\n        activeKey={activeKey}\n        direction={1}\n        name=\"zoomBounceSemiFade\"\n      >\n        {radialPatternBackdrop}\n        <AnimatedIconFromSticker\n          className={styles.sticker}\n          sticker={modelAttribute.sticker}\n          size={STICKER_SIZE}\n          noLoop={!isGiftHover}\n          onMouseEnter={!IS_TOUCH_ENV ? markGiftHover : undefined}\n          onMouseLeave={!IS_TOUCH_ENV ? unmarkGiftHover : undefined}\n        />\n      </Transition>\n      {Boolean(badge) && (\n        <div className={styles.badge}>{badge}</div>\n      )}\n      {title && <h1 className={styles.title}>{title}</h1>}\n      {Boolean(subtitle) && (\n        <div\n          className={buildClassName(styles.subtitle, subtitlePeer && styles.subtitleBadge)}\n          style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}\n          onClick={() => {\n            if (subtitlePeer) {\n              openChat({ id: subtitlePeer.id });\n            }\n          }}\n        >\n          {subtitle}\n        </div>\n      )}\n      {savedGift && showManageButtons && (\n        <UniqueGiftManageButtons\n          savedGift={savedGift}\n        />\n      )}\n      {resellPrice && (\n        <p className={styles.amount}>\n          <span>\n            {formatStarsTransactionAmount(lang, resellPrice)}\n          </span>\n          {resellPrice.currency === 'XTR' && <StarIcon type=\"gold\" size=\"middle\" />}\n          {resellPrice.currency === 'TON' && <Icon name=\"toncoin\" />}\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default memo(UniqueGiftHeader);\n","// extracted by mini-css-extract-plugin\nexport default {\"manageButtons\":\"feHNN0j8\",\"manageButton\":\"biAUzmLA\",\"text\":\"hsDNs5hG\",\"icon\":\"APNjRx1K\"};","import { memo, useMemo } from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type {\n  ApiEmojiStatusCollectible,\n  ApiEmojiStatusType,\n  ApiSavedStarGift,\n} from '../../../api/types';\n\nimport { DEFAULT_STATUS_ICON_ID } from '../../../config';\nimport { STARS_CURRENCY_CODE } from '../../../config';\nimport { selectTabState, selectUser } from '../../../global/selectors';\nimport { formatDateAtTime } from '../../../util/dates/dateFormat';\nimport { getServerTime } from '../../../util/serverTime';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Button from '../../ui/Button';\n\nimport styles from './UniqueGiftManageButtons.module.scss';\n\ntype OwnProps = {\n  savedGift?: ApiSavedStarGift;\n};\n\ntype StateProps = {\n  currentUserEmojiStatus?: ApiEmojiStatusType;\n  collectibleEmojiStatuses?: ApiEmojiStatusType[];\n};\n\nconst UniqueGiftManageButtons = ({\n  savedGift,\n  currentUserEmojiStatus,\n  collectibleEmojiStatuses,\n}: OwnProps & StateProps) => {\n  const {\n    openGiftTransferModal,\n    openGiftResalePriceComposerModal,\n    openGiftStatusInfoModal,\n    setEmojiStatus,\n    updateStarGiftPrice,\n    showNotification,\n    closeGiftInfoModal,\n  } = getActions();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n\n  const gift = savedGift?.gift;\n  const isGiftUnique = gift?.type === 'starGiftUnique';\n  const giftResalePrice = isGiftUnique ? gift.resellPrice : undefined;\n\n  const global = getGlobal();\n  const modal = selectTabState(global).giftInfoModal;\n  const peerId = modal?.peerId;\n\n  const starGiftUniqueSlug = gift?.type === 'starGiftUnique' ? gift.slug : undefined;\n  const userCollectibleStatus = useMemo(() => {\n    if (!starGiftUniqueSlug) return undefined;\n    return collectibleEmojiStatuses?.find((status) =>\n      status.type === 'collectible' && status.slug === starGiftUniqueSlug,\n    ) as ApiEmojiStatusCollectible | undefined;\n  }, [starGiftUniqueSlug, collectibleEmojiStatuses]);\n\n  const currentUniqueEmojiStatusSlug = currentUserEmojiStatus?.type === 'collectible'\n    ? currentUserEmojiStatus.slug : undefined;\n  const canTakeOff = starGiftUniqueSlug !== undefined && currentUniqueEmojiStatusSlug === starGiftUniqueSlug;\n  const canWear = Boolean(userCollectibleStatus) && !canTakeOff;\n\n  const handleTransfer = useLastCallback(() => {\n    if (!savedGift || savedGift?.gift.type !== 'starGiftUnique') return;\n\n    if (savedGift.canTransferAt && savedGift.canTransferAt > getServerTime()) {\n      showNotification({\n        message: {\n          key: 'NotificationGiftCanTransferAt',\n          variables: { date: formatDateAtTime(oldLang, savedGift.canTransferAt * 1000) },\n        },\n      });\n      return;\n    }\n\n    openGiftTransferModal({ gift: savedGift });\n  });\n\n  const handleWear = useLastCallback(() => {\n    if (canTakeOff) {\n      setEmojiStatus({\n        emojiStatus: { type: 'regular', documentId: DEFAULT_STATUS_ICON_ID },\n      });\n    } else if (userCollectibleStatus) {\n      openGiftStatusInfoModal({ emojiStatus: userCollectibleStatus });\n    }\n  });\n\n  const handleSell = useLastCallback(() => {\n    if (!savedGift || !peerId) return;\n    if (savedGift.canResellAt && savedGift.canResellAt > getServerTime()) {\n      showNotification({\n        message: {\n          key: 'NotificationGiftCanResellAt',\n          variables: { date: formatDateAtTime(oldLang, savedGift.canResellAt * 1000) },\n        },\n      });\n      return;\n    }\n    openGiftResalePriceComposerModal({ peerId, gift: savedGift });\n  });\n\n  const handleUnlist = useLastCallback(() => {\n    if (!savedGift || savedGift.gift.type !== 'starGiftUnique' || !savedGift.inputGift) return;\n    closeGiftInfoModal();\n    updateStarGiftPrice({ gift: savedGift.inputGift, price: {\n      currency: STARS_CURRENCY_CODE, amount: 0, nanos: 0,\n    } });\n    showNotification({\n      icon: 'unlist-outline',\n      message: {\n        key: 'NotificationGiftIsUnlist',\n        variables: { gift: lang('GiftUnique', { title: savedGift.gift.title, number: savedGift.gift.number }) },\n      },\n    });\n  });\n\n  return (\n    <div className={styles.manageButtons}>\n      <Button\n        color=\"transparentBlured\"\n        iconName=\"gift-transfer-inline\"\n        iconAlignment=\"top\"\n        iconClassName={styles.icon}\n        onClick={handleTransfer}\n        ariaLabel={lang('GiftInfoTransfer')}\n        noForcedUpperCase\n        fluid\n        className={styles.manageButton}\n      >\n        <span className={styles.text}>\n          {lang('GiftInfoTransfer')}\n        </span>\n      </Button>\n      {(canWear || !canTakeOff) && (\n        <Button\n          color=\"transparentBlured\"\n          iconName={canTakeOff ? 'crown-take-off' : 'crown-wear'}\n          iconAlignment=\"top\"\n          iconClassName={styles.icon}\n          onClick={canWear || canTakeOff ? handleWear : undefined}\n          disabled={!canWear && !canTakeOff}\n          ariaLabel={lang(canTakeOff ? 'GiftInfoTakeOff' : 'GiftInfoWear')}\n          noForcedUpperCase\n          fluid\n          className={styles.manageButton}\n        >\n          <span className={styles.text}>\n            {lang(canTakeOff ? 'GiftInfoTakeOff' : 'GiftInfoWear')}\n          </span>\n        </Button>\n      )}\n      {!giftResalePrice && (\n        <Button\n          color=\"transparentBlured\"\n          iconName=\"sell\"\n          iconAlignment=\"top\"\n          iconClassName={styles.icon}\n          onClick={handleSell}\n          ariaLabel={lang('Sell')}\n          noForcedUpperCase\n          fluid\n          className={styles.manageButton}\n        >\n          <span className={styles.text}>\n            {lang('Sell')}\n          </span>\n        </Button>\n      )}\n      {Boolean(giftResalePrice) && (\n        <Button\n          color=\"transparentBlured\"\n          iconName=\"unlist\"\n          iconAlignment=\"top\"\n          iconClassName={styles.icon}\n          onClick={handleUnlist}\n          ariaLabel={lang('GiftInfoUnlist')}\n          noForcedUpperCase\n          fluid\n          className={styles.manageButton}\n        >\n          <span className={styles.text}>\n            {lang('GiftInfoUnlist')}\n          </span>\n        </Button>\n      )}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { currentUserId } = global;\n    const currentUser = currentUserId ? selectUser(global, currentUserId) : undefined;\n    const currentUserEmojiStatus = currentUser?.emojiStatus;\n    const collectibleEmojiStatuses = global.collectibleEmojiStatuses?.statuses;\n\n    return {\n      currentUserEmojiStatus,\n      collectibleEmojiStatuses,\n    };\n  },\n)(UniqueGiftManageButtons));\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"Pz3wJVwI\",\"content\":\"vBYqMeRD\",\"giftsListContainer\":\"Ly9mKtg2\",\"giftsList\":\"lla9jO09\",\"giftHeader\":\"TuVkgxwZ\",\"bidValue\":\"zdUvUfOO\",\"badge\":\"btuWuz25\",\"starIcon\":\"GRggVFef\",\"okButton\":\"kIsP2W0m\"};","import { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftAuctionAcquiredGift, ApiSticker } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectTabState } from '../../../../global/selectors';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useScrollNotch from '../../../../hooks/useScrollNotch';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport BadgeButton from '../../../common/BadgeButton';\nimport Button from '../../../ui/Button';\nimport Modal from '../../../ui/Modal';\nimport TableInfo, { type TableData } from '../../common/TableInfo';\n\nimport styles from './GiftAuctionAcquiredModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftAuctionAcquiredModal'];\n};\n\ntype StateProps = {\n  acquiredGifts?: ApiStarGiftAuctionAcquiredGift[];\n  giftTitle?: string;\n  giftSticker?: ApiSticker;\n};\n\nconst GiftAuctionAcquiredModal = ({ modal, acquiredGifts, giftTitle, giftSticker }: OwnProps & StateProps) => {\n  const { closeGiftAuctionAcquiredModal } = getActions();\n\n  const containerRef = useRef<HTMLDivElement>();\n\n  const lang = useLang();\n\n  const isOpen = Boolean(modal?.giftId);\n  const renderingGifts = useCurrentOrPrev(acquiredGifts);\n  const renderingGiftTitle = useCurrentOrPrev(giftTitle);\n  const renderingGiftSticker = useCurrentOrPrev(giftSticker);\n\n  const handleClose = useLastCallback(() => {\n    closeGiftAuctionAcquiredModal();\n  });\n\n  const giftItems = useMemo(() => {\n    if (!renderingGifts?.length) return undefined;\n\n    return renderingGifts.map((gift) => {\n      const header = lang('GiftAuctionBoughtGiftHeader', {\n        gift: renderingGiftTitle || lang('StarGift'),\n        giftNumber: gift.giftNumber ? lang.number(gift.giftNumber) : '',\n        round: lang.number(gift.round),\n      });\n\n      const tableData: TableData = [\n        [undefined, (\n          <span className={styles.giftHeader}>\n            {renderingGiftSticker && (\n              <AnimatedIconFromSticker\n                className={styles.giftSticker}\n                sticker={renderingGiftSticker}\n                size={20}\n                play={false}\n              />\n            )}\n            <span>{header}</span>\n          </span>\n        )],\n        [lang('GiftAuctionRecipient'), { chatId: gift.peerId }],\n        [lang('GiftAuctionDate'), formatDateTimeToString(gift.date * 1000, lang.code, true)],\n        [lang('GiftAuctionAcceptedBid'), (\n          <span className={styles.bidValue}>\n            {formatStarsAsIcon(lang, gift.bidAmount, { className: styles.starIcon })}\n            <BadgeButton className={styles.badge}>\n              {lang('GiftAuctionTopPosition', { position: gift.position })}\n            </BadgeButton>\n          </span>\n        )],\n      ];\n\n      return { tableData, key: `${gift.round}-${gift.giftNumber}` };\n    });\n  }, [renderingGifts, renderingGiftTitle, renderingGiftSticker, lang]);\n\n  const giftsCount = renderingGifts?.length || 0;\n\n  useScrollNotch({\n    containerRef,\n    selector: `.${styles.giftsList}`,\n    isBottomNotch: true,\n  }, [giftItems]);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      title={lang('GiftAuctionBoughtGiftsTitle', { count: giftsCount }, { pluralValue: giftsCount })}\n      className={styles.modal}\n      contentClassName={styles.content}\n      onClose={handleClose}\n      isCondensedHeader\n      isSlim\n    >\n      <div className={styles.giftsListContainer} ref={containerRef}>\n        <div className={styles.giftsList}>\n          {giftItems?.map((item) => (\n            <TableInfo key={item.key} tableData={item.tableData} />\n          ))}\n        </div>\n      </div>\n      <Button className={styles.okButton} onClick={handleClose}>\n        {lang('OK')}\n      </Button>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { giftAuctionAcquiredModal } = selectTabState(global);\n\n    return {\n      acquiredGifts: giftAuctionAcquiredModal?.acquiredGifts,\n      giftTitle: giftAuctionAcquiredModal?.giftTitle,\n      giftSticker: giftAuctionAcquiredModal?.giftSticker,\n    };\n  },\n)(GiftAuctionAcquiredModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"FbamIaWM\",\"headerControlPanel\":\"oKcR_Gxv\",\"slider\":\"lpcp8Oip\",\"title\":\"jNHNh7KT\",\"subtitle\":\"HlVun4XF\",\"infoCards\":\"K9fWcZP0\",\"infoCard\":\"QBcr61z8\",\"infoCardValue\":\"S9vK5Tny\",\"infoCardLabel\":\"UzCztm_V\",\"separator\":\"eCFcDThE\",\"winningStatus\":\"IENM5upL\",\"bidderInfoSlide\":\"VvFvniw8\",\"winningText\":\"mHlgX1Lm\",\"winningBadge\":\"yWQ_64QE\",\"section\":\"VfdOWkWu\",\"sectionTitle\":\"aJxJv1Tj\",\"sectionTitleTransition\":\"I344VxP8\",\"bidderRow\":\"_6493YZ5\",\"bidderPosition\":\"bjYqFB3Y\",\"bidderInfo\":\"MSwHwQYX\",\"bidderName\":\"StE9kpcQ\",\"topBidderRow\":\"Q0o2Mlnj\",\"topBidderPosition\":\"mQa4yF_w\",\"bidderAmount\":\"jTHhbapk\",\"buttonStar\":\"eY_4yHis\",\"giftSticker\":\"ETmmzDXX\",\"customBidInput\":\"KRqfUs0J\",\"customBidInputIcon\":\"m1O8A6wT\"};","import { memo, useEffect, useMemo, useState } from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarGiftAuctionState,\n  ApiStarsAmount,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectPeer, selectTabState } from '../../../../global/selectors';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport renderText from '../../../common/helpers/renderText';\n\nimport { useTransitionActiveKey } from '../../../../hooks/animations/useTransitionActiveKey';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedCounter from '../../../common/AnimatedCounter';\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport FullNameTitle from '../../../common/FullNameTitle';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport Button from '../../../ui/Button';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\nimport InputText from '../../../ui/InputText';\nimport Modal from '../../../ui/Modal';\nimport TextTimer from '../../../ui/TextTimer';\nimport Transition from '../../../ui/Transition';\nimport StarSlider from '../../paidReaction/StarSlider';\nimport BalanceBlock from '../../stars/BalanceBlock';\n\nimport styles from './GiftAuctionBidModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftAuctionBidModal'];\n};\n\ntype StateProps = {\n  auctionState?: ApiStarGiftAuctionState;\n  starBalance?: ApiStarsAmount;\n  currentUserPeer?: ApiPeer;\n  topBidderIds?: string[];\n};\n\nconst DEFAULT_BID_AMOUNT = 50;\nconst MAX_BID_AMOUNT_STEP = 50000;\nconst MAX_CUSTOM_BID_AMOUNT = 1000000000;\nconst BID_ROUNDING_STEP = 10000;\nconst MIN_SLIDER_PROGRESS = 0.25;\nconst GIFT_STICKER_SIZE = 24;\nconst DEFAULT_TOP_BIDDERS_COUNT = 3;\n\nconst GiftAuctionBidModal = ({\n  modal,\n  auctionState,\n  starBalance,\n  currentUserPeer,\n  topBidderIds,\n}: OwnProps & StateProps) => {\n  const { closeGiftAuctionBidModal, sendStarGiftAuctionBid, loadGiftAuction } = getActions();\n\n  const isOpen = Boolean(modal);\n\n  const renderingAuctionState = useCurrentOrPrev(auctionState);\n  const renderingTopBidderIds = useCurrentOrPrev(topBidderIds);\n\n  const renderingTopBidderPeers = useMemo(() => {\n    if (!renderingTopBidderIds) return undefined;\n    const global = getGlobal();\n    return renderingTopBidderIds\n      .map((id) => selectPeer(global, id))\n      .filter(Boolean);\n  }, [renderingTopBidderIds]);\n\n  const [topBidder1, topBidder2, topBidder3] = renderingTopBidderPeers || [];\n\n  const topBidder1Key = useTransitionActiveKey([topBidder1?.id || '0']);\n  const topBidder2Key = useTransitionActiveKey([topBidder2?.id || '0']);\n  const topBidder3Key = useTransitionActiveKey([topBidder3?.id || '0']);\n\n  const giftsPerRound = renderingAuctionState?.gift.giftsPerRound || 0;\n\n  const lang = useLang();\n\n  const activeState = renderingAuctionState?.state.type === 'active'\n    ? renderingAuctionState.state\n    : undefined;\n  const userState = renderingAuctionState?.userState;\n\n  const [selectedBidAmount, setSelectedBidAmount] = useState(DEFAULT_BID_AMOUNT);\n  const [isCustomBidModalOpen, openCustomBidModal, closeCustomBidModal] = useFlag();\n  const [customBidValue, setCustomBidValue] = useState('');\n\n  const baseMinBid = activeState?.minBidAmount || DEFAULT_BID_AMOUNT;\n\n  const currentMinBid = userState?.minBidAmount || baseMinBid;\n\n  const sliderMaxValue = Math.ceil(currentMinBid / BID_ROUNDING_STEP) * BID_ROUNDING_STEP + MAX_BID_AMOUNT_STEP;\n\n  useEffect(() => {\n    setSelectedBidAmount(currentMinBid);\n  }, [currentMinBid]);\n\n  const nextRoundAt = activeState?.nextRoundAt;\n\n  const bidDifference = userState?.bidAmount ? selectedBidAmount - userState.bidAmount : 0;\n  const isAtMaxValue = selectedBidAmount >= sliderMaxValue;\n\n  const sliderSecondaryText = useMemo(() => {\n    if (isAtMaxValue) return lang('GiftAuctionTapToBidMore');\n    if (bidDifference <= 0) return undefined;\n    return (\n      <>\n        +\n        <AnimatedCounter text={lang.number(bidDifference)} />\n      </>\n    );\n  }, [bidDifference, isAtMaxValue, lang]);\n\n  const handleAmountChange = useLastCallback((value: number) => {\n    setSelectedBidAmount(value);\n  });\n\n  const handleTimerEnd = useLastCallback(() => {\n    if (!modal?.auctionGiftId || !isOpen) return;\n    loadGiftAuction({ giftId: modal.auctionGiftId });\n  });\n\n  const handleRequestCustomValue = useLastCallback(() => {\n    openCustomBidModal();\n  });\n\n  const handleBadgeClick = useLastCallback(() => {\n    if (isAtMaxValue) {\n      handleRequestCustomValue();\n    }\n  });\n\n  const handleCustomBidChange = useLastCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value.replace(/\\D/g, '');\n    const numValue = Number(value);\n    if (numValue > MAX_CUSTOM_BID_AMOUNT) return;\n    setCustomBidValue(value);\n  });\n\n  const handleCustomBidSubmit = useLastCallback(() => {\n    if (!renderingAuctionState?.gift.id || !modal) return;\n\n    const resultValue = Number(customBidValue);\n    if (resultValue < currentMinBid) return;\n\n    setSelectedBidAmount(resultValue);\n    closeCustomBidModal();\n\n    setCustomBidValue('');\n\n    const { peerId, message, shouldHideName } = modal;\n    const isUpdateBid = Boolean(userState?.bidAmount);\n\n    sendStarGiftAuctionBid({\n      giftId: renderingAuctionState.gift.id,\n      bidAmount: resultValue,\n      peerId,\n      message: message ? { text: message } : undefined,\n      shouldHideName,\n      isUpdateBid,\n    });\n  });\n\n  const handleSubmit = useLastCallback(() => {\n    if (!renderingAuctionState?.gift.id || !modal) return;\n    const { peerId, message, shouldHideName } = modal;\n    const isUpdateBid = Boolean(userState?.bidAmount);\n\n    sendStarGiftAuctionBid({\n      giftId: renderingAuctionState.gift.id,\n      bidAmount: selectedBidAmount,\n      peerId,\n      message: message ? { text: message } : undefined,\n      shouldHideName,\n      isUpdateBid,\n    });\n  });\n\n  const userPosition = useMemo(() => {\n    if (!selectedBidAmount || !activeState?.bidLevels?.length) return undefined;\n\n    const { bidLevels } = activeState;\n    const userBidDate = userState?.bidDate || Number.MAX_SAFE_INTEGER;\n\n    for (const level of bidLevels) {\n      if (level.amount < selectedBidAmount\n        || (level.amount === selectedBidAmount && level.date >= userBidDate)) {\n        return level.pos;\n      }\n    }\n\n    return bidLevels[bidLevels.length - 1].pos + 1;\n  }, [selectedBidAmount, activeState, userState?.bidDate]);\n\n  function renderInfoCards() {\n    return (\n      <div className={styles.infoCards}>\n        <div className={styles.infoCard}>\n          <div className={styles.infoCardValue}>\n            <StarIcon type=\"gold\" size=\"adaptive\" />\n            {lang.number(currentMinBid)}\n          </div>\n          <div className={styles.infoCardLabel}>{lang('GiftAuctionMinimumBid')}</div>\n        </div>\n        <div className={styles.infoCard}>\n          <div className={styles.infoCardValue}>\n            <TextTimer endsAt={nextRoundAt || 0} shouldShowZeroOnEnd onEnd={handleTimerEnd} />\n          </div>\n          <div className={styles.infoCardLabel}>{lang('GiftAuctionUntilNextRound')}</div>\n        </div>\n        <div className={styles.infoCard}>\n          <div className={styles.infoCardValue}>\n            <AnimatedIconFromSticker\n              noLoop={false}\n              className={styles.giftSticker}\n              sticker={renderingAuctionState?.gift.sticker}\n              size={GIFT_STICKER_SIZE}\n            />\n            {lang.number(activeState?.giftsLeft || 0)}\n          </div>\n          <div className={styles.infoCardLabel}>{lang('GiftAuctionLeft')}</div>\n        </div>\n      </div>\n    );\n  }\n\n  const isWinning = Boolean(userState?.bidAmount && userPosition && userPosition <= giftsPerRound);\n\n  function renderCurrentBidSectionTitle() {\n    const giftTitle = renderingAuctionState?.gift.title || lang('StarGift');\n    const nextGiftNum = userPosition && userPosition <= 100\n      ? (activeState?.lastGiftNum || 0) + userPosition\n      : undefined;\n\n    return (\n      <Transition\n        name=\"fade\"\n        activeKey={isWinning ? 0 : 1}\n        className={styles.sectionTitleTransition}\n        slideClassName={styles.bidderInfoSlide}\n      >\n        {isWinning ? (\n          <div className={styles.winningStatus}>\n            <span className={styles.winningText}>{lang('GiftAuctionYoureWinning')}</span>\n            <span className={styles.winningBadge}>\n              {lang('GiftUnique', { title: giftTitle, number: nextGiftNum ? lang.number(nextGiftNum) : undefined })}\n            </span>\n          </div>\n        ) : (\n          <div className={styles.sectionTitle}>{lang('GiftAuctionYourBidWillBe')}</div>\n        )}\n      </Transition>\n    );\n  }\n\n  function renderUserBid() {\n    return (\n      <div className={styles.section}>\n        {renderCurrentBidSectionTitle()}\n        <div className={styles.bidderRow}>\n          <div className={styles.bidderPosition}>\n            {userPosition && userPosition > 100 ? `${userPosition}+` : (userPosition || 1)}\n          </div>\n          <div className={styles.bidderInfo}>\n            {currentUserPeer && <Avatar peer={currentUserPeer} size=\"small\" />}\n            {currentUserPeer && <FullNameTitle peer={currentUserPeer} className={styles.bidderName} />}\n          </div>\n          <div className={styles.bidderAmount}>\n            <StarIcon type=\"gold\" size=\"adaptive\" />\n            {lang.number(selectedBidAmount)}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  function renderTopBidderRow(\n    index: number,\n    emoji: string,\n    peer: ApiPeer | undefined,\n    amount: number | undefined,\n    activeKey: number,\n  ) {\n    return (\n      <div className={styles.topBidderRow} key={index}>\n        <div className={styles.topBidderPosition}>\n          {renderText(emoji, ['emoji'])}\n        </div>\n        <Transition\n          name=\"fade\"\n          activeKey={activeKey}\n          className={styles.bidderInfo}\n          slideClassName={styles.bidderInfoSlide}\n        >\n          {peer && (\n            <>\n              <Avatar peer={peer} size=\"small\" />\n              <FullNameTitle peer={peer} className={styles.bidderName} />\n            </>\n          )}\n        </Transition>\n        {amount !== undefined && (\n          <div className={styles.bidderAmount}>\n            <StarIcon type=\"gold\" size=\"adaptive\" />\n            {lang.number(amount)}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  function renderTopWinners() {\n    const topCount = DEFAULT_TOP_BIDDERS_COUNT;\n    const bidLevels = activeState?.bidLevels;\n\n    return (\n      <div className={styles.section}>\n        <div className={styles.sectionTitle}>\n          {lang('GiftAuctionTopWinners', { count: topCount }, { pluralValue: topCount })}\n        </div>\n        {renderTopBidderRow(0, '', topBidder1, bidLevels?.[0]?.amount, topBidder1Key)}\n        {renderTopBidderRow(1, '', topBidder2, bidLevels?.[1]?.amount, topBidder2Key)}\n        {renderTopBidderRow(2, '', topBidder3, bidLevels?.[2]?.amount, topBidder3Key)}\n      </div>\n    );\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasAbsoluteCloseButton\n      isSlim\n      contentClassName={styles.content}\n      onClose={closeGiftAuctionBidModal}\n      isLowStackPriority\n    >\n      <div className={styles.headerControlPanel}>\n        <BalanceBlock balance={starBalance} className={styles.modalBalance} withAddButton />\n      </div>\n\n      <StarSlider\n        className={styles.slider}\n        defaultValue={currentMinBid}\n        minValue={baseMinBid}\n        minAllowedValue={currentMinBid}\n        minAllowedProgress={MIN_SLIDER_PROGRESS}\n        maxValue={sliderMaxValue}\n        floatingBadgeDescription={sliderSecondaryText}\n        onChange={handleAmountChange}\n        onBadgeClick={handleBadgeClick}\n        onCustomValueClick={handleRequestCustomValue}\n        shouldUseDynamicColor\n        shouldAllowCustomValue\n      />\n\n      <h3 className={styles.title}>{lang('GiftAuctionPlaceBid')}</h3>\n      {renderInfoCards()}\n\n      {renderUserBid()}\n      {renderTopWinners()}\n\n      <Button noForcedUpperCase onClick={handleSubmit}>\n        {lang(userState?.bidAmount ? 'GiftAuctionAddToBid' : 'GiftAuctionPlaceBidButton', {\n          amount: formatStarsAsIcon(lang,\n            userState?.bidAmount ? selectedBidAmount - userState.bidAmount : selectedBidAmount,\n            { asFont: true, className: styles.buttonStar }),\n        }, { withNodes: true })}\n      </Button>\n      <ConfirmDialog\n        isOpen={isCustomBidModalOpen}\n        title={lang('GiftAuctionCustomBidTitle')}\n        confirmLabel={lang('GiftAuctionCustomBidButton')}\n        isConfirmDisabled={!customBidValue || Number(customBidValue) < currentMinBid}\n        confirmHandler={handleCustomBidSubmit}\n        onClose={closeCustomBidModal}\n      >\n        <p>{lang('GiftAuctionCustomBidDescription', { count: renderingAuctionState?.gift.giftsPerRound })}</p>\n        <div className={styles.customBidInput}>\n          <StarIcon type=\"gold\" size=\"adaptive\" className={styles.customBidInputIcon} />\n          <InputText\n            value={customBidValue}\n            onChange={handleCustomBidChange}\n            placeholder={lang('GiftAuctionCustomBidPlaceholder')}\n            inputMode=\"numeric\"\n            teactExperimentControlled\n          />\n        </div>\n      </ConfirmDialog>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { stars, currentUserId } = global;\n    const { giftAuctionBidModal } = selectTabState(global);\n    const auctionGiftId = giftAuctionBidModal?.auctionGiftId;\n    const giftAuction = auctionGiftId\n      ? global.giftAuctionByGiftId?.[auctionGiftId] : undefined;\n\n    const currentUserPeer = currentUserId ? selectPeer(global, currentUserId) : undefined;\n\n    const topBidderIds = giftAuction?.state.type === 'active'\n      ? giftAuction.state.topBidders\n      : undefined;\n\n    return {\n      auctionState: giftAuction,\n      starBalance: stars?.balance,\n      currentUserPeer,\n      topBidderIds,\n    };\n  },\n)(GiftAuctionBidModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"preview\":\"GiX7PhEa\",\"arrow\":\"rkG87LNM\"};","import { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiPeer } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { REM } from '../../../common/helpers/mediaDimensions';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\n\nimport styles from './GiftAuctionChangeRecipientModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftAuctionChangeRecipientModal'];\n};\n\ntype StateProps = {\n  oldPeer?: ApiPeer;\n  newPeer?: ApiPeer;\n};\n\nconst AVATAR_SIZE = 4 * REM;\n\nconst GiftAuctionChangeRecipientModal = ({ modal, oldPeer, newPeer }: OwnProps & StateProps) => {\n  const { closeGiftAuctionChangeRecipientModal, openGiftAuctionBidModal } = getActions();\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingOldPeer = useCurrentOrPrev(oldPeer);\n  const renderingNewPeer = useCurrentOrPrev(newPeer);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const handleConfirm = useLastCallback(() => {\n    if (!renderingModal?.auctionGiftId) return;\n\n    closeGiftAuctionChangeRecipientModal();\n    openGiftAuctionBidModal({\n      auctionGiftId: renderingModal.auctionGiftId,\n      peerId: renderingModal.newPeerId,\n      message: renderingModal.message,\n      shouldHideName: renderingModal.shouldHideName,\n    });\n  });\n\n  if (!renderingOldPeer || !renderingNewPeer) return undefined;\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      title={lang('GiftAuctionChangeRecipientTitle')}\n      onClose={closeGiftAuctionChangeRecipientModal}\n      confirmLabel={lang('Continue')}\n      confirmHandler={handleConfirm}\n    >\n      <div className={styles.preview}>\n        <Avatar peer={renderingOldPeer} size={AVATAR_SIZE} />\n        <Icon name=\"next\" className={styles.arrow} />\n        <Avatar peer={renderingNewPeer} size={AVATAR_SIZE} />\n      </div>\n      <p>\n        {lang('GiftAuctionChangeRecipientDescription', {\n          oldPeer: getPeerTitle(lang, renderingOldPeer),\n          newPeer: getPeerTitle(lang, renderingNewPeer),\n        }, {\n          withNodes: true,\n          withMarkdown: true,\n        })}\n      </p>\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(\n  withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n    const oldPeer = modal?.oldPeerId ? selectPeer(global, modal.oldPeerId) : undefined;\n    const newPeer = modal?.newPeerId ? selectPeer(global, modal.newPeerId) : undefined;\n\n    return {\n      oldPeer,\n      newPeer,\n    };\n  })(GiftAuctionChangeRecipientModal),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"BYvGxmfu\",\"iconWrapper\":\"X5HEn2ho\",\"icon\":\"aiSlk9Zw\",\"title\":\"obG607lY\",\"subtitle\":\"wKo4cuID\",\"footer\":\"M_SnCV2j\",\"understoodIcon\":\"OQCwJP3j\"};","import { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftAuctionState } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectTabState } from '../../../../global/selectors';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Icon from '../../../common/icons/Icon';\nimport Button from '../../../ui/Button';\nimport TableAboutModal, { type TableAboutData } from '../../common/TableAboutModal';\n\nimport styles from './GiftAuctionInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftAuctionInfoModal'];\n};\n\ntype StateProps = {\n  giftAuction?: ApiStarGiftAuctionState;\n};\n\nconst GiftAuctionInfoModal = ({\n  modal,\n  giftAuction,\n}: OwnProps & StateProps) => {\n  const { closeGiftAuctionInfoModal } = getActions();\n  const lang = useLang();\n\n  const isOpen = Boolean(modal && giftAuction);\n\n  const handleClose = useLastCallback(() => {\n    closeGiftAuctionInfoModal();\n  });\n\n  const header = useMemo(() => {\n    return (\n      <div className={styles.header}>\n        <div className={styles.iconWrapper}>\n          <Icon name=\"auction-filled\" className={styles.icon} />\n        </div>\n        <div className={styles.title}>\n          {lang('GiftAuctionInfoTitle')}\n        </div>\n        <div className={styles.subtitle}>\n          {lang('GiftAuctionInfoSubtitle')}\n        </div>\n      </div>\n    );\n  }, [lang]);\n\n  const footer = useMemo(() => {\n    if (!isOpen) return undefined;\n    return (\n      <div className={styles.footer}>\n        <Button\n          iconName=\"understood\"\n          iconClassName={styles.understoodIcon}\n          onClick={handleClose}\n        >\n          {lang('ButtonUnderstood')}\n        </Button>\n      </div>\n    );\n  }, [lang, isOpen, handleClose]);\n\n  const listItemData = useMemo(() => {\n    const count = giftAuction?.gift.giftsPerRound || 0;\n    return [\n      ['auction-drop', lang('GiftAuctionInfoTopBiddersTitle', { count }, { pluralValue: count }),\n        lang('GiftAuctionInfoTopBiddersSubtitle', { count }, { pluralValue: count })],\n      ['auction-next-round', lang('GiftAuctionInfoBidCarryoverTitle'),\n        lang('GiftAuctionInfoBidCarryoverSubtitle', { count })],\n      ['stars-refund', lang('GiftAuctionInfoMissedBiddersTitle'),\n        lang('GiftAuctionInfoMissedBiddersSubtitle')],\n    ] satisfies TableAboutData;\n  }, [lang, giftAuction]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      header={header}\n      listItemData={listItemData}\n      footer={footer}\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { giftAuctionInfoModal } = selectTabState(global);\n    const auctionGiftId = giftAuctionInfoModal?.auctionGiftId;\n    return {\n      giftAuction: auctionGiftId\n        ? global.giftAuctionByGiftId?.[auctionGiftId] : undefined,\n    };\n  },\n)(GiftAuctionInfoModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"rCVinZx6\",\"modalContent\":\"MAEILhFp\",\"header\":\"lTDjKYuV\",\"title\":\"_tvAimMQ\",\"description\":\"X88e7g62\",\"finishedBadge\":\"pC_V4Juh\",\"giftName\":\"AwBqE6Vc\",\"footer\":\"kVyu9ZRp\",\"itemsBoughtLink\":\"GwhTY_Uw\",\"itemsBoughtSticker\":\"H4JSQGvw\",\"footerButton\":\"QgTA5Tm_\",\"buttonSubtitle\":\"XV66UlTa\",\"starIcon\":\"Ui25Ac3P\",\"learnMoreLink\":\"xv_0WTej\"};","import {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftAuctionState } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { TME_LINK_PREFIX } from '../../../../config';\nimport { selectTabState } from '../../../../global/selectors';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatCountdown, formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { HOUR } from '../../../../util/dates/units';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { getServerTime } from '../../../../util/serverTime';\nimport {\n  getRandomGiftPreviewAttributes, getStickerFromGift, type GiftPreviewAttributes,\n  preloadGiftAttributeStickers } from '../../../common/helpers/gifts';\n\nimport useInterval from '../../../../hooks/schedulers/useInterval';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Button from '../../../ui/Button';\nimport Link from '../../../ui/Link';\nimport MenuItem from '../../../ui/MenuItem';\nimport TextTimer from '../../../ui/TextTimer';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\nimport GiftItemStar from '../GiftItemStar';\nimport UniqueGiftHeader from '../UniqueGiftHeader';\n\nimport styles from './GiftAuctionModal.module.scss';\n\nconst TEXT_TIMER_THRESHOLD = 48 * HOUR;\nconst PREVIEW_UPDATE_INTERVAL = 3000;\n\nexport type OwnProps = {\n  modal: TabState['giftAuctionModal'];\n};\n\ntype StateProps = {\n  auctionState?: ApiStarGiftAuctionState;\n};\n\nconst GiftAuctionModal = ({ modal, auctionState }: OwnProps & StateProps) => {\n  const {\n    closeGiftAuctionModal,\n    setGiftModalSelectedGift,\n    openGiftAuctionInfoModal,\n    openGiftAuctionAcquiredModal,\n    openAboutStarGiftModal,\n    showNotification,\n    openChatWithDraft,\n    openUrl,\n    openGiftInMarket,\n  } = getActions();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingAuctionState = useCurrentOrPrev(auctionState);\n\n  const gift = renderingAuctionState?.gift;\n  const state = renderingAuctionState?.state;\n  const userState = renderingAuctionState?.userState;\n  const isFinished = state?.type === 'finished';\n\n  const [previewAttributes, setPreviewAttributes] = useState<GiftPreviewAttributes | undefined>();\n  const shouldUseUniqueHeader = Boolean(gift && state && previewAttributes);\n\n  const uniqueHeaderRef = useRef<HTMLDivElement>();\n  const lang = useLang();\n\n  const updatePreviewAttributes = useLastCallback(() => {\n    if (!renderingModal?.sampleAttributes) return;\n    setPreviewAttributes(getRandomGiftPreviewAttributes(renderingModal.sampleAttributes, previewAttributes));\n  });\n\n  useInterval(updatePreviewAttributes, isOpen ? PREVIEW_UPDATE_INTERVAL : undefined, true);\n\n  useEffect(() => {\n    if (isOpen) {\n      if (renderingModal?.sampleAttributes) {\n        updatePreviewAttributes();\n      } else {\n        setPreviewAttributes(undefined);\n      }\n    }\n  }, [isOpen, renderingModal?.sampleAttributes]);\n\n  useEffect(() => {\n    const attributes = renderingModal?.sampleAttributes;\n    if (!attributes) return;\n    preloadGiftAttributeStickers(attributes);\n  }, [renderingModal?.sampleAttributes]);\n\n  const handleClose = useLastCallback(() => closeGiftAuctionModal());\n\n  const handleLearnMoreClick = useLastCallback(() => {\n    if (!gift) return;\n    openGiftAuctionInfoModal({ auctionGiftId: gift.id });\n  });\n\n  const handleLearnMoreAboutGiftsClick = useLastCallback(() => {\n    openAboutStarGiftModal({});\n  });\n\n  const handleItemsBoughtClick = useLastCallback(() => {\n    if (!gift) return;\n    const giftSticker = getStickerFromGift(gift);\n    openGiftAuctionAcquiredModal({ giftId: gift.id, giftTitle: gift.title, giftSticker });\n  });\n\n  const handleJoinClick = useLastCallback(() => {\n    if (!gift) return;\n    closeGiftAuctionModal({ shouldKeepAuction: true });\n    setGiftModalSelectedGift({ gift });\n  });\n\n  const auctionLink = useMemo(() => {\n    if (!gift?.auctionSlug) return undefined;\n    return `${TME_LINK_PREFIX}auction/${gift.auctionSlug}`;\n  }, [gift]);\n\n  const handleCopyLink = useLastCallback(() => {\n    if (!auctionLink) return;\n    copyTextToClipboard(auctionLink);\n    showNotification({\n      message: lang('LinkCopied'),\n    });\n  });\n\n  const handleShareLink = useLastCallback(() => {\n    if (!auctionLink) return;\n    openChatWithDraft({ text: { text: auctionLink } });\n  });\n\n  const handleOpenFragment = useLastCallback(() => {\n    if (state?.type === 'finished' && state.fragmentListedUrl) {\n      openUrl({ url: state.fragmentListedUrl });\n    }\n  });\n\n  const handleOpenTelegramMarket = useLastCallback(() => {\n    if (!gift) return;\n    handleClose();\n    openGiftInMarket({ gift });\n  });\n\n  const uniqueHeader = useMemo(() => {\n    if (!shouldUseUniqueHeader) {\n      return undefined;\n    }\n\n    const giftTitle = gift!.title || lang('StarGift');\n    const badge = isFinished ? lang('GiftAuctionEnded') : lang('GiftAuctionInfoTitle');\n    const subtitle = (\n      <Link className={styles.learnMoreLink} isPrimary onClick={handleLearnMoreAboutGiftsClick}>\n        {lang('GiftAuctionLearnMoreAboutGifts')}\n      </Link>\n    );\n\n    return (\n      <div ref={uniqueHeaderRef}>\n        <UniqueGiftHeader\n          modelAttribute={previewAttributes!.model}\n          backdropAttribute={previewAttributes!.backdrop}\n          patternAttribute={previewAttributes!.pattern}\n          title={giftTitle}\n          badge={badge}\n          subtitle={subtitle}\n        />\n      </div>\n    );\n  }, [shouldUseUniqueHeader, gift, isFinished, lang, previewAttributes, handleLearnMoreAboutGiftsClick]);\n\n  const regularHeader = useMemo(() => {\n    if (!gift || !state || shouldUseUniqueHeader) {\n      return undefined;\n    }\n\n    const giftTitle = gift.title || lang('StarGift');\n    const giftsPerRound = gift.giftsPerRound || 0;\n\n    return (\n      <div className={styles.header}>\n        <GiftItemStar gift={gift} hideBadge noClickable />\n        <h1 className={styles.title}>\n          {giftTitle}\n        </h1>\n        {isFinished ? (\n          <span className={styles.finishedBadge}>{lang('GiftAuctionEnded')}</span>\n        ) : (\n          <p className={styles.description}>\n            {lang('GiftAuctionTopBidders', {\n              count: giftsPerRound,\n              gift: <span className={styles.giftName}>{giftTitle}</span>,\n              link: <Link isPrimary onClick={handleLearnMoreClick}>{lang('GiftAuctionLearnMore')}</Link>,\n            }, { pluralValue: giftsPerRound, withNodes: true, withMarkdown: true })}\n          </p>\n        )}\n      </div>\n    );\n  }, [gift, state, shouldUseUniqueHeader, isFinished, lang, handleLearnMoreClick]);\n\n  const header = uniqueHeader || regularHeader;\n\n  const modalData = useMemo(() => {\n    if (!gift || !state || !userState) {\n      return undefined;\n    }\n\n    const tableData: TableData = [];\n\n    tableData.push([\n      lang('GiftAuctionStarted'),\n      formatDateTimeToString(state.startDate * 1000, lang.code, true),\n    ]);\n\n    tableData.push([\n      lang('GiftAuctionEnds'),\n      formatDateTimeToString(state.endDate * 1000, lang.code, true),\n    ]);\n\n    if (gift.availabilityTotal) {\n      tableData.push([\n        lang('GiftInfoAvailability'),\n        lang('GiftInfoAvailabilityValue', {\n          count: gift.availabilityRemains || 0,\n          total: lang.number(gift.availabilityTotal),\n        }, { pluralValue: gift.availabilityRemains || 0 }),\n      ]);\n    }\n\n    if (state.type === 'active') {\n      tableData.push([\n        lang('GiftAuctionCurrentRound'),\n        lang('GiftAuctionRoundValue', {\n          current: lang.number(state.currentRound),\n          total: lang.number(state.totalRounds),\n        }),\n      ]);\n    }\n\n    if (isFinished) {\n      tableData.push([\n        lang('GiftAuctionAveragePrice'),\n        formatStarsAsIcon(lang, state.averagePrice, { className: styles.starIcon }),\n      ]);\n    }\n\n    const acquiredCount = userState.acquiredCount;\n    const giftSticker = getStickerFromGift(gift);\n    const auctionTimeLeft = state.endDate - getServerTime();\n    const shouldUseTextTimer = auctionTimeLeft > 0 && auctionTimeLeft < TEXT_TIMER_THRESHOLD;\n\n    const canBuyOnFragment = state.type === 'finished'\n      && Boolean(state.fragmentListedUrl && state.fragmentListedCount);\n    const canBuyOnTelegram = state.type === 'finished' && Boolean(state.listedCount);\n\n    const footer = (\n      <div className={styles.footer}>\n        {acquiredCount > 0 && (\n          <Link className={styles.itemsBoughtLink} isPrimary onClick={handleItemsBoughtClick}>\n            {lang('GiftAuctionItemsBought', {\n              count: acquiredCount,\n              gift: giftSticker && (\n                <AnimatedIconFromSticker\n                  className={styles.itemsBoughtSticker}\n                  sticker={giftSticker}\n                  size={20}\n                  play={false}\n                />\n              ),\n            }, { pluralValue: acquiredCount, withNodes: true })}\n          </Link>\n        )}\n        {canBuyOnFragment && (\n          <Link className={styles.itemsBoughtLink} isPrimary onClick={handleOpenFragment}>\n            {lang('GiftAuctionForSaleOnFragment', {\n              count: giftSticker ? (\n                <>\n                  {lang.number(state.fragmentListedCount!)}\n                  <AnimatedIconFromSticker\n                    className={styles.itemsBoughtSticker}\n                    sticker={giftSticker}\n                    size={20}\n                    play={false}\n                  />\n                </>\n              ) : lang.number(state.fragmentListedCount!),\n            }, { withNodes: true })}\n          </Link>\n        )}\n        {canBuyOnTelegram && (\n          <Link className={styles.itemsBoughtLink} isPrimary onClick={handleOpenTelegramMarket}>\n            {lang('GiftAuctionForSaleOnTelegram', {\n              count: giftSticker ? (\n                <>\n                  {lang.number(state.listedCount!)}\n                  <AnimatedIconFromSticker\n                    className={styles.itemsBoughtSticker}\n                    sticker={giftSticker}\n                    size={20}\n                    play={false}\n                  />\n                </>\n              ) : lang.number(state.listedCount!),\n            }, { withNodes: true })}\n          </Link>\n        )}\n        <Button\n          noForcedUpperCase\n          className={styles.footerButton}\n          onClick={isFinished ? handleClose : handleJoinClick}\n        >\n          {isFinished ? lang('OK') : (\n            <div>\n              <div>\n                {lang('GiftAuctionJoin')}\n              </div>\n              {auctionTimeLeft > 0 && (\n                <div className={styles.buttonSubtitle}>\n                  {lang('GiftAuctionTimeLeft', {\n                    time: shouldUseTextTimer\n                      ? <TextTimer endsAt={state.endDate} />\n                      : formatCountdown(lang, auctionTimeLeft),\n                  }, { withNodes: true })}\n                </div>\n              )}\n            </div>\n          )}\n        </Button>\n      </div>\n    );\n\n    return {\n      tableData,\n      footer,\n    };\n  }, [gift, state, userState, isFinished, lang, handleJoinClick, handleItemsBoughtClick, handleClose,\n    handleOpenFragment, handleOpenTelegramMarket]);\n\n  const moreMenuItems = useMemo(() => {\n    if (!shouldUseUniqueHeader) return undefined;\n\n    return (\n      <>\n        <MenuItem icon=\"info\" onClick={handleLearnMoreClick}>\n          {lang('GiftAuctionLearnMoreMenuItem')}\n        </MenuItem>\n        <MenuItem icon=\"link-badge\" onClick={handleCopyLink}>\n          {lang('CopyLink')}\n        </MenuItem>\n        <MenuItem icon=\"forward\" onClick={handleShareLink}>\n          {lang('Share')}\n        </MenuItem>\n      </>\n    );\n  }, [shouldUseUniqueHeader, lang, handleLearnMoreClick, handleCopyLink, handleShareLink]);\n\n  return (\n    <TableInfoModal\n      isOpen={isOpen}\n      header={header}\n      footer={modalData?.footer}\n      tableData={modalData?.tableData}\n      className={styles.modal}\n      contentClassName={styles.modalContent}\n      closeButtonColor={shouldUseUniqueHeader ? 'translucent-white' : undefined}\n      moreMenuItems={moreMenuItems}\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { giftAuctionModal } = selectTabState(global);\n    const auctionGiftId = giftAuctionModal?.auctionGiftId;\n    return {\n      auctionState: auctionGiftId\n        ? global.giftAuctionByGiftId?.[auctionGiftId] : undefined,\n    };\n  },\n)(GiftAuctionModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"nnublcCk\",\"checkBox\":\"fjE0wGvw\",\"checkBoxDescription\":\"tepUTe4z\",\"upgradeIcon\":\"lgyInH5K\",\"descriptionConfirm\":\"BJh2Tufh\",\"titleConfirm\":\"gA102W1G\",\"header\":\"p7FTs7_p\",\"title\":\"pIbzzTir\",\"description\":\"CCPfr26t\",\"warningDescription\":\"eEsRJVa1\",\"modalContent\":\"o9rFZ6By\",\"moreMenuButton\":\"EMwExRMy\",\"closeButton\":\"jQv0ZSEW\",\"giftResalePriceContainer\":\"BN8gf5y6\",\"starAmountIcon\":\"_5guecUe\",\"giftResalePriceStar\":\"H_q8o2vY\",\"headerButton\":\"WA0INleU\",\"left\":\"aOhTHZlf\",\"right\":\"rJOB1u5Q\",\"footer\":\"bho0GTYt\",\"footerDescription\":\"VUylTszM\",\"footerHint\":\"mxS8kDnA\",\"buyButton\":\"i1MmnrPG\",\"unknown\":\"zDauXmpS\",\"giftValue\":\"w_E4LkUj\",\"uniqueValue\":\"uAjIRJva\",\"uniqueAttribute\":\"OJQnkf17\",\"attributeName\":\"dq7wCHJb\",\"uniqueGift\":\"I6o_pGAm\",\"modalHeader\":\"ie9tImaj\",\"modalCloseButton\":\"p38RBGdC\",\"ownerAddress\":\"DavMRg4Q\",\"copyIcon\":\"SLX5tX8C\",\"messageContainer\":\"oW5T3mkV\",\"removeMessageButton\":\"TrW2LVm5\"};","import { memo, useMemo, useRef, useState } from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type {\n  ApiEmojiStatusType,\n  ApiPeer,\n  ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../../config';\nimport { getHasAdminRight } from '../../../../global/helpers';\nimport { getPeerTitle, isApiPeerChat, isApiPeerUser } from '../../../../global/helpers/peers';\nimport { getMainUsername } from '../../../../global/helpers/users';\nimport { selectPeer, selectUser } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport {\n  formatStarsAsIcon, formatStarsAsText, formatTonAsIcon, formatTonAsText,\n} from '../../../../util/localization/format';\nimport { CUSTOM_PEER_HIDDEN } from '../../../../util/objects/customPeer';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { formatPercent } from '../../../../util/textFormat';\nimport { renderGiftOriginalInfo } from '../../../common/helpers/giftOriginalInfo';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport { renderTextWithEntities } from '../../../common/helpers/renderTextWithEntities';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport BadgeButton from '../../../common/BadgeButton';\nimport GiftMenuItems from '../../../common/gift/GiftMenuItems';\nimport GiftTransferPreview from '../../../common/gift/GiftTransferPreview';\nimport Icon from '../../../common/icons/Icon';\nimport SafeLink from '../../../common/SafeLink';\nimport Button from '../../../ui/Button';\nimport Checkbox from '../../../ui/Checkbox';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\nimport Link from '../../../ui/Link';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\nimport UniqueGiftHeader from '../UniqueGiftHeader';\n\nimport styles from './GiftInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftInfoModal'];\n};\n\ntype StateProps = {\n  fromPeer?: ApiPeer;\n  targetPeer?: ApiPeer;\n  releasedByPeer?: ApiPeer;\n  currentUserId?: string;\n  starGiftMaxConvertPeriod?: number;\n  hasAdminRights?: boolean;\n  currentUserEmojiStatus?: ApiEmojiStatusType;\n  collectibleEmojiStatuses?: ApiEmojiStatusType[];\n  tonExplorerUrl?: string;\n  currentUser?: ApiUser;\n  recipientPeer?: ApiPeer;\n};\n\nconst STICKER_SIZE = 120;\n\nconst GiftInfoModal = ({\n  modal,\n  fromPeer,\n  targetPeer,\n  releasedByPeer,\n  currentUserId,\n  starGiftMaxConvertPeriod,\n  hasAdminRights,\n  currentUserEmojiStatus,\n  collectibleEmojiStatuses,\n  tonExplorerUrl,\n  currentUser,\n  recipientPeer,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftInfoModal,\n    changeGiftVisibility,\n    convertGiftToStars,\n    openChatWithInfo,\n    focusMessage,\n    openGiftUpgradeModal,\n    showNotification,\n    buyStarGift,\n    closeGiftModal,\n    openGiftInfoValueModal,\n    updateResaleGiftsFilter,\n    openGiftInMarket,\n    openGiftDescriptionRemoveModal,\n  } = getActions();\n\n  const [isConvertConfirmOpen, openConvertConfirm, closeConvertConfirm] = useFlag();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n  const [isConfirmModalOpen, setIsConfirmModalOpen] = useState<boolean>(false);\n  const [shouldPayInTon, setShouldPayInTon] = useState<boolean>(false);\n\n  const uniqueGiftHeaderRef = useRef<HTMLDivElement>();\n\n  const handleSymbolClick = useLastCallback(() => {\n    if (!gift || !giftAttributes?.pattern) return;\n\n    openGiftInMarket({ gift });\n    updateResaleGiftsFilter({\n      filter: {\n        sortType: 'byDate',\n        modelAttributes: [],\n        backdropAttributes: [],\n        patternAttributes: [{\n          type: 'pattern',\n          documentId: giftAttributes.pattern.sticker.id,\n        }],\n      },\n    });\n  });\n\n  const handleBackdropClick = useLastCallback(() => {\n    if (!gift || !giftAttributes?.backdrop) return;\n\n    openGiftInMarket({ gift });\n    updateResaleGiftsFilter({\n      filter: {\n        sortType: 'byDate',\n        modelAttributes: [],\n        backdropAttributes: [{\n          type: 'backdrop',\n          backdropId: giftAttributes.backdrop.backdropId,\n        }],\n        patternAttributes: [],\n      },\n    });\n  });\n\n  const handleModelClick = useLastCallback(() => {\n    if (!gift || !giftAttributes?.model) return;\n\n    openGiftInMarket({ gift });\n    updateResaleGiftsFilter({\n      filter: {\n        sortType: 'byDate',\n        modelAttributes: [{\n          type: 'model',\n          documentId: giftAttributes.model.sticker.id,\n        }],\n        backdropAttributes: [],\n        patternAttributes: [],\n      },\n    });\n  });\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingFromPeer = useCurrentOrPrev(fromPeer);\n  const renderingTargetPeer = useCurrentOrPrev(targetPeer);\n\n  const isTargetChat = renderingTargetPeer && isApiPeerChat(renderingTargetPeer);\n\n  const { gift: typeGift } = renderingModal || {};\n  const isSavedGift = typeGift && 'gift' in typeGift;\n  const savedGift = isSavedGift ? typeGift : undefined;\n  const isSender = savedGift?.fromId === currentUserId;\n  const canConvertDifference = (savedGift && starGiftMaxConvertPeriod && (\n    savedGift.date + starGiftMaxConvertPeriod - getServerTime()\n  )) || 0;\n  const conversionLeft = Math.ceil(canConvertDifference / 60 / 60 / 24);\n\n  const gift = isSavedGift ? typeGift.gift : typeGift;\n  const giftSticker = gift && getStickerFromGift(gift);\n  const hasConvertOption = canConvertDifference > 0 && Boolean(savedGift?.starsToConvert);\n\n  const isGiftUnique = gift && gift.type === 'starGiftUnique';\n  const uniqueGift = isGiftUnique ? gift : undefined;\n\n  const giftSubtitle = useMemo(() => {\n    if (!gift || gift.type !== 'starGiftUnique') return undefined;\n\n    if (releasedByPeer) {\n      const releasedByUsername = `@${getMainUsername(releasedByPeer)}`;\n      const ownerTitle = releasedByUsername || getPeerTitle(lang, releasedByPeer);\n      const fallbackText = isApiPeerUser(releasedByPeer)\n        ? lang('ActionFallbackUser')\n        : lang('ActionFallbackChannel');\n\n      return lang('GiftInfoCollectibleBy', {\n        number: gift.number, owner: ownerTitle || fallbackText }, {\n        withNodes: true,\n        withMarkdown: true,\n      });\n    }\n\n    return lang('GiftInfoCollectible', { number: gift.number });\n  }, [gift, releasedByPeer, lang]);\n\n  const starGiftUniqueSlug = gift?.type === 'starGiftUnique' ? gift.slug : undefined;\n\n  const selfCollectibleStatus = useMemo(() => {\n    if (!starGiftUniqueSlug) return undefined;\n    return collectibleEmojiStatuses?.find((status) =>\n      status.type === 'collectible' && status.slug === starGiftUniqueSlug);\n  }, [starGiftUniqueSlug, collectibleEmojiStatuses]);\n\n  const isSelfUnique = Boolean(selfCollectibleStatus);\n  const canFocusUpgrade = Boolean(savedGift?.upgradeMsgId);\n\n  const canManage = !canFocusUpgrade && savedGift?.inputGift && (\n    isTargetChat ? hasAdminRights\n      : gift?.type === 'starGift'\n        ? renderingTargetPeer?.id === currentUserId\n        : gift?.ownerId === currentUserId || isSelfUnique\n  );\n\n  function getResalePrice(isInTon?: boolean) {\n    if (!isGiftUnique) return undefined;\n    const amounts = gift.resellPrice;\n    if (!amounts) return undefined;\n\n    if (gift?.resaleTonOnly || isInTon) {\n      return amounts.find((amount) => amount.currency === TON_CURRENCY_CODE);\n    }\n\n    return amounts.find((amount) => amount.currency === STARS_CURRENCY_CODE);\n  }\n\n  const resellPrice = getResalePrice();\n  const confirmPrice = getResalePrice(shouldPayInTon);\n  const resellPriceInStars = resellPrice?.currency === TON_CURRENCY_CODE && isGiftUnique\n    ? gift.resellPrice?.find((amount) => amount.currency === STARS_CURRENCY_CODE)\n    : undefined;\n  const canBuyGift = !isSelfUnique && gift?.type === 'starGiftUnique'\n    && gift.ownerId !== currentUserId && Boolean(resellPrice);\n\n  const giftOwnerTitle = (() => {\n    if (!isGiftUnique) return undefined;\n    const { ownerName, ownerId } = gift;\n    const global = getGlobal(); // Peer titles do not need to be reactive\n    const owner = ownerId ? selectPeer(global, ownerId) : undefined;\n    return owner ? getPeerTitle(lang, owner) : ownerName;\n  })();\n\n  const handleClose = useLastCallback(() => {\n    closeGiftInfoModal();\n  });\n\n  const handleFocusUpgraded = useLastCallback(() => {\n    const giftChat = isSender ? renderingTargetPeer : renderingFromPeer;\n    if (!savedGift?.upgradeMsgId || !giftChat) return;\n    const { upgradeMsgId } = savedGift;\n    focusMessage({ chatId: giftChat.id, messageId: upgradeMsgId });\n    handleClose();\n  });\n\n  const handleTriggerVisibility = useLastCallback(() => {\n    const { inputGift, isUnsaved } = savedGift!;\n    changeGiftVisibility({ gift: inputGift!, shouldUnsave: !isUnsaved });\n    handleClose();\n  });\n\n  const handleConvertToStars = useLastCallback(() => {\n    const { inputGift } = savedGift!;\n    convertGiftToStars({ gift: inputGift! });\n    closeConvertConfirm();\n    handleClose();\n  });\n\n  const handleRemoveMessage = useLastCallback(() => {\n    if (!savedGift?.inputGift || !savedGift.dropOriginalDetailsStars || !gift || !giftAttributes) return;\n\n    const { originalDetails } = giftAttributes;\n    if (!originalDetails) return;\n\n    openGiftDescriptionRemoveModal({\n      gift: savedGift,\n      price: savedGift.dropOriginalDetailsStars,\n      details: originalDetails,\n    });\n  });\n\n  const handleOpenUpgradeModal = useLastCallback(() => {\n    if (!savedGift) return;\n    const giftOwnerId = renderingTargetPeer?.id;\n    openGiftUpgradeModal({ giftId: savedGift.gift.id, gift: savedGift, peerId: giftOwnerId });\n  });\n\n  const handleBuyGift = useLastCallback(() => {\n    if (gift?.type !== 'starGiftUnique' || !getResalePrice()) return;\n    setIsConfirmModalOpen(true);\n  });\n\n  const closeConfirmModal = useLastCallback(() => {\n    setIsConfirmModalOpen(false);\n  });\n\n  const handleConfirmBuyGift = useLastCallback(() => {\n    const peer = recipientPeer || currentUser;\n    const price = getResalePrice(shouldPayInTon);\n    if (!peer || !price || gift?.type !== 'starGiftUnique') return;\n    closeConfirmModal();\n    closeGiftModal();\n    buyStarGift({ peerId: peer.id, slug: gift.slug, price });\n  });\n\n  const handleOpenValueModal = useLastCallback(() => {\n    if (!gift || gift.type !== 'starGiftUnique') return;\n\n    openGiftInfoValueModal({\n      gift,\n    });\n  });\n\n  const giftAttributes = useMemo(() => {\n    return gift && getGiftAttributes(gift);\n  }, [gift]);\n\n  const renderFooterButton = useLastCallback(() => {\n    if (canBuyGift) {\n      return (\n        <Button className={styles.buyButton} onClick={handleBuyGift}>\n          <div>\n            {lang('ButtonBuyGift', {\n              stars: resellPrice?.currency === TON_CURRENCY_CODE\n                ? formatTonAsIcon(lang, resellPrice.amount, { shouldConvertFromNanos: true })\n                : formatStarsAsIcon(lang, resellPrice?.amount, { asFont: true }),\n            }, { withNodes: true })}\n          </div>\n          {resellPrice?.currency === TON_CURRENCY_CODE && Boolean(resellPriceInStars) && (\n            <div className={styles.footerHint}>\n              {lang('GiftBuyEqualsTo', {\n                stars: formatStarsAsIcon(lang, resellPriceInStars.amount, { asFont: true }),\n              }, { withNodes: true })}\n            </div>\n          )}\n        </Button>\n      );\n    }\n\n    if (canFocusUpgrade) {\n      return (\n        <Button onClick={handleFocusUpgraded}>\n          {lang('GiftInfoViewUpgraded')}\n        </Button>\n      );\n    }\n\n    if (canManage && savedGift?.alreadyPaidUpgradeStars && !savedGift.upgradeMsgId) {\n      return (\n        <Button\n          isShiny\n          onClick={handleOpenUpgradeModal}\n          iconName=\"arrow-down-circle\"\n          iconClassName={styles.upgradeIcon}\n          iconAlignment=\"end\"\n        >\n          {lang('GiftInfoUpgradeForFree')}\n        </Button>\n      );\n    }\n\n    if (canManage && savedGift?.canUpgrade && !savedGift.upgradeMsgId) {\n      return (\n        <Button\n          isShiny\n          onClick={handleOpenUpgradeModal}\n          iconName=\"arrow-down-circle\"\n          iconClassName={styles.upgradeIcon}\n          iconAlignment=\"end\"\n        >\n          {lang('GiftInfoUpgrade')}\n        </Button>\n      );\n    }\n\n    if (savedGift?.prepaidUpgradeHash) {\n      return (\n        <Button\n          isShiny\n          onClick={handleOpenUpgradeModal}\n          iconName=\"arrow-down-circle\"\n          iconClassName={styles.upgradeIcon}\n          iconAlignment=\"end\"\n        >\n          {lang('GiftAnUpgradeButton')}\n        </Button>\n      );\n    }\n\n    return (\n      <Button onClick={handleClose}>\n        {lang('OK')}\n      </Button>\n    );\n  });\n\n  const saleDateInfo = useMemo(() => {\n    if (!gift) return undefined;\n    let text = '';\n    if (gift.type === 'starGift') {\n      if (gift.firstSaleDate) {\n        text += `${lang('GiftInfoFirstSale')} ${formatDateTimeToString(gift.firstSaleDate * 1000, lang.code, true)}`;\n      }\n      if (gift.lastSaleDate) {\n        text += '\\n';\n        text += `${lang('GiftInfoLastSale')} ${formatDateTimeToString(gift.lastSaleDate * 1000, lang.code, true)}`;\n      }\n    }\n\n    return text;\n  }, [gift, lang]);\n\n  const modalData = useMemo(() => {\n    if (!typeGift || !gift) {\n      return undefined;\n    }\n\n    const {\n      fromId, isNameHidden, starsToConvert, isUnsaved, isConverted, upgradeMsgId,\n    } = savedGift || {};\n    const canConvert = hasConvertOption && Boolean(starsToConvert);\n\n    const isVisibleForMe = isNameHidden && renderingTargetPeer;\n\n    const isWarningDescription = savedGift?.isRefunded || (!savedGift && gift?.type === 'starGift');\n\n    const description = (() => {\n      if (!savedGift) return lang('GiftInfoSoldOutDescription');\n      if (isTargetChat) return undefined;\n      if (savedGift.isRefunded) return lang('GiftInfoDescriptionRefunded');\n\n      if (savedGift.upgradeMsgId) return lang('GiftInfoDescriptionUpgraded');\n      if (canManage && savedGift.canUpgrade && savedGift.alreadyPaidUpgradeStars && !savedGift.upgradeMsgId) {\n        return lang('GiftInfoDescriptionUpgrade2');\n      }\n      if (savedGift.canUpgrade && canManage) {\n        return canManage\n          ? lang('GiftInfoDescriptionFreeUpgrade')\n          : lang('GiftInfoPeerDescriptionFreeUpgradeOut', { peer: getPeerTitle(lang, renderingTargetPeer!)! });\n      }\n      if (!canManage && !isSender) return undefined;\n      if (isConverted && canConvert) {\n        return canManage\n          ? lang('GiftInfoDescriptionConverted', {\n            amount: starsToConvert,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          })\n          : lang('GiftInfoPeerDescriptionOutConverted', {\n            amount: starsToConvert,\n            peer: getPeerTitle(lang, renderingTargetPeer!)!,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          });\n      }\n\n      if (savedGift.canUpgrade && canManage) {\n        if (canConvert) {\n          return lang('GiftInfoDescriptionUpgrade', {\n            amount: starsToConvert,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          });\n        }\n\n        return lang('GiftInfoDescriptionUpgradeRegular');\n      }\n\n      if (canManage) {\n        if (canConvert) {\n          return lang('GiftInfoDescription', {\n            amount: starsToConvert,\n          }, {\n            withNodes: true,\n            withMarkdown: true,\n            pluralValue: starsToConvert,\n          });\n        }\n\n        return lang('GiftInfoDescriptionRegular');\n      }\n\n      if (canConvert) {\n        return lang('GiftInfoPeerDescriptionOut', {\n          amount: starsToConvert,\n          peer: getPeerTitle(lang, renderingTargetPeer!)!,\n        }, {\n          withNodes: true,\n          withMarkdown: true,\n          pluralValue: starsToConvert,\n        });\n      }\n\n      return lang('GiftInfoPeerDescriptionOutRegular', { peer: getPeerTitle(lang, renderingTargetPeer!)! });\n    })();\n\n    function getTitle() {\n      if (isGiftUnique) return gift.title;\n      if (!savedGift) return lang('GiftInfoSoldOutTitle');\n\n      return canManage ? lang('GiftInfoReceived') : lang('GiftInfoTitle');\n    }\n\n    const uniqueGiftModalHeader = (\n      <div\n        className={styles.modalHeader}\n      >\n\n        <Button\n          className={styles.closeButton}\n          round\n          color=\"translucent-white\"\n          size=\"tiny\"\n          iconName=\"close\"\n          ariaLabel={lang('Close')}\n          onClick={handleClose}\n        />\n\n        {Boolean(resellPrice?.amount) && (\n          <div className={styles.giftResalePriceContainer}>\n            {resellPrice.currency === TON_CURRENCY_CODE\n              ? formatTonAsIcon(lang, resellPrice.amount, {\n                className: styles.giftResalePriceStar,\n                shouldConvertFromNanos: true,\n              })\n              : formatStarsAsIcon(lang, resellPrice.amount, {\n                asFont: true,\n                className: styles.giftResalePriceStar,\n              })}\n          </div>\n        )}\n      </div>\n    );\n\n    const uniqueGiftHeader = isGiftUnique && (\n      <div ref={uniqueGiftHeaderRef} className={buildClassName(styles.header, styles.uniqueGift)}>\n        <UniqueGiftHeader\n          backdropAttribute={giftAttributes!.backdrop!}\n          patternAttribute={giftAttributes!.pattern!}\n          modelAttribute={giftAttributes!.model!}\n          title={gift.title}\n          subtitle={giftSubtitle}\n          subtitlePeer={releasedByPeer}\n          showManageButtons={canManage}\n          savedGift={savedGift}\n        />\n      </div>\n    );\n\n    const regularHeader = (\n      <div className={styles.header}>\n        <AnimatedIconFromSticker\n          className={styles.giftSticker}\n          sticker={giftSticker}\n          size={STICKER_SIZE}\n        />\n        <h1 className={styles.title}>\n          {getTitle()}\n        </h1>\n        {Boolean(description) && (\n          <p className={buildClassName(styles.description, isWarningDescription && styles.warningDescription)}>\n            {description}\n          </p>\n        )}\n      </div>\n    );\n\n    const tableData: TableData = [];\n    if (gift.type === 'starGift') {\n      const hasFrom = fromId || isNameHidden;\n\n      if (hasFrom) {\n        tableData.push([\n          lang('GiftInfoFrom'),\n          !fromId ? (\n            <>\n              <Avatar size=\"small\" peer={CUSTOM_PEER_HIDDEN} />\n              <span className={styles.unknown}>{oldLang(CUSTOM_PEER_HIDDEN.titleKey!)}</span>\n            </>\n          ) : { chatId: fromId },\n        ]);\n      }\n\n      if (savedGift?.date) {\n        tableData.push([\n          lang('GiftInfoDate'),\n          <span title={saleDateInfo}>{formatDateTimeToString(savedGift.date * 1000, lang.code, true)}</span>,\n        ]);\n      }\n\n      if (gift.firstSaleDate && !savedGift) {\n        tableData.push([\n          lang('GiftInfoFirstSale'),\n          formatDateTimeToString(gift.firstSaleDate * 1000, lang.code, true),\n        ]);\n      }\n\n      if (gift.lastSaleDate && !savedGift) {\n        tableData.push([\n          lang('GiftInfoLastSale'),\n          formatDateTimeToString(gift.lastSaleDate * 1000, lang.code, true),\n        ]);\n      }\n\n      const starsValue = gift.stars + (savedGift?.alreadyPaidUpgradeStars || 0);\n\n      tableData.push([\n        lang('GiftInfoValue'),\n        <div className={styles.giftValue}>\n          {formatStarsAsIcon(lang, starsValue, { className: styles.starAmountIcon })}\n          {canManage && hasConvertOption && Boolean(starsToConvert) && (\n            <BadgeButton onClick={openConvertConfirm}>\n              {lang('GiftInfoConvert', { amount: starsToConvert }, { pluralValue: starsToConvert })}\n            </BadgeButton>\n          )}\n        </div>,\n      ]);\n\n      if (gift.availabilityTotal) {\n        tableData.push([\n          lang('GiftInfoAvailability'),\n          lang('GiftInfoAvailabilityValue', {\n            count: gift.availabilityRemains || 0,\n            total: gift.availabilityTotal,\n          }, {\n            pluralValue: gift.availabilityRemains || 0,\n          }),\n        ]);\n      }\n\n      if (gift.upgradeStars && !upgradeMsgId) {\n        tableData.push([\n          lang('GiftInfoStatus'),\n          <div className={styles.giftValue}>\n            {lang('GiftInfoStatusNonUnique')}\n          </div>,\n        ]);\n      }\n\n      if (savedGift?.message) {\n        tableData.push([\n          undefined,\n          renderTextWithEntities(savedGift.message),\n        ]);\n      }\n    }\n\n    if (isGiftUnique) {\n      const { ownerName, ownerAddress, ownerId } = gift;\n      const ownerPeer = ownerId ? selectPeer(getGlobal(), ownerId) : undefined;\n      const {\n        model, backdrop, pattern, originalDetails,\n      } = giftAttributes || {};\n\n      if (ownerAddress) {\n        tableData.push([\n          lang('GiftInfoOwner'),\n          <span\n            className={styles.ownerAddress}\n            onClick={() => {\n              copyTextToClipboard(ownerAddress);\n              showNotification({\n                message: { key: 'WalletAddressCopied' },\n                icon: 'copy',\n              });\n            }}\n          >\n            {ownerAddress}\n            <Icon className={styles.copyIcon} name=\"copy\" />\n          </span>,\n        ]);\n      } else if (ownerPeer || ownerName) {\n        tableData.push([\n          lang('GiftInfoOwner'),\n          ownerId ? { chatId: ownerId, withEmojiStatus: true } : ownerName || '',\n        ]);\n      }\n\n      if (model) {\n        tableData.push([\n          lang('GiftAttributeModel'),\n          <span className={styles.uniqueAttribute}>\n            <span\n              className={styles.attributeName}\n              onClick={handleModelClick}\n            >\n              {model.name}\n            </span>\n            <BadgeButton>{formatPercent(model.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      if (backdrop) {\n        tableData.push([\n          lang('GiftAttributeBackdrop'),\n          <span className={styles.uniqueAttribute}>\n            <span\n              className={styles.attributeName}\n              onClick={handleBackdropClick}\n            >\n              {backdrop.name}\n            </span>\n            <BadgeButton>{formatPercent(backdrop.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      if (pattern) {\n        tableData.push([\n          lang('GiftAttributeSymbol'),\n          <span className={styles.uniqueAttribute}>\n            <span\n              className={styles.attributeName}\n              onClick={handleSymbolClick}\n            >\n              {pattern.name}\n            </span>\n            <BadgeButton>{formatPercent(pattern.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      tableData.push([\n        lang('GiftInfoAvailability'),\n        lang('GiftInfoIssued', {\n          issued: gift.issuedCount,\n          total: gift.totalCount,\n        }),\n      ]);\n\n      if (gift.valueAmount && gift.valueCurrency) {\n        tableData.push([\n          lang('GiftInfoValue'),\n          <span className={styles.uniqueValue}>\n            ~\n            {' '}\n            {formatCurrencyAsString(\n              gift.valueAmount,\n              gift.valueCurrency,\n              lang.code,\n            )}\n            <BadgeButton onClick={handleOpenValueModal}>\n              {lang('GiftInfoValueLinkMore')}\n            </BadgeButton>\n          </span>,\n        ]);\n      }\n\n      if (originalDetails) {\n        const { recipientId, senderId } = originalDetails;\n        const global = getGlobal(); // Peer titles do not need to be reactive\n\n        const openChat = (id: string) => {\n          openChatWithInfo({ id });\n          closeGiftInfoModal();\n        };\n\n        const recipient = selectPeer(global, recipientId)!;\n        const sender = senderId ? selectPeer(global, senderId) : undefined;\n\n        const text = renderGiftOriginalInfo({\n          originalDetails, recipient, sender, onOpenChat: openChat, lang,\n        });\n\n        tableData.push([\n          undefined,\n          <div className={styles.messageContainer}>\n            <div>\n              {text}\n            </div>\n            {Boolean(savedGift?.dropOriginalDetailsStars) && (\n              <Button\n                round\n                className={styles.removeMessageButton}\n                size=\"smaller\"\n                color=\"translucent\"\n                ariaLabel=\"Delete original details\"\n                onClick={handleRemoveMessage}\n                iconName=\"delete\"\n              />\n            )}\n          </div>,\n        ]);\n      }\n    }\n\n    const tonLink = tonExplorerUrl && isGiftUnique && gift.giftAddress && (\n      `${tonExplorerUrl}${gift.giftAddress}`\n    );\n\n    const footer = (\n      <div className={styles.footer}>\n        {(canManage || tonLink || canBuyGift) && (\n          <div className={styles.footerDescription}>\n            {tonLink && (\n              <div>\n                {lang('GiftInfoTonText', {\n                  link: <SafeLink url={tonLink} shouldSkipModal text={lang('GiftInfoTonLinkText')} />,\n                }, { withNodes: true })}\n              </div>\n            )}\n            {canManage && (\n              <div>\n                {lang(`GiftInfo${isTargetChat ? 'Channel' : ''}${isUnsaved ? 'Hidden' : 'Saved'}`, {\n                  link: (\n                    <Link isPrimary onClick={handleTriggerVisibility}>\n                      {lang(`GiftInfoSaved${isUnsaved ? 'Show' : 'Hide'}`)}\n                    </Link>\n                  ),\n                }, {\n                  withNodes: true,\n                })}\n              </div>\n            )}\n            {!canBuyGift && isVisibleForMe && (\n              <div>\n                {lang('GiftInfoSenderHidden')}\n              </div>\n            )}\n            {canBuyGift && giftOwnerTitle && (\n              <div>\n                {lang('GiftInfoBuyGift', {\n                  user: giftOwnerTitle,\n                }, { withNodes: true })}\n              </div>\n            )}\n          </div>\n        )}\n        {renderFooterButton()}\n      </div>\n    );\n\n    return {\n      modalHeader: isGiftUnique ? uniqueGiftModalHeader : undefined,\n      header: isGiftUnique ? uniqueGiftHeader : regularHeader,\n      tableData,\n      footer,\n    };\n  }, [\n    typeGift, savedGift, renderingTargetPeer, giftSticker, lang,\n    canManage, hasConvertOption, isSender, oldLang, tonExplorerUrl,\n    gift, giftAttributes, renderFooterButton, isTargetChat,\n    isGiftUnique, saleDateInfo,\n    canBuyGift, giftOwnerTitle, resellPrice, giftSubtitle,\n    releasedByPeer, handleSymbolClick, handleBackdropClick, handleModelClick,\n  ]);\n\n  const moreMenuItems = typeGift && (\n    <GiftMenuItems\n      peerId={renderingModal!.peerId!}\n      gift={typeGift}\n      canManage={canManage}\n      collectibleEmojiStatuses={collectibleEmojiStatuses}\n      currentUserEmojiStatus={currentUserEmojiStatus}\n    />\n  );\n\n  return (\n    <>\n      <TableInfoModal\n        isOpen={isOpen}\n        modalHeader={modalData?.modalHeader}\n        header={modalData?.header}\n        hasBackdrop={isGiftUnique}\n        tableData={modalData?.tableData}\n        footer={modalData?.footer}\n        className={styles.modal}\n        contentClassName={styles.modalContent}\n        closeButtonColor={isGiftUnique ? 'translucent-white' : undefined}\n        moreMenuItems={moreMenuItems}\n        onClose={handleClose}\n        withBalanceBar={Boolean(canBuyGift)}\n        currencyInBalanceBar={confirmPrice?.currency}\n        isLowStackPriority\n      />\n      {uniqueGift && currentUser && Boolean(confirmPrice) && (\n        <ConfirmDialog\n          isOpen={isConfirmModalOpen}\n          noDefaultTitle\n          onClose={closeConfirmModal}\n          confirmLabel={lang('ButtonBuyGift', {\n            stars: confirmPrice?.currency === TON_CURRENCY_CODE\n              ? formatTonAsIcon(lang, confirmPrice.amount, { shouldConvertFromNanos: true })\n              : formatStarsAsIcon(lang, confirmPrice.amount, { asFont: true }),\n          }, { withNodes: true })}\n          confirmHandler={handleConfirmBuyGift}\n        >\n\n          {uniqueGift.resaleTonOnly\n            && (\n              <div className={styles.descriptionConfirm}>\n                {lang('ConfirmBuyGiftForTonDescription')}\n              </div>\n            )}\n          <GiftTransferPreview\n            peer={recipientPeer || currentUser}\n            gift={uniqueGift}\n          />\n          <div className={styles.titleConfirm}>\n            {lang('TitleConfirmPayment')}\n          </div>\n          {!recipientPeer\n            && (\n              <p>\n                {lang('GiftBuyConfirmDescription', {\n                  gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n                  stars: confirmPrice?.currency === TON_CURRENCY_CODE\n                    ? formatTonAsText(lang, confirmPrice.amount, true)\n                    : formatStarsAsText(lang, confirmPrice.amount),\n                }, {\n                  withNodes: true,\n                  withMarkdown: true,\n                })}\n              </p>\n            )}\n          {recipientPeer\n            && (\n              <p>\n                {lang('GiftBuyForPeerConfirmDescription', {\n                  gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n                  stars: confirmPrice?.currency === TON_CURRENCY_CODE\n                    ? formatTonAsText(lang, confirmPrice.amount, true)\n                    : formatStarsAsText(lang, confirmPrice.amount),\n                  peer: getPeerTitle(lang, recipientPeer),\n                }, {\n                  withNodes: true,\n                  withMarkdown: true,\n                })}\n              </p>\n            )}\n          {!uniqueGift.resaleTonOnly && (\n            <>\n              <Checkbox\n                className={styles.checkBox}\n                label={lang('LabelPayInTON')}\n                checked={shouldPayInTon}\n                onCheck={setShouldPayInTon}\n              />\n\n              <div className={styles.checkBoxDescription}>\n                {lang('DescriptionPayInTON')}\n              </div>\n            </>\n          )}\n        </ConfirmDialog>\n      )}\n      {savedGift && (\n        <ConfirmDialog\n          isOpen={isConvertConfirmOpen}\n          onClose={closeConvertConfirm}\n          confirmHandler={handleConvertToStars}\n          title={lang('GiftInfoConvertTitle')}\n        >\n          <div>\n            {lang('GiftInfoPeerConvertDescription', {\n              amount: formatStarsAsText(lang, savedGift.starsToConvert!),\n              peer: getPeerTitle(lang, renderingFromPeer!)!,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n            })}\n          </div>\n          {hasConvertOption && (\n            <div>\n              {lang('GiftInfoConvertDescriptionPeriod', {\n                count: conversionLeft,\n              }, {\n                withNodes: true,\n                withMarkdown: true,\n                pluralValue: conversionLeft,\n              })}\n            </div>\n          )}\n          <div>{lang('GiftInfoConvertDescription2')}</div>\n        </ConfirmDialog>\n      )}\n    </>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const typeGift = modal?.gift;\n    const isSavedGift = typeGift && 'gift' in typeGift;\n    const currentUserId = global.currentUserId;\n\n    const fromId = isSavedGift && typeGift.fromId;\n    const fromPeer = fromId ? selectPeer(global, fromId) : undefined;\n    const targetPeer = modal?.peerId ? selectPeer(global, modal.peerId) : undefined;\n    const chat = targetPeer && isApiPeerChat(targetPeer) ? targetPeer : undefined;\n    const hasAdminRights = chat && getHasAdminRight(chat, 'postMessages');\n    const currentUser = selectUser(global, currentUserId!);\n    const recipientPeer = modal?.recipientId && currentUserId !== modal.recipientId\n      ? selectPeer(global, modal.recipientId) : undefined;\n    const currentUserEmojiStatus = currentUser?.emojiStatus;\n    const collectibleEmojiStatuses = global.collectibleEmojiStatuses?.statuses;\n\n    const gift = isSavedGift ? typeGift.gift : typeGift;\n    const releasedByPeerId = gift?.type === 'starGiftUnique' && gift.releasedByPeerId;\n    const releasedByPeer = releasedByPeerId ? selectPeer(global, releasedByPeerId) : undefined;\n\n    return {\n      fromPeer,\n      targetPeer,\n      releasedByPeer,\n      currentUserId,\n      starGiftMaxConvertPeriod: global.appConfig.starGiftMaxConvertPeriod,\n      tonExplorerUrl: global.appConfig.tonExplorerUrl,\n      hasAdminRights,\n      currentUserEmojiStatus,\n      collectibleEmojiStatuses,\n      currentUser,\n      recipientPeer,\n    };\n  },\n)(GiftInfoModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"AqB1qB8W\",\"message\":\"pA8Bz4TW\"};","import { memo, useCallback } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { TabState } from '../../../../global/types';\n\nimport { formatShortDuration } from '../../../../util/dates/dateFormat';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { renderTextWithEntities } from '../../../common/helpers/renderTextWithEntities';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport Modal from '../../../ui/Modal';\n\nimport styles from './GiftLockedModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['lockedGiftModal'];\n};\n\nconst GiftLockedModal = ({\n  modal,\n}: OwnProps) => {\n  const { closeLockedGiftModal } = getActions();\n  const lang = useLang();\n\n  const handleClose = useLastCallback(() => {\n    closeLockedGiftModal();\n  });\n\n  const getMessageText = useCallback(() => {\n    if (!modal) return '';\n\n    if (modal.untilDate) {\n      const timeRemaining = modal.untilDate ? modal.untilDate - getServerTime() : 0;\n      return lang('GiftLockedMessage', {\n        relativeDate: formatShortDuration(lang, timeRemaining),\n      },\n      {\n        withNodes: true,\n        withMarkdown: true,\n      });\n    }\n\n    if (modal.reason) {\n      return renderTextWithEntities(modal.reason);\n    }\n\n    return lang('TitleGiftLocked');\n  }, [modal, lang]);\n\n  return (\n    <Modal\n      isOpen={Boolean(modal)}\n      className=\"narrow\"\n      onClose={handleClose}\n      title={lang('TitleGiftLocked')}\n      headerClassName={styles.header}\n    >\n      <p className={styles.message}>\n        {getMessageText()}\n      </p>\n      <Button\n        onClick={handleClose}\n      >\n        {lang('OK')}\n      </Button>\n    </Modal>\n  );\n};\n\nexport default memo(GiftLockedModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"confirmText\":\"LVOpBXUW\",\"giftDescription\":\"FA1_yVBY\"};","import { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiPeer } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectPeer } from '../../../../global/selectors';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { renderGiftOriginalInfo } from '../../../common/helpers/giftOriginalInfo';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\n\nimport styles from './GiftDescriptionRemoveModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftDescriptionRemoveModal'];\n};\n\ntype StateProps = {\n  senderPeer?: ApiPeer;\n  recipientPeer?: ApiPeer;\n};\n\nconst GiftDescriptionRemoveModal = ({\n  modal, senderPeer, recipientPeer,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftDescriptionRemoveModal, removeGiftDescription, openChat,\n  } = getActions();\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingSenderPeer = useCurrentOrPrev(senderPeer);\n  const renderingRecipientPeer = useCurrentOrPrev(recipientPeer);\n\n  const openChatHandler = useLastCallback((id: string) => {\n    closeGiftDescriptionRemoveModal();\n    openChat({ id });\n  });\n\n  const handleConfirm = useLastCallback(() => {\n    if (!renderingModal?.gift.inputGift || !renderingModal.price) return;\n\n    removeGiftDescription({\n      gift: renderingModal.gift.inputGift,\n      price: renderingModal.price,\n    });\n  });\n\n  if (!renderingModal || !renderingRecipientPeer) return undefined;\n\n  const { price, details } = renderingModal;\n\n  const description = renderGiftOriginalInfo({\n    originalDetails: details, recipient: renderingRecipientPeer,\n    sender: renderingSenderPeer, onOpenChat: openChatHandler, lang,\n  });\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      title={lang('RemoveGiftDescriptionTitle')}\n      onClose={closeGiftDescriptionRemoveModal}\n      confirmLabel={lang('RemoveGiftDescriptionButton', {\n        amount: formatStarsAsIcon(lang, price, { asFont: true }),\n      }, { withNodes: true })}\n      confirmHandler={handleConfirm}\n    >\n      <div className={styles.confirmText}>{lang('RemoveGiftDescriptionConfirmText')}</div>\n      {Boolean(description) && (\n        <div className={styles.giftDescription}>\n          {description}\n        </div>\n      )}\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(\n  withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n    const senderPeer = modal?.details.senderId ? selectPeer(global, modal.details.senderId) : undefined;\n    const recipientPeer = modal?.details.recipientId ? selectPeer(global, modal.details.recipientId) : undefined;\n\n    return {\n      senderPeer,\n      recipientPeer,\n    };\n  })(GiftDescriptionRemoveModal),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"W3JMs1YE\",\"picker\":\"wOipz1Y_\"};","import {\n  memo, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport { filterPeersByQuery } from '../../../../global/helpers/peers';\nimport { selectCanGift } from '../../../../global/selectors';\nimport { unique } from '../../../../util/iteratees';\nimport sortChatIds from '../../../common/helpers/sortChatIds';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport PeerPicker from '../../../common/pickers/PeerPicker';\nimport PickerModal from '../../../common/pickers/PickerModal';\n\nimport styles from './GiftRecipientPicker.module.scss';\n\nexport type OwnProps = {\n  modal?: boolean;\n};\n\ninterface StateProps {\n  currentUserId?: string;\n  userIds?: string[];\n}\n\nconst GiftRecipientPicker = ({\n  modal,\n  currentUserId,\n  userIds,\n}: OwnProps & StateProps) => {\n  const { closeGiftRecipientPicker, openGiftModal } = getActions();\n\n  const oldLang = useOldLang();\n  const isOpen = modal;\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const displayedUserIds = useMemo(() => {\n    const global = getGlobal();\n    const idsWithSelf = userIds ? userIds.concat(currentUserId!) : undefined;\n    const filteredPeerIds = idsWithSelf ? filterPeersByQuery({ ids: idsWithSelf, query: searchQuery }) : [];\n\n    return sortChatIds(unique(filteredPeerIds).filter((peerId) => {\n      return selectCanGift(global, peerId);\n    }), undefined, [currentUserId!]);\n  }, [currentUserId, searchQuery, userIds]);\n\n  const handleSelectedUserIdsChange = useLastCallback((selectedId: string) => {\n    openGiftModal({ forUserId: selectedId });\n    closeGiftRecipientPicker();\n  });\n\n  return (\n    <PickerModal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={closeGiftRecipientPicker}\n      title={oldLang('GiftTelegramPremiumOrStarsTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n    >\n      <PeerPicker\n        className={styles.picker}\n        itemIds={displayedUserIds}\n        filterValue={searchQuery}\n        filterPlaceholder={oldLang('Search')}\n        onSelectedIdChange={handleSelectedUserIdsChange}\n        onFilterChange={setSearchQuery}\n        isSearchable\n        withDefaultPadding\n        withStatus\n        forceShowSelf\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): Complete<StateProps> => {\n  const { currentUserId } = global;\n\n  return {\n    currentUserId,\n    userIds: global.contactList?.userIds,\n  };\n})(GiftRecipientPicker));\n","// extracted by mini-css-extract-plugin\nexport default {\"checkBoxDescription\":\"pWjQiY4m\",\"inputPriceDescription\":\"SGFmA4kL\",\"checkBox\":\"yt_nODdj\",\"descriptionPrice\":\"r9R0VR_w\",\"inputPrice\":\"ElDo1Bru\"};","import {\n  memo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { TabState } from '../../../../global/types';\n\nimport { convertTonFromNanos, convertTonToNanos } from '../../../../util/formatCurrency';\nimport { convertTonToUsd, formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport { formatStarsAsIcon, formatStarsAsText, formatTonAsIcon,\n  formatTonAsText } from '../../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport Checkbox from '../../../ui/Checkbox';\nimport InputText from '../../../ui/InputText';\nimport Modal from '../../../ui/Modal';\n\nimport styles from './GiftResalePriceComposerModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftResalePriceComposerModal'];\n};\n\nexport type StateProps = {\n  starsStargiftResaleCommissionPermille?: number;\n  starsStargiftResaleAmountMin: number;\n  starsStargiftResaleAmountMax?: number;\n  starsUsdWithdrawRate?: number;\n  tonStargiftResaleCommissionPermille?: number;\n  tonStargiftResaleAmountMin: number;\n  tonStargiftResaleAmountMax?: number;\n  tonUsdRate?: number;\n};\n\nconst GiftResalePriceComposerModal = ({\n  modal, starsStargiftResaleCommissionPermille,\n  starsStargiftResaleAmountMin, starsStargiftResaleAmountMax, starsUsdWithdrawRate,\n  tonStargiftResaleCommissionPermille, tonStargiftResaleAmountMin, tonStargiftResaleAmountMax, tonUsdRate,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftResalePriceComposerModal,\n    closeGiftInfoModal,\n    updateStarGiftPrice,\n    showNotification,\n  } = getActions();\n  const isOpen = Boolean(modal);\n  const [price, setPrice] = useState<number | undefined>(undefined);\n  const [isPriceInTon, setIsPriceInTon] = useState(false);\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const { gift: typeGift } = renderingModal || {};\n  const isSavedGift = typeGift && 'gift' in typeGift;\n  const savedGift = isSavedGift ? typeGift : undefined;\n  const hasPrice = Boolean(price);\n\n  const lang = useLang();\n\n  const handleChangePrice = useLastCallback((e) => {\n    const value = e.target.value;\n    const number = parseFloat(value);\n    const maxAmount = isPriceInTon ? tonStargiftResaleAmountMax : starsStargiftResaleAmountMax;\n    const result = value === '' || Number.isNaN(number) ? undefined\n      : maxAmount ? Math.min(number, maxAmount) : number;\n    setPrice(result);\n  });\n\n  const handleClose = useLastCallback(() => {\n    closeGiftResalePriceComposerModal();\n  });\n\n  const handleSellGift = useLastCallback(() => {\n    if (!savedGift || savedGift.gift.type !== 'starGiftUnique' || !savedGift.inputGift || !price) return;\n    closeGiftResalePriceComposerModal();\n    closeGiftInfoModal();\n    updateStarGiftPrice(\n      {\n        gift: savedGift.inputGift,\n        price: {\n          currency: isPriceInTon ? 'TON' : 'XTR',\n          amount: isPriceInTon ? convertTonToNanos(price) : price,\n          nanos: 0,\n        },\n      });\n    showNotification({\n      icon: 'sell-outline',\n      message: {\n        key: 'NotificationGiftIsSale',\n        variables: {\n          gift: lang('GiftUnique', { title: savedGift.gift.title, number: savedGift.gift.number }),\n        },\n      },\n    });\n  });\n  const commission = isPriceInTon ? tonStargiftResaleCommissionPermille : starsStargiftResaleCommissionPermille;\n  const minAmount = isPriceInTon ? tonStargiftResaleAmountMin : starsStargiftResaleAmountMin;\n  const isPriceCorrect = hasPrice && price >= minAmount;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={isPriceInTon ? lang('PriceInTON') : lang('PriceInStars')}\n      hasCloseButton\n      isSlim\n      onClose={handleClose}\n    >\n      <div className={styles.inputPrice}>\n        <InputText\n          label={isPriceInTon ? lang('EnterPriceInTon') : lang('EnterPriceInStars')}\n          onChange={handleChangePrice}\n          value={price?.toString()}\n          inputMode=\"numeric\"\n          tabIndex={0}\n          teactExperimentControlled={!isPriceInTon}\n        />\n      </div>\n\n      <div className={styles.inputPriceDescription}>\n        <span>\n          {!isPriceCorrect && Boolean(commission) && lang('DescriptionComposerGiftMinimumPrice', {\n            stars: isPriceInTon ? formatTonAsText(lang, minAmount) : formatStarsAsText(lang, minAmount),\n          }, {\n            withMarkdown: true,\n            withNodes: true,\n          })}\n          {isPriceCorrect && (() => {\n            const priceWithCommission = commission ? Number((price * commission).toFixed()) : price;\n            return lang('DescriptionComposerGiftResalePrice',\n              {\n                stars: isPriceInTon\n                  ? formatTonAsText(lang, priceWithCommission)\n                  : formatStarsAsText(lang, priceWithCommission),\n              },\n              {\n                withMarkdown: true,\n                withNodes: true,\n              });\n          })()}\n        </span>\n\n        {isPriceCorrect && Boolean(isPriceInTon ? tonUsdRate : starsUsdWithdrawRate) && (\n          <span className={styles.descriptionPrice}>\n            {` ${formatCurrencyAsString(\n              isPriceInTon ? convertTonToUsd(price, tonUsdRate!) : price * starsUsdWithdrawRate!,\n              'USD',\n              lang.code,\n            )}`}\n          </span>\n        )}\n      </div>\n\n      <Checkbox\n        className={styles.checkBox}\n        label={lang('OnlyAcceptTON')}\n        checked={isPriceInTon}\n        onCheck={setIsPriceInTon}\n      />\n\n      <div className={styles.checkBoxDescription}>\n        {lang('OnlyAcceptTONDescription')}\n      </div>\n\n      <Button noForcedUpperCase disabled={!isPriceCorrect} onClick={handleSellGift}>\n        {isPriceCorrect && lang('ButtonSellGift', {\n          stars: isPriceInTon ? formatTonAsIcon(lang, price)\n            : formatStarsAsIcon(lang, price, { asFont: true }),\n        }, { withNodes: true })}\n        {!isPriceCorrect && lang('Sell')}\n      </Button>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const configPermille = global.appConfig.starsStargiftResaleCommissionPermille;\n    const starsStargiftResaleCommissionPermille = configPermille ? (configPermille / 1000) : undefined;\n    const starsStargiftResaleAmountMin = global.appConfig.starsStargiftResaleAmountMin || 0;\n    const starsStargiftResaleAmountMax = global.appConfig.starsStargiftResaleAmountMax;\n\n    const starsUsdWithdrawRateX1000 = global.appConfig.starsUsdWithdrawRateX1000;\n    const starsUsdWithdrawRate = starsUsdWithdrawRateX1000 ? starsUsdWithdrawRateX1000 / 1000 : 1;\n\n    const tonConfigPermille = global.appConfig.tonStargiftResaleCommissionPermille;\n    const tonStargiftResaleCommissionPermille = tonConfigPermille ? (tonConfigPermille / 1000) : 0;\n    const tonStargiftResaleAmountMin = convertTonFromNanos(global.appConfig.tonStargiftResaleAmountMin || 0);\n    const maxTonFromConfig = global.appConfig.tonStargiftResaleAmountMax;\n    const tonStargiftResaleAmountMax = maxTonFromConfig && convertTonFromNanos(maxTonFromConfig);\n\n    const tonUsdRate = global.appConfig.tonUsdRate;\n\n    return {\n      starsStargiftResaleCommissionPermille,\n      starsStargiftResaleAmountMin,\n      starsStargiftResaleAmountMax,\n      starsUsdWithdrawRate,\n      tonStargiftResaleCommissionPermille,\n      tonStargiftResaleAmountMin,\n      tonStargiftResaleAmountMax,\n      tonUsdRate,\n    };\n  },\n)(GiftResalePriceComposerModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"qL0cHbwS\",\"profileBlock\":\"t18QCmAb\",\"radialPattern\":\"_1RfhkfB\",\"lockIcon\":\"jiPObOWv\",\"avatar\":\"JK2zOWA7\",\"userTitle\":\"lxxbgNCl\",\"status\":\"MLMdxkUg\",\"giftTitle\":\"wxg_5ou_\",\"infoDescription\":\"KSCLIMZm\",\"footer\":\"VDrvalBo\"};","import { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectIsCurrentUserPremium, selectUser } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport buildStyle from '../../../../util/buildStyle';\nimport { REM } from '../../../common/helpers/mediaDimensions';\n\nimport useAppLayout from '../../../../hooks/useAppLayout';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useCustomEmoji from '../../../common/hooks/useCustomEmoji';\n\nimport Avatar from '../../../common/Avatar';\nimport FullNameTitle from '../../../common/FullNameTitle';\nimport Icon from '../../../common/icons/Icon';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport Button from '../../../ui/Button';\nimport TableAboutModal, { type TableAboutData } from '../../common/TableAboutModal';\n\nimport styles from './GiftStatusInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftStatusInfoModal'];\n};\n\ntype StateProps = {\n  currentUser: ApiUser;\n  isCurrentUserPremium?: boolean;\n};\n\nconst AVATAR_SIZE = 7 * REM;\n\nconst GiftStatusInfoModal = ({\n  modal,\n  currentUser,\n  isCurrentUserPremium,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftStatusInfoModal,\n    setEmojiStatus,\n  } = getActions();\n  const lang = useLang();\n  const { isMobile } = useAppLayout();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const { emojiStatus } = renderingModal || {};\n\n  const subtitleColor = emojiStatus?.textColor;\n\n  const patternIcon = useCustomEmoji(emojiStatus?.patternDocumentId);\n\n  const handleClose = useLastCallback(() => {\n    closeGiftStatusInfoModal();\n  });\n\n  const onWearClick = useLastCallback(() => {\n    if (emojiStatus) {\n      setEmojiStatus({ emojiStatus });\n    }\n    closeGiftStatusInfoModal();\n  });\n\n  const radialPatternBackdrop = useMemo(() => {\n    if (!emojiStatus || !isOpen) return undefined;\n\n    const backdropColors = [emojiStatus.centerColor, emojiStatus.edgeColor];\n\n    return (\n      <RadialPatternBackground\n        className={styles.radialPattern}\n        backgroundColors={backdropColors}\n        patternIcon={patternIcon.customEmoji}\n        yPosition={6.875 * REM}\n        maxRadius={0.31}\n        patternSize={isMobile ? 13 : 15}\n        ovalFactor={1}\n      />\n    );\n  }, [emojiStatus, isOpen, isMobile, patternIcon]);\n\n  const mockPeerWithStatus = useMemo(() => {\n    return {\n      ...currentUser,\n      emojiStatus,\n    } satisfies ApiUser;\n  }, [currentUser, emojiStatus]);\n\n  const header = useMemo(() => {\n    return (\n      <div className={styles.header}>\n        <div\n          className={buildClassName(styles.profileBlock)}\n          style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}\n        >\n\n          {radialPatternBackdrop}\n          <Avatar peer={mockPeerWithStatus} size={AVATAR_SIZE} className={styles.avatar} />\n          <FullNameTitle\n            peer={mockPeerWithStatus}\n            className={styles.userTitle}\n            withEmojiStatus\n            noFake\n            noVerified\n          />\n          <p className={styles.status} style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}>\n            {lang('Online')}\n          </p>\n        </div>\n        <div className={styles.giftTitle}>\n          {lang('UniqueStatusWearTitle', {\n            gift: mockPeerWithStatus?.emojiStatus?.title,\n          })}\n        </div>\n        <div className={styles.infoDescription}>\n          {lang('UniqueStatusBenefitsDescription')}\n        </div>\n      </div>\n    );\n  }, [subtitleColor, radialPatternBackdrop, mockPeerWithStatus, lang]);\n\n  const listItemData = [\n    ['radial-badge', lang('UniqueStatusBadgeBenefitTitle'), lang('UniqueStatusBadgeDescription')],\n    ['unique-profile', lang('UniqueStatusProfileDesignBenefitTitle'), lang('UniqueStatusProfileDesignDescription')],\n    ['proof-of-ownership', lang('UniqueStatusProofOfOwnershipBenefitTitle'),\n      lang('UniqueStatusProofOfOwnershipDescription')],\n  ] satisfies TableAboutData;\n\n  const footer = useMemo(() => {\n    if (!isOpen) return undefined;\n    return (\n      <div className={styles.footer}>\n        <Button\n          onClick={onWearClick}\n        >\n          {lang('UniqueStatusWearButton')}\n          {!isCurrentUserPremium && <Icon name=\"lock-badge\" className={styles.lockIcon} />}\n        </Button>\n      </div>\n    );\n  }, [lang, isCurrentUserPremium, isOpen]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      header={header}\n      listItemData={listItemData}\n      footer={footer}\n      hasBackdrop\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const currentUser = selectUser(global, global.currentUserId!)!;\n    const isCurrentUserPremium = selectIsCurrentUserPremium(global);\n\n    return {\n      currentUser,\n      isCurrentUserPremium,\n    };\n  },\n)(GiftStatusInfoModal));\n","import { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiPeer } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { formatStarsAsIcon, formatStarsAsText } from '../../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport GiftTransferPreview from '../../../common/gift/GiftTransferPreview';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  modal: TabState['giftTransferConfirmModal'];\n};\n\ntype StateProps = {\n  selectedPeer?: ApiPeer;\n};\n\nconst GiftTransferConfirmModal = ({ modal, selectedPeer }: OwnProps & StateProps) => {\n  const {\n    closeGiftTransferConfirmModal, transferGift, openChat, closeGiftModal, closeGiftTransferModal,\n  } = getActions();\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingSelectedPeer = useCurrentOrPrev(selectedPeer);\n\n  const handleConfirm = useLastCallback(() => {\n    if (!renderingModal?.gift.inputGift || !renderingModal.recipientId) return;\n\n    transferGift({\n      gift: renderingModal.gift.inputGift,\n      recipientId: renderingModal.recipientId,\n      transferStars: renderingModal.gift.transferStars,\n    });\n\n    closeGiftTransferConfirmModal();\n    openChat({ id: renderingModal.recipientId });\n\n    closeGiftModal();\n    closeGiftTransferModal();\n  });\n\n  if (!renderingModal) return undefined;\n\n  const { gift } = renderingModal;\n  const uniqueGift = gift.gift.type === 'starGiftUnique' ? gift.gift : undefined;\n\n  if (!uniqueGift) return undefined;\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      noDefaultTitle\n      onClose={closeGiftTransferConfirmModal}\n      confirmLabel={gift.transferStars\n        ? lang(\n          'GiftTransferConfirmButton',\n          { amount: formatStarsAsIcon(lang, gift.transferStars, { asFont: true }) },\n          { withNodes: true },\n        ) : lang('GiftTransferConfirmButtonFree')}\n      confirmHandler={handleConfirm}\n    >\n      {renderingSelectedPeer && (\n        <GiftTransferPreview\n          peer={renderingSelectedPeer}\n          gift={uniqueGift}\n        />\n      )}\n      <p>\n        {gift.transferStars\n          ? lang('GiftTransferConfirmDescription', {\n            gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n            amount: formatStarsAsText(lang, gift.transferStars),\n            peer: getPeerTitle(lang, renderingSelectedPeer!),\n          }, {\n            withNodes: true,\n            withMarkdown: true,\n          })\n          : lang('GiftTransferConfirmDescriptionFree', {\n            gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n            peer: getPeerTitle(lang, renderingSelectedPeer!),\n          }, {\n            withNodes: true,\n            withMarkdown: true,\n          })}\n      </p>\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(\n  withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n    const selectedPeer = modal?.recipientId ? selectPeer(global, modal.recipientId) : undefined;\n\n    return {\n      selectedPeer,\n    };\n  })(GiftTransferConfirmModal),\n);\n","import {\n  memo, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type { TabState } from '../../../../global/types';\nimport type { UniqueCustomPeer } from '../../../../types';\n\nimport { ALL_FOLDER_ID } from '../../../../config';\nimport { selectCanGift } from '../../../../global/selectors';\nimport { unique } from '../../../../util/iteratees';\nimport { MEMO_EMPTY_ARRAY } from '../../../../util/memo';\nimport sortChatIds from '../../../common/helpers/sortChatIds';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { useFolderManagerForOrderedIds } from '../../../../hooks/useFolderManager';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport usePeerSearch from '../../../../hooks/usePeerSearch';\n\nimport PeerPicker from '../../../common/pickers/PeerPicker';\nimport PickerModal from '../../../common/pickers/PickerModal';\n\nexport type OwnProps = {\n  modal: TabState['giftTransferModal'];\n};\n\ntype StateProps = {\n  contactIds?: string[];\n  currentUserId?: string;\n};\n\ntype Categories = 'withdraw';\n\nconst GiftTransferModal = ({\n  modal, contactIds, currentUserId,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftTransferModal,\n    openGiftWithdrawModal,\n    openGiftTransferConfirmModal,\n  } = getActions();\n  const isOpen = Boolean(modal);\n\n  const lang = useLang();\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const orderedChatIds = useFolderManagerForOrderedIds(ALL_FOLDER_ID);\n\n  const sortedLocalIds = useMemo(() => {\n    return unique([\n      ...(contactIds || []),\n      ...(orderedChatIds || []),\n    ]);\n  }, [contactIds, orderedChatIds]);\n\n  const { result: foundIds, currentResultsQuery } = usePeerSearch({\n    query: searchQuery,\n    defaultValue: sortedLocalIds,\n  });\n\n  const isLoading = currentResultsQuery !== searchQuery;\n\n  const categories = useMemo(() => {\n    if (currentResultsQuery) return MEMO_EMPTY_ARRAY;\n\n    return [{\n      type: 'withdraw',\n      isCustomPeer: true,\n      avatarIcon: 'toncoin',\n      peerColorId: 5,\n      title: lang('GiftTransferTON'),\n    }] satisfies UniqueCustomPeer<Categories>[];\n  }, [lang, currentResultsQuery]);\n\n  const handleCategoryChange = useLastCallback((category: Categories) => {\n    if (category !== 'withdraw') return;\n\n    openGiftWithdrawModal({\n      gift: renderingModal!.gift,\n    });\n    closeGiftTransferModal();\n  });\n\n  const displayIds = useMemo(() => {\n    if (isLoading) return MEMO_EMPTY_ARRAY;\n    const global = getGlobal();\n\n    return sortChatIds((foundIds || []).filter((peerId) => (\n      peerId !== currentUserId && selectCanGift(global, peerId)\n    )),\n    false);\n  }, [isLoading, foundIds, currentUserId]);\n\n  const handlePeerSelect = useLastCallback((peerId: string) => {\n    if (!renderingModal?.gift) return;\n\n    openGiftTransferConfirmModal({\n      gift: renderingModal.gift,\n      recipientId: peerId,\n    });\n  });\n\n  return (\n    <PickerModal\n      isOpen={isOpen}\n      onClose={closeGiftTransferModal}\n      title={lang('GiftTransferTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n      ignoreFreeze\n    >\n      <PeerPicker<Categories>\n        itemIds={displayIds}\n        categories={categories}\n        onSelectedCategoryChange={handleCategoryChange}\n        withDefaultPadding\n        withPeerUsernames\n        isSearchable\n        noScrollRestore\n        isLoading={isLoading}\n        filterValue={searchQuery}\n        filterPlaceholder={lang('Search')}\n        onFilterChange={setSearchQuery}\n        onSelectedIdChange={handlePeerSelect}\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { contactList, currentUserId } = global;\n\n    return {\n      contactIds: contactList?.userIds,\n      currentUserId,\n    };\n  },\n)(GiftTransferModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"footer\":\"EWaVCxY4\",\"footerButton\":\"_Dt6RSQV\",\"link\":\"Xu0TqkRj\",\"priceDecreaseTimer\":\"ryB8xKvy\"};","import {\n  memo, useEffect, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiPeer } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport {\n  getRandomGiftPreviewAttributes, type GiftPreviewAttributes,\n  preloadGiftAttributeStickers } from '../../../common/helpers/gifts';\n\nimport useInterval from '../../../../hooks/schedulers/useInterval';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedCounter from '../../../common/AnimatedCounter';\nimport Icon from '../../../common/icons/Icon';\nimport Button from '../../../ui/Button';\nimport Checkbox from '../../../ui/Checkbox';\nimport Link from '../../../ui/Link';\nimport TextTimer from '../../../ui/TextTimer';\nimport TableAboutModal, { type TableAboutData } from '../../common/TableAboutModal';\nimport UniqueGiftHeader from '../UniqueGiftHeader';\n\nimport styles from './GiftUpgradeModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftUpgradeModal'];\n};\n\ntype StateProps = {\n  recipient?: ApiPeer;\n};\n\nconst PREVIEW_UPDATE_INTERVAL = 3000;\n\nconst GiftUpgradeModal = ({ modal, recipient }: OwnProps & StateProps) => {\n  const {\n    closeGiftUpgradeModal,\n    closeGiftInfoModal,\n    upgradeGift,\n    upgradePrepaidGift,\n    openStarGiftPriceDecreaseInfoModal,\n    shiftGiftUpgradeNextPrice,\n  } = getActions();\n  const isOpen = Boolean(modal);\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingRecipient = useCurrentOrPrev(recipient);\n  const [shouldKeepOriginalDetails, setShouldKeepOriginalDetails] = useState(false);\n\n  const isPrepaid = Boolean(renderingModal?.gift?.prepaidUpgradeHash);\n\n  const [previewAttributes, setPreviewAttributes] = useState<GiftPreviewAttributes | undefined>();\n\n  const lang = useLang();\n\n  const handleClose = useLastCallback(() => closeGiftUpgradeModal());\n\n  const handleTimerEnd = useLastCallback(() => {\n    shiftGiftUpgradeNextPrice();\n  });\n\n  const nextPrice = renderingModal?.nextPrices?.[0];\n  const nextPriceDate = nextPrice?.date;\n  const upgradeStars = renderingModal?.currentUpgradeStars;\n\n  const handleUpgrade = useLastCallback(() => {\n    const gift = renderingModal?.gift;\n\n    if (!gift) return;\n\n    if (isPrepaid && gift.prepaidUpgradeHash && renderingRecipient) {\n      if (!upgradeStars) return;\n\n      upgradePrepaidGift({\n        peerId: renderingRecipient.id,\n        hash: gift.prepaidUpgradeHash,\n        stars: upgradeStars,\n      });\n      handleClose();\n      closeGiftInfoModal();\n      return;\n    }\n\n    if (!gift?.inputGift) return;\n\n    upgradeGift({\n      gift: gift.inputGift,\n      shouldKeepOriginalDetails,\n      upgradeStars: !gift.alreadyPaidUpgradeStars ? upgradeStars : undefined,\n    });\n    handleClose();\n  });\n\n  const updatePreviewAttributes = useLastCallback(() => {\n    if (!renderingModal?.sampleAttributes) return;\n    setPreviewAttributes(getRandomGiftPreviewAttributes(renderingModal.sampleAttributes, previewAttributes));\n  });\n\n  const handleOpenPriceInfo = useLastCallback(() => {\n    if (!renderingModal?.prices) return;\n\n    openStarGiftPriceDecreaseInfoModal({\n      prices: renderingModal.prices,\n      currentPrice: upgradeStars || 0,\n      minPrice: renderingModal.minPrice || 0,\n      maxPrice: renderingModal.maxPrice || 0,\n    });\n  });\n\n  useInterval(updatePreviewAttributes, isOpen ? PREVIEW_UPDATE_INTERVAL : undefined, true);\n\n  useEffect(() => {\n    if (isOpen && renderingModal?.sampleAttributes) {\n      updatePreviewAttributes();\n    }\n  }, [isOpen, renderingModal?.sampleAttributes]);\n\n  useEffect(() => {\n    const attributes = renderingModal?.sampleAttributes;\n    if (!attributes) return;\n    preloadGiftAttributeStickers(attributes);\n  }, [renderingModal?.sampleAttributes]);\n\n  const formattedPriceElement = useMemo(() => (upgradeStars ? (\n    <span>\n      <Icon name=\"star\" className=\"star-amount-icon\" />\n      <AnimatedCounter text={lang.number(upgradeStars)} />\n    </span>\n  ) : undefined), [lang, upgradeStars]);\n\n  const modalData = useMemo(() => {\n    if (!previewAttributes || !isOpen) {\n      return undefined;\n    }\n\n    const gift = renderingModal?.gift;\n\n    const userName = renderingRecipient ? getPeerTitle(lang, renderingRecipient) : lang('ActionFallbackUser');\n\n    const listItemData = (renderingRecipient ? [\n      ['diamond', lang('GiftUpgradeUniqueTitle'), lang('GiftPeerUpgradeUniqueDescription', { user: userName })],\n      ['trade', lang('GiftUpgradeTransferableTitle'),\n        lang('GiftPeerUpgradeTransferableDescription', { user: userName })],\n      ['auction', lang('GiftUpgradeTradeableTitle'), lang('GiftPeerUpgradeTradeableDescription', { user: userName })],\n    ] : [\n      ['diamond', lang('GiftUpgradeUniqueTitle'), lang('GiftUpgradeUniqueDescription')],\n      ['trade', lang('GiftUpgradeTransferableTitle'), lang('GiftUpgradeTransferableDescription')],\n      ['auction', lang('GiftUpgradeTradeableTitle'), lang('GiftUpgradeTradeableDescription')],\n    ]) satisfies TableAboutData;\n\n    const subtitle = renderingRecipient\n      ? lang('GiftPeerUpgradeText', { peer: getPeerTitle(lang, renderingRecipient) })\n      : lang('GiftUpgradeTextOwn');\n\n    const hasPriceDecreaseInfo = Boolean(nextPriceDate)\n      && Boolean(renderingModal?.prices?.length)\n      && !gift?.alreadyPaidUpgradeStars;\n\n    const header = (\n      <UniqueGiftHeader\n        modelAttribute={previewAttributes.model}\n        backdropAttribute={previewAttributes.backdrop}\n        patternAttribute={previewAttributes.pattern}\n        title={lang('GiftUpgradeTitle')}\n        subtitle={subtitle}\n      />\n    );\n\n    const footer = (\n      <div className={styles.footer}>\n        {!gift && (\n          <Button className={styles.footerButton} onClick={handleClose}>\n            {lang('OK')}\n          </Button>\n        )}\n        {gift && (\n          <>\n            {!isPrepaid && (\n              <Checkbox\n                label={lang('GiftUpgradeKeepDetails')}\n                onCheck={setShouldKeepOriginalDetails}\n                checked={shouldKeepOriginalDetails}\n              />\n            )}\n            <Button className={styles.footerButton} isShiny onClick={handleUpgrade}>\n              <div className={styles.buttonContent}>\n                <div>\n                  {gift.alreadyPaidUpgradeStars\n                    ? lang('GeneralConfirm')\n                    : isPrepaid\n                      ? lang('GiftPayForUpgradeButton', { amount: formattedPriceElement }, { withNodes: true })\n                      : lang('GiftUpgradeButton', { amount: formattedPriceElement }, { withNodes: true })}\n                </div>\n                {hasPriceDecreaseInfo && (\n                  <div className={styles.priceDecreaseTimer}>\n                    {lang('StarGiftPriceDecreaseTimer', {\n                      timer: <TextTimer endsAt={nextPriceDate} onEnd={handleTimerEnd} />,\n                    }, { withNodes: true })}\n                  </div>\n                )}\n              </div>\n            </Button>\n            {hasPriceDecreaseInfo && (\n              <Link\n                className={styles.link}\n                isPrimary\n                onClick={handleOpenPriceInfo}\n              >\n                {lang('StarGiftPriceDecreaseInfoLink')}\n              </Link>\n            )}\n          </>\n        )}\n      </div>\n    );\n\n    return {\n      listItemData,\n      header,\n      footer,\n    };\n  }, [previewAttributes, isOpen, lang,\n    renderingRecipient, renderingModal?.gift,\n    shouldKeepOriginalDetails, isPrepaid,\n    renderingModal?.prices?.length,\n    nextPriceDate, formattedPriceElement]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      header={modalData?.header}\n      footer={modalData?.footer}\n      listItemData={modalData?.listItemData}\n      hasBackdrop\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const recipientId = modal?.recipientId;\n    const recipient = recipientId ? selectPeer(global, recipientId) : undefined;\n\n    return {\n      recipient,\n    };\n  },\n)(GiftUpgradeModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"v4GJBsdC\",\"sticker\":\"lJodRD0R\",\"description\":\"VjWaO8un\",\"initialPrice\":\"K7zsAhVt\",\"starIcon\":\"Xw91xwpe\",\"footer\":\"OJDo2xUd\",\"footerSticker\":\"hspYTy7V\"};","import type { FC } from '../../../../lib/teact/teact';\nimport { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { TabState } from '../../../../global/types';\n\nimport { formatDateToString } from '../../../../util/dates/dateFormat';\nimport { formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { getGiftAttributes } from '../../../common/helpers/gifts';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Button from '../../../ui/Button';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\n\nimport styles from './GiftInfoValueModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftInfoValueModal'];\n};\n\nconst HEADER_STICKER_SIZE = 120;\nconst FOOTER_STICKER_SIZE = 24;\n\nconst GiftInfoValueModal: FC<OwnProps> = ({\n  modal,\n}) => {\n  const { closeGiftInfoValueModal, openUrl, openGiftInMarket } = getActions();\n\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const handleOpenFragment = useLastCallback(() => {\n    if (modal?.valueInfo.fragmentListedUrl) {\n      openUrl({ url: modal.valueInfo.fragmentListedUrl });\n    }\n  });\n\n  const handleOpenTelegramMarket = useLastCallback(() => {\n    if (modal?.gift) {\n      openGiftInMarket({ gift: modal.gift });\n    }\n  });\n\n  const modalData = useMemo(() => {\n    if (!renderingModal) return undefined;\n\n    const { gift, valueInfo } = renderingModal;\n    const giftAttributes = getGiftAttributes(gift);\n\n    if (!giftAttributes) return undefined;\n\n    const header = (\n      <div className={styles.header}>\n        <AnimatedIconFromSticker\n          className={styles.sticker}\n          sticker={giftAttributes.model!.sticker}\n          size={HEADER_STICKER_SIZE}\n        />\n        <Button\n          pill\n          size=\"tiny\"\n          fluid\n          nonInteractive\n        >\n          {formatCurrencyAsString(valueInfo.value, valueInfo.currency, lang.code)}\n        </Button>\n        <div className={styles.description}>\n          {lang('GiftValueDescription', { giftName: gift.title }, {\n            withMarkdown: true,\n            withNodes: true,\n          })}\n        </div>\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    tableData.push([\n      lang('GiftValueTitleInitialSale'),\n      formatDateToString(valueInfo.initialSaleDate * 1000, lang.code),\n    ]);\n\n    tableData.push([\n      lang('GiftValueTitleInitialPrice'),\n      <span className={styles.initialPrice}>\n        {formatStarsAsIcon(lang, valueInfo.initialSaleStars, { className: styles.starIcon })}\n        {' (~ '}\n        {formatCurrencyAsString(valueInfo.initialSalePrice, valueInfo.currency, lang.code)}\n        )\n      </span>,\n    ]);\n\n    if (valueInfo.lastSaleDate) {\n      tableData.push([\n        lang('GiftValueTitleLastSale'),\n        formatDateToString(valueInfo.lastSaleDate * 1000, lang.code),\n      ]);\n    }\n\n    if (valueInfo.lastSalePrice) {\n      tableData.push([\n        lang('GiftValueTitleLastPrice'),\n        formatCurrencyAsString(valueInfo.lastSalePrice, valueInfo.currency, lang.code),\n      ]);\n    }\n\n    if (valueInfo.floorPrice) {\n      tableData.push([\n        lang('GiftValueTitleMinimumPrice'),\n        formatCurrencyAsString(valueInfo.floorPrice, valueInfo.currency, lang.code),\n      ]);\n    }\n\n    if (valueInfo.averagePrice) {\n      tableData.push([\n        lang('GiftValueTitleAveragePrice'),\n        formatCurrencyAsString(valueInfo.averagePrice, valueInfo.currency, lang.code),\n      ]);\n    }\n\n    const canBuyOnFragment = Boolean(valueInfo.fragmentListedUrl && valueInfo.fragmentListedCount);\n    const canBuyOnTelegram = Boolean(valueInfo.listedCount && valueInfo.listedCount);\n    const hasFooter = canBuyOnFragment || canBuyOnTelegram;\n\n    const footer = hasFooter && (\n      <div className={styles.footer}>\n        {canBuyOnFragment && (\n          <Button\n            isText\n            onClick={handleOpenFragment}\n            noForcedUpperCase\n            size=\"tiny\"\n          >\n            {lang.number(valueInfo.fragmentListedCount!)}\n            <AnimatedIconFromSticker\n              className={styles.footerSticker}\n              sticker={giftAttributes.model!.sticker}\n              size={FOOTER_STICKER_SIZE}\n            />\n            {lang('GiftValueForSaleOnFragment')}\n          </Button>\n        )}\n\n        {canBuyOnTelegram && (\n          <Button\n            isText\n            noForcedUpperCase\n            size=\"tiny\"\n            onClick={handleOpenTelegramMarket}\n          >\n            {lang.number(valueInfo.listedCount!)}\n            <AnimatedIconFromSticker\n              className={styles.footerSticker}\n              sticker={giftAttributes.model!.sticker}\n              size={FOOTER_STICKER_SIZE}\n            />\n            {lang('GiftValueForSaleOnTelegram')}\n          </Button>\n        )}\n      </div>\n    );\n\n    return {\n      header,\n      tableData,\n      footer,\n    };\n  }, [lang, renderingModal, handleOpenFragment, handleOpenTelegramMarket]);\n\n  if (!modalData) return undefined;\n\n  return (\n    <TableInfoModal\n      isOpen={isOpen}\n      onClose={closeGiftInfoValueModal}\n      header={modalData.header}\n      tableData={modalData.tableData}\n      footer={modalData.footer}\n    />\n  );\n};\n\nexport default memo(GiftInfoValueModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"LQgz8Nlx\",\"giftPreview\":\"hgs0ts_O\",\"backdrop\":\"OnBhMaBw\",\"description\":\"HBxB4QPY\",\"arrow\":\"kXTOUpfb\",\"noPassword\":\"BnqLhoKr\"};","import {\n  memo,\n  useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftUnique } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport { type CustomPeer, SettingsScreens } from '../../../../types';\n\nimport { getDays } from '../../../../util/dates/units';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { getGiftAttributes } from '../../../common/helpers/gifts';\nimport { REM } from '../../../common/helpers/mediaDimensions';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport PasswordForm from '../../../common/PasswordForm';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport Button from '../../../ui/Button';\nimport Modal from '../../../ui/Modal';\n\nimport styles from './GiftWithdrawModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftWithdrawModal'];\n};\n\ntype StateProps = {\n  hasPassword?: boolean;\n  passwordHint?: string;\n};\n\nconst FRAGMENT_PEER: CustomPeer = {\n  isCustomPeer: true,\n  avatarIcon: 'fragment',\n  title: '',\n  customPeerAvatarColor: '#000000',\n};\nconst GIFT_STICKER_SIZE = 4.5 * REM;\n\nconst GiftWithdrawModal = ({ modal, hasPassword, passwordHint }: OwnProps & StateProps) => {\n  const {\n    closeGiftWithdrawModal,\n    clearGiftWithdrawError,\n    closeGiftInfoModal,\n    processStarGiftWithdrawal,\n    openSettingsScreen,\n  } = getActions();\n  const isOpen = Boolean(modal);\n\n  const [shouldShowPassword, setShouldShowPassword] = useState(false);\n\n  const lang = useLang();\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const gift = renderingModal?.gift?.gift as ApiStarGiftUnique;\n  const giftAttributes = gift && getGiftAttributes(gift);\n  const exportDelay = renderingModal?.gift?.canExportAt\n    ? Math.max(renderingModal.gift.canExportAt - getServerTime(), 0) : undefined;\n\n  const handleClose = useLastCallback(() => {\n    closeGiftWithdrawModal();\n  });\n\n  const handleSubmit = useLastCallback((password: string) => {\n    processStarGiftWithdrawal({\n      gift: renderingModal!.gift.inputGift!,\n      password,\n    });\n  });\n\n  const handleSetUpPassword = useLastCallback(() => {\n    openSettingsScreen({\n      screen: SettingsScreens.TwoFaDisabled,\n    });\n    closeGiftWithdrawModal();\n    closeGiftInfoModal();\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={lang('GiftWithdrawTitle')}\n      isCondensedHeader\n      hasCloseButton\n      isSlim\n      onClose={handleClose}\n    >\n      {giftAttributes && (\n        <>\n          <div className={styles.header}>\n            <div className={styles.giftPreview}>\n              <RadialPatternBackground\n                className={styles.backdrop}\n                backgroundColors={[giftAttributes.backdrop!.centerColor, giftAttributes.backdrop!.edgeColor]}\n                patternIcon={giftAttributes.pattern?.sticker}\n                ringsCount={1}\n                ovalFactor={1}\n                patternSize={12}\n              />\n              <AnimatedIconFromSticker\n                className={styles.sticker}\n                size={GIFT_STICKER_SIZE}\n                sticker={giftAttributes.model?.sticker}\n              />\n            </div>\n            <Icon name=\"next\" className={styles.arrow} />\n            <Avatar\n              peer={FRAGMENT_PEER}\n              size=\"giant\"\n              className={styles.avatar}\n            />\n          </div>\n          <p className={styles.description}>\n            {lang('GiftWithdrawDescription', {\n              gift: `${gift.title} #${gift.number}`,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n              renderTextFilters: ['br'],\n            })}\n          </p>\n        </>\n      )}\n      {Boolean(exportDelay) && (\n        <p className={styles.exportHint}>\n          {lang('GiftWithdrawWait', { days: getDays(exportDelay) }, { pluralValue: getDays(exportDelay) })}\n        </p>\n      )}\n      {!hasPassword && (\n        <>\n          <span className={styles.noPassword}>{lang('ErrorPasswordMissing')}</span>\n          <Button className=\"mt-2\" onClick={handleSetUpPassword}>{lang('SetUp2FA')}</Button>\n        </>\n      )}\n      {hasPassword && !exportDelay && (\n        <PasswordForm\n          shouldShowSubmit\n          placeholder={lang('CheckPasswordPlaceholder')}\n          error={renderingModal?.errorKey && lang.withRegular(renderingModal?.errorKey)}\n          description={lang('CheckPasswordDescription')}\n          onClearError={clearGiftWithdrawError}\n          isLoading={renderingModal?.isLoading}\n          hint={passwordHint}\n          isPasswordVisible={shouldShowPassword}\n          shouldResetValue={isOpen}\n          onChangePasswordVisibility={setShouldShowPassword}\n          submitLabel={lang('GiftWithdrawSubmit')}\n          onSubmit={handleSubmit}\n        />\n      )}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const {\n      settings: {\n        byKey: {\n          hasPassword,\n        },\n      },\n      twoFaSettings: {\n        hint: passwordHint,\n      },\n    } = global;\n\n    return {\n      hasPassword,\n      passwordHint,\n    };\n  },\n)(GiftWithdrawModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"RdhRpsCn\",\"title\":\"yzbjj73U\",\"slider\":\"xePPMXOI\",\"description\":\"BlpfdOtK\",\"itemInfo\":\"nS9V516D\",\"itemTitle\":\"sH5Nukjy\",\"itemSubtitle\":\"dHlNODTI\",\"itemIcon\":\"H_iHihXU\",\"sendAsPeerButtonAvatar\":\"_mjvLELm\",\"sendAsPeerMenuButton\":\"zxsRaWYV\",\"buttonDownIcon\":\"zrwUUELS\",\"sendAsPeerMenuBubble\":\"X1PB6mhQ\",\"sendAsPeerMenu\":\"Px1MDij9\",\"sendAsPeersMenuContainer\":\"Al1nfhHJ\",\"headerControlPanel\":\"vu90kSL_\",\"separator\":\"uhQLUjmo\",\"checkBox\":\"Mc3bVeF0\",\"topLabel\":\"bnou4CpV\",\"top\":\"QludQDKR\",\"topBadge\":\"JBF9pTUK\",\"buttonStar\":\"NJJFuym9\",\"topPeer\":\"Ty4Ud_Rd\",\"disclaimer\":\"KRvkHeo1\"};","import type { FC } from '../../../lib/teact/teact';\nimport type React from '../../../lib/teact/teact';\nimport {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat, ApiMessage, ApiPaidReactionPrivacyType,\n  ApiPeer,\n  ApiSendAsPeerId,\n  ApiStarsAmount, ApiUser,\n} from '../../../api/types';\nimport type { TabState } from '../../../global/types';\nimport type { CustomPeer } from '../../../types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../../config';\nimport { getPeerTitle, isApiPeerUser } from '../../../global/helpers/peers';\nimport {\n  selectChat, selectChatMessage, selectPeer, selectUser,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatInteger } from '../../../util/textFormat';\nimport renderText from '../../common/helpers/renderText';\n\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport FullNameTitle from '../../common/FullNameTitle';\nimport Icon from '../../common/icons/Icon';\nimport PeerBadge from '../../common/PeerBadge';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\nimport DropdownMenu from '../../ui/DropdownMenu';\nimport MenuItem from '../../ui/MenuItem';\nimport Modal from '../../ui/Modal';\nimport Separator from '../../ui/Separator';\nimport BalanceBlock from '../stars/BalanceBlock';\nimport StarSlider from './StarSlider';\n\nimport styles from './PaidReactionModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['paidReactionModal'];\n};\n\ntype StateProps = {\n  message?: ApiMessage;\n  chat?: ApiChat;\n  maxAmount: number;\n  starBalance?: ApiStarsAmount;\n  defaultPrivacy?: ApiPaidReactionPrivacyType;\n  sendPaidReactionsAsPeerIds?: ApiSendAsPeerId[];\n  currentUserId: string;\n  currentUser: ApiUser;\n};\n\ntype ReactorData = {\n  amount: number;\n  localAmount: number;\n  isMy?: boolean;\n  isAnonymous?: boolean;\n  user?: ApiPeer;\n};\n\nconst MAX_TOP_REACTORS = 3;\nconst DEFAULT_STARS_AMOUNT = 50;\nconst MAX_REACTION_AMOUNT = 2500;\nconst ANONYMOUS_PEER: CustomPeer = {\n  avatarIcon: 'author-hidden',\n  customPeerAvatarColor: '#9eaab5',\n  isCustomPeer: true,\n  titleKey: 'StarsReactionAnonymous',\n};\n\nconst PaidReactionModal = ({\n  modal,\n  chat,\n  message,\n  maxAmount,\n  starBalance,\n  defaultPrivacy,\n  sendPaidReactionsAsPeerIds,\n  currentUserId,\n  currentUser,\n}: OwnProps & StateProps) => {\n  const { closePaidReactionModal, addLocalPaidReaction, loadSendPaidReactionsAs } = getActions();\n\n  const [starsAmount, setStarsAmount] = useState(DEFAULT_STARS_AMOUNT);\n  const [isTouched, markTouched, unmarkTouched] = useFlag();\n  const [shouldSendAsAnonymous, setShouldSendAsAnonymous] = useState(true);\n  const [sendAsPeerId, setSendAsPeerId] = useState(currentUserId);\n\n  const chatId = chat?.id;\n\n  const senderPeer = sendAsPeerId ? (selectPeer(getGlobal(), sendAsPeerId)) : currentUser;\n\n  const oldLang = useOldLang();\n  const { isMobile } = useAppLayout();\n  const lang = useLang();\n\n  const handleShowInTopSendersChange = useLastCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setShouldSendAsAnonymous(!e.target.checked);\n  });\n\n  const handleAmountChange = useLastCallback((value: number) => {\n    setStarsAmount(value);\n    markTouched();\n  });\n\n  useEffect(() => {\n    if (chatId && !sendPaidReactionsAsPeerIds) {\n      loadSendPaidReactionsAs({ chatId });\n    }\n  }, [chatId, sendPaidReactionsAsPeerIds]);\n\n  const filteredMyReactorIds = useMemo(() => {\n    const result = sendPaidReactionsAsPeerIds?.map((peer) => peer.id)\n      .filter((id) => id !== chatId);\n    result?.unshift(currentUserId);\n    return result;\n  }, [sendPaidReactionsAsPeerIds, chatId, currentUserId]);\n\n  const canChangeSendAsPeer = filteredMyReactorIds && filteredMyReactorIds.length > 1;\n\n  useEffect(() => {\n    if (!modal) {\n      unmarkTouched();\n    }\n  }, [modal]);\n\n  useEffect(() => {\n    const currentReactor = message?.reactions?.topReactors?.find((reactor) => reactor.isMy);\n    if (currentReactor) {\n      setShouldSendAsAnonymous(Boolean(currentReactor.isAnonymous));\n      if (currentReactor.peerId) {\n        setSendAsPeerId(currentReactor.peerId);\n      }\n      return;\n    }\n\n    setShouldSendAsAnonymous(defaultPrivacy?.type === 'anonymous' || false);\n    if (defaultPrivacy?.type === 'peer' && filteredMyReactorIds?.includes(defaultPrivacy.peerId)) {\n      setSendAsPeerId(defaultPrivacy.peerId);\n      return;\n    }\n\n    setSendAsPeerId(currentUserId);\n  }, [defaultPrivacy, message?.reactions?.topReactors, filteredMyReactorIds, currentUserId]);\n\n  const handleSend = useLastCallback(() => {\n    if (!modal) return;\n\n    addLocalPaidReaction({\n      chatId: modal.chatId,\n      messageId: modal.messageId,\n      count: starsAmount,\n      isPrivate: shouldSendAsAnonymous,\n      peerId: shouldSendAsAnonymous || sendAsPeerId === currentUserId ? undefined : sendAsPeerId,\n      shouldIgnoreDefaultPrivacy: true,\n    });\n    closePaidReactionModal();\n  });\n\n  const handleSendAsPeerChange = useLastCallback((peerId: string) => {\n    setShouldSendAsAnonymous(false);\n    setSendAsPeerId(peerId);\n  });\n\n  const renderMenuItem = useLastCallback((peerId: string) => {\n    const peer = selectPeer(getGlobal(), peerId);\n    const isSelected = sendAsPeerId === peerId && !shouldSendAsAnonymous;\n    if (!peer) return undefined;\n\n    return (\n      <MenuItem\n\n        onClick={() => handleSendAsPeerChange(peerId)}\n      >\n        <Avatar\n          size=\"small\"\n          peer={peer}\n        />\n        <div className={buildClassName(styles.itemInfo)}>\n          <FullNameTitle className={styles.itemTitle} peer={peer} noFake noVerified />\n          <span className={styles.itemSubtitle}>\n            {isApiPeerUser(peer) ? lang('PeerPersonalAccount') : lang('PeerChannel')}\n          </span>\n        </div>\n        <Icon\n          className={styles.itemIcon}\n          name={isSelected ? 'check' : 'placeholder'}\n        />\n      </MenuItem>\n    );\n  });\n\n  const SendAsPeerMenuButton: FC<{ onTrigger: () => void; isOpen?: boolean }> = useMemo(() => {\n    return ({ onTrigger, isOpen }) => (\n      <Button\n        ripple={!isMobile}\n        size=\"smaller\"\n        color=\"translucent\"\n        className={buildClassName(styles.sendAsPeerMenuButton, isOpen ? 'active' : '')}\n        onClick={onTrigger}\n        ariaLabel={lang('AriaLabelOpenMenu')}\n      >\n        <Avatar\n          className={styles.sendAsPeerButtonAvatar}\n          size=\"mini\"\n          peer={shouldSendAsAnonymous ? ANONYMOUS_PEER : senderPeer}\n        />\n        <Icon\n          name=\"down\"\n          className={styles.buttonDownIcon}\n        />\n      </Button>\n    );\n  }, [isMobile, lang, senderPeer, shouldSendAsAnonymous]);\n\n  const sendAsPeersMenu = useMemo(() => {\n    if (!canChangeSendAsPeer) return undefined;\n    return (\n      <DropdownMenu\n        className={buildClassName(styles.sendAsPeerMenu, 'with-menu-transitions')}\n        bubbleClassName={styles.sendAsPeerMenuBubble}\n        trigger={SendAsPeerMenuButton}\n        positionX=\"right\"\n        autoClose\n      >\n        {filteredMyReactorIds.map((id) => (\n          renderMenuItem(id)\n        ))}\n      </DropdownMenu>\n    );\n  }, [SendAsPeerMenuButton, filteredMyReactorIds, canChangeSendAsPeer]);\n\n  const topReactors = useMemo(() => {\n    const global = getGlobal();\n    const all = message?.reactions?.topReactors;\n    if (!all) {\n      return undefined;\n    }\n\n    const result: ReactorData[] = [];\n    let hasCurrentSender = false;\n    let myReactorAmount = 0;\n\n    all.forEach((reactor) => {\n      const peer = reactor.peerId ? selectPeer(global, reactor.peerId) : undefined;\n      if (!peer && !reactor.isAnonymous && !reactor.isMy) return;\n      if (reactor.isMy) {\n        myReactorAmount = reactor.count;\n      }\n\n      if (reactor.isMy && (reactor.peerId !== sendAsPeerId || (reactor.isAnonymous && !shouldSendAsAnonymous))) return;\n\n      const isCurrentReactor = sendAsPeerId === reactor.peerId || (shouldSendAsAnonymous && reactor.isAnonymous);\n\n      if (isCurrentReactor) {\n        hasCurrentSender = true;\n      }\n\n      result.push({\n        amount: reactor.count,\n        localAmount: isCurrentReactor && isTouched ? starsAmount : 0,\n        isMy: reactor.isMy,\n        isAnonymous: reactor.isAnonymous,\n        user: peer,\n      });\n    });\n\n    if (!hasCurrentSender) {\n      const sender = selectPeer(global, sendAsPeerId);\n      result.push({\n        amount: myReactorAmount,\n        localAmount: isTouched ? starsAmount : 0,\n        isMy: true,\n        user: sender,\n      });\n    }\n\n    result.sort((a, b) => (b.amount + b.localAmount) - (a.amount + a.localAmount));\n\n    return result.slice(0, MAX_TOP_REACTORS);\n  }, [isTouched, message?.reactions?.topReactors, starsAmount, sendAsPeerId, shouldSendAsAnonymous]);\n\n  const chatTitle = chat && getPeerTitle(oldLang, chat);\n\n  return (\n    <Modal\n      isOpen={Boolean(modal)}\n      onClose={closePaidReactionModal}\n      isSlim\n      hasAbsoluteCloseButton\n      contentClassName={styles.content}\n      isLowStackPriority\n    >\n      <div className={styles.sendAsPeersMenuContainer}>\n        {sendAsPeersMenu}\n      </div>\n      <div className={styles.headerControlPanel}>\n        <BalanceBlock balance={starBalance} className={styles.modalBalance} withAddButton />\n      </div>\n\n      <StarSlider\n        className={styles.slider}\n        defaultValue={DEFAULT_STARS_AMOUNT}\n        maxValue={maxAmount}\n        onChange={handleAmountChange}\n      />\n      <h3 className={styles.title}>{oldLang('StarsReactionTitle')}</h3>\n      <div className={styles.description}>\n        {renderText(oldLang('StarsReactionText', chatTitle), ['simple_markdown', 'emoji'])}\n      </div>\n      <Separator>\n        {topReactors && <div className={styles.topLabel}>{oldLang('StarsReactionTopSenders')}</div>}\n      </Separator>\n      {topReactors && (\n        <div className={styles.top}>\n          {topReactors.map((reactor) => {\n            const countText = formatInteger(reactor.amount + reactor.localAmount);\n            const peer = (reactor.isAnonymous || !reactor.user || (reactor.isMy && shouldSendAsAnonymous))\n              ? ANONYMOUS_PEER : reactor.user;\n            const text = 'isCustomPeer' in peer ? oldLang(peer.titleKey)\n              : peer && getPeerTitle(oldLang, peer);\n            return (\n              <PeerBadge\n                className={styles.topPeer}\n                key={`${reactor.user?.id || 'anonymous'}-${countText}`}\n                peer={peer}\n                badgeText={countText}\n                badgeIcon=\"star\"\n                badgeClassName={styles.topBadge}\n                text={text}\n              />\n            );\n          })}\n        </div>\n      )}\n      {topReactors && (<Separator className={styles.separator} />)}\n      <Checkbox\n        className={buildClassName(styles.checkBox, 'dialog-checkbox')}\n        checked={!shouldSendAsAnonymous}\n        onChange={handleShowInTopSendersChange}\n        label={oldLang('StarsReactionShowMeInTopSenders')}\n      />\n      <Button\n        onClick={handleSend}\n      >\n        {lang('SendPaidReaction', { amount: starsAmount }, {\n          withNodes: true,\n          specialReplacement: {\n            [STARS_ICON_PLACEHOLDER]: <Icon className={styles.buttonStar} name=\"star\" />,\n          },\n        })}\n      </Button>\n      <p className={styles.disclaimer}>\n        {lang('StarsReactionTerms', {\n          link: <SafeLink text={lang('StarsReactionLinkText')} url={lang('StarsReactionLink')} />,\n        }, {\n          withNodes: true,\n        })}\n      </p>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const chat = modal && selectChat(global, modal.chatId);\n    const message = modal && selectChatMessage(global, modal.chatId, modal.messageId);\n    const starBalance = global.stars?.balance;\n    const maxAmount = global.appConfig.paidReactionMaxAmount || MAX_REACTION_AMOUNT;\n    const defaultPrivacy = global.settings.paidReactionPrivacy;\n    const sendPaidReactionsAsPeerIds = chat?.sendPaidReactionsAsPeerIds;\n    const currentUserId = global.currentUserId!;\n    const currentUser = selectUser(global, currentUserId)!;\n\n    return {\n      chat,\n      message,\n      starBalance,\n      maxAmount,\n      defaultPrivacy,\n      sendPaidReactionsAsPeerIds,\n      currentUserId,\n      currentUser,\n    };\n  },\n)(PaidReactionModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"CuBAw2yg\",\"dragging\":\"LbDNXOOQ\",\"progress\":\"kwK0cNPX\",\"floatingBadgeWrapper\":\"uvlMoXj0\",\"floatingBadgeText\":\"qqQan8uF\",\"floatingBadgeTriangle\":\"mIdJOmsB\",\"slider\":\"euOOAbZi\",\"sparkles\":\"_L1YQTIP\",\"dynamicColor\":\"uIYIwZpx\",\"floatingBadge\":\"BGSDWAYc\",\"clickable\":\"JwkM7nwU\",\"noTransition\":\"cG6CiHRL\",\"floatingBadgeSparkles\":\"JCciTRtu\",\"floatingBadgeContent\":\"f1UPSN27\",\"withDescription\":\"WsptdVHe\",\"floatingBadgeTitle\":\"HkY6dR8D\",\"floatingBadgeDescription\":\"mR3ddE5s\",\"floatingBadgeTrianglePath\":\"IW9YhMAx\",\"customValueIcon\":\"Td8Tc1MH\"};","import type { TeactNode } from '../../../lib/teact/teact';\nimport {\n  memo, useEffect,\n  useMemo, useRef, useState } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\nimport buildStyle from '../../../util/buildStyle';\nimport { REM } from '../../common/helpers/mediaDimensions';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport usePrevious from '../../../hooks/usePrevious';\nimport useResizeObserver from '../../../hooks/useResizeObserver';\n\nimport AnimatedCounter from '../../common/AnimatedCounter';\nimport Icon from '../../common/icons/Icon';\nimport Sparkles from '../../common/Sparkles';\n\nimport styles from './StarSlider.module.scss';\n\ntype OwnProps = {\n  maxValue: number;\n  defaultValue: number;\n  minValue?: number;\n  minAllowedValue?: number;\n  minAllowedProgress?: number;\n  className?: string;\n  floatingBadgeDescription?: TeactNode;\n  shouldUseDynamicColor?: boolean;\n  shouldAllowCustomValue?: boolean;\n  onChange: (value: number) => void;\n  onBadgeClick?: NoneToVoidFunction;\n  onCustomValueClick?: NoneToVoidFunction;\n};\n\nconst DEFAULT_POINTS = [50, 100, 500, 1000, 2000, 5000, 10000];\nconst LARGE_STEP = 10000;\nconst THUMB_SIZE = 1.875 * REM;\nconst CORNER_BEAK_WIDTH = 44;\nconst DEFAULT_BEAK_WIDTH = 52;\nconst BEAK_HEIGHT = 32;\n\nconst BEAK_OFFSET_END = 10;\nconst TIP_OFFSET_END = 0;\nconst BEAK_TIP_PADDING = 1;\n\nconst BADGE_HORIZONTAL_PADDING = 2 * REM;\nconst BADGE_ICON_SIZE = 1.5 * REM;\nconst BADGE_TITLE_GAP = 0.125 * REM;\nconst DRAG_DISTANCE_THRESHOLD = 5;\nconst BADGE_WIDTH_DELTA = 6;\n\nlet textMeasureCanvas: HTMLCanvasElement | undefined;\n\nfunction getTextWidth(text: string, font: string): number {\n  if (!textMeasureCanvas) {\n    textMeasureCanvas = document.createElement('canvas');\n  }\n  const ctx = textMeasureCanvas.getContext('2d')!;\n  ctx.font = font;\n  return ctx.measureText(text).width;\n}\n\nconst SLIDER_COLORS = [\n  '#955CDB', // Purple\n  '#955CDB', // Purple\n  '#46A3EB', // Blue\n  '#40A920', // Green\n  '#E29A09', // Yellow\n  '#ED771E', // Orange\n  '#E14741', // Red\n  '#5B6676', // Silver\n];\n\nfunction getColorForProgress(progress: number): string {\n  const index = Math.floor(progress * SLIDER_COLORS.length);\n  return SLIDER_COLORS[Math.min(index, SLIDER_COLORS.length - 1)];\n}\n\nconst StarSlider = ({\n  maxValue,\n  defaultValue,\n  minValue: minValueProp,\n  minAllowedValue,\n  minAllowedProgress,\n  className,\n  floatingBadgeDescription,\n  shouldUseDynamicColor,\n  shouldAllowCustomValue,\n  onChange,\n  onBadgeClick,\n  onCustomValueClick,\n}: OwnProps) => {\n  const containerRef = useRef<HTMLDivElement>();\n  const floatingBadgeContentRef = useRef<HTMLDivElement>();\n  const lang = useLang();\n\n  const baseMinValue = minValueProp ?? 1;\n\n  // Uses binary search - O(log n)\n  const actualMinValue = useMemo(() => {\n    if (!minAllowedProgress || !minAllowedValue || minAllowedValue <= baseMinValue) {\n      return baseMinValue;\n    }\n\n    let low = baseMinValue;\n    let high = minAllowedValue;\n\n    while (low < high) {\n      const mid = Math.floor((low + high) / 2);\n      const testPoints = buildPoints(mid, maxValue);\n      const testProgress = getProgress(testPoints, minAllowedValue, mid);\n      const normalizedProgress = testProgress / testPoints.length;\n\n      if (normalizedProgress < minAllowedProgress) {\n        high = mid;\n      } else {\n        low = mid + 1;\n      }\n    }\n\n    return Math.max(baseMinValue, low);\n  }, [baseMinValue, minAllowedValue, minAllowedProgress, maxValue]);\n\n  const points = useMemo(() => {\n    return buildPoints(actualMinValue, maxValue);\n  }, [maxValue, actualMinValue]);\n\n  const [value, setValue] = useState(0);\n  const [containerWidth, setContainerWidth] = useState(0);\n  const [badgeWidth, setBadgeWidth] = useState(0);\n  const [isDragging, setIsDragging] = useState(false);\n  const startXRef = useRef<number | undefined>();\n  const prevBadgeWidth = usePrevious(badgeWidth);\n\n  const badgeText = lang.number(getValue(points, value, actualMinValue));\n\n  const minSliderProgress = minAllowedValue !== undefined\n    ? getProgress(points, minAllowedValue, actualMinValue) : 0;\n\n  useEffect(() => {\n    setValue(getProgress(points, defaultValue, actualMinValue));\n  }, [defaultValue, points, actualMinValue]);\n\n  useEffect(() => {\n    if (!floatingBadgeContentRef.current) return;\n\n    const titleEl = floatingBadgeContentRef.current.querySelector(`.${styles.floatingBadgeTitle}`);\n    if (!titleEl) return;\n\n    const computedStyle = getComputedStyle(titleEl);\n    const font = `${computedStyle.fontWeight} ${computedStyle.fontSize} ${computedStyle.fontFamily}`;\n\n    const textWidth = getTextWidth(badgeText, font);\n    const titleWidth = BADGE_ICON_SIZE + BADGE_TITLE_GAP + textWidth;\n\n    const descriptionEl = floatingBadgeContentRef.current.querySelector(`.${styles.floatingBadgeDescription}`);\n    const descriptionWidth = descriptionEl?.scrollWidth || 0;\n\n    const contentWidth = Math.max(titleWidth, descriptionWidth);\n    const newBadgeWidth = contentWidth + BADGE_HORIZONTAL_PADDING;\n\n    setBadgeWidth((currentWidth) => {\n      if (Math.abs(newBadgeWidth - currentWidth) < BADGE_WIDTH_DELTA) {\n        return currentWidth;\n      }\n      return newBadgeWidth;\n    });\n  }, [badgeText, floatingBadgeDescription]);\n\n  const handleContainerResize = useLastCallback((entry: ResizeObserverEntry) => {\n    setContainerWidth(entry.contentRect.width);\n  });\n\n  useResizeObserver(containerRef, handleContainerResize);\n\n  const progress = value / points.length;\n  const {\n    minBadgeX, maxBadgeX, beakOffset, beakTipOffset, beakWidth: currentBeakWidth,\n  } = useMemo(() => {\n    return calcBadgePosition(containerWidth, badgeWidth, progress);\n  }, [containerWidth, badgeWidth, progress]);\n\n  const beakPath = useMemo(() => {\n    return generateBeakPath(currentBeakWidth, beakTipOffset);\n  }, [currentBeakWidth, beakTipOffset]);\n\n  const handleChange = useLastCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n    const rawValue = Number(event.currentTarget.value);\n    const clampedValue = Math.max(rawValue, minSliderProgress);\n    setValue(clampedValue);\n\n    const resultValue = getValue(points, clampedValue, actualMinValue);\n    onChange(resultValue);\n  });\n\n  const handlePointerDown = useLastCallback((e: React.PointerEvent<HTMLInputElement>) => {\n    startXRef.current = e.clientX;\n    setIsDragging(false);\n  });\n\n  const handlePointerMove = useLastCallback((e: React.PointerEvent<HTMLInputElement>) => {\n    if (startXRef.current === undefined) return;\n    const distance = Math.abs(e.clientX - startXRef.current);\n    if (distance >= DRAG_DISTANCE_THRESHOLD) {\n      setIsDragging(true);\n    }\n  });\n\n  const handlePointerUp = useLastCallback((e: React.PointerEvent<HTMLInputElement>) => {\n    startXRef.current = undefined;\n\n    if (!isDragging && onCustomValueClick && containerRef.current) {\n      const rect = containerRef.current.getBoundingClientRect();\n      const clickZoneWidth = 1.875 * REM;\n\n      const isInIconArea = e.clientX >= rect.right - clickZoneWidth && e.clientX <= rect.right;\n\n      if (isInIconArea) {\n        onCustomValueClick();\n      }\n    }\n\n    setIsDragging(false);\n  });\n\n  const dynamicColor = shouldUseDynamicColor ? getColorForProgress(progress) : undefined;\n\n  const badgeStyle = buildStyle(\n    Boolean(badgeWidth) && `width: ${badgeWidth}px`,\n  );\n\n  const rootStyle = buildStyle(\n    `--progress: ${progress}`,\n    `--min-badge-x: ${minBadgeX}px`,\n    `--max-badge-x: ${maxBadgeX}px`,\n    dynamicColor && `--dynamic-color: ${dynamicColor}`,\n  );\n\n  return (\n    <div\n      ref={containerRef}\n      className={buildClassName(styles.root, isDragging && styles.dragging, className)}\n      style={rootStyle}\n    >\n      <div className={styles.floatingBadgeWrapper}>\n        <div\n          className={buildClassName(styles.floatingBadge, onBadgeClick && styles.clickable)}\n          onClick={onBadgeClick}\n        >\n          <div\n            className={buildClassName(\n              styles.floatingBadgeText,\n              shouldUseDynamicColor && styles.dynamicColor,\n              (!prevBadgeWidth || prevBadgeWidth === 0) && styles.noTransition,\n            )}\n            style={badgeStyle}\n          >\n            <Sparkles preset=\"button\" className={styles.floatingBadgeSparkles} />\n            <div\n              ref={floatingBadgeContentRef}\n              className={buildClassName(\n                styles.floatingBadgeContent,\n                floatingBadgeDescription && styles.withDescription,\n              )}\n            >\n              <div className={styles.floatingBadgeTitle}>\n                <Icon name=\"star\" className={styles.floatingBadgeIcon} />\n                <AnimatedCounter text={badgeText} />\n              </div>\n              <div className={styles.floatingBadgeDescription}>\n                {floatingBadgeDescription}\n              </div>\n            </div>\n          </div>\n          <svg\n            className={styles.floatingBadgeTriangle}\n            width={currentBeakWidth}\n            height={BEAK_HEIGHT}\n            viewBox={`0 0 ${currentBeakWidth} ${BEAK_HEIGHT}`}\n            fill=\"none\"\n            aria-hidden=\"true\"\n            role=\"presentation\"\n            style={`transform: translate(calc(-50% + ${beakOffset}px), 33%)`}\n          >\n            {!shouldUseDynamicColor && (\n              <defs>\n                <linearGradient id=\"StarBadgeTriangle\" x1=\"0\" x2=\"1\" y1=\"0\" y2=\"0\">\n                  <stop offset=\"-50%\" stop-color=\"#FFAA00\" />\n                  <stop offset=\"150%\" stop-color=\"#FFCD3A\" />\n                </linearGradient>\n              </defs>\n            )}\n            <path\n              className={styles.floatingBadgeTrianglePath}\n              d={beakPath}\n              fill={dynamicColor || 'url(#StarBadgeTriangle)'}\n            />\n          </svg>\n        </div>\n      </div>\n      <div className={buildClassName(styles.progress, shouldUseDynamicColor && styles.dynamicColor)}>\n        <Sparkles preset=\"progress\" className={styles.sparkles} />\n      </div>\n      <input\n        className={styles.slider}\n        type=\"range\"\n        min={0}\n        max={points.length}\n        defaultValue={getProgress(points, defaultValue, actualMinValue)}\n        step=\"any\"\n        onChange={handleChange}\n        onPointerDown={handlePointerDown}\n        onPointerMove={handlePointerMove}\n        onPointerUp={handlePointerUp}\n      />\n      {shouldAllowCustomValue && (\n        <Icon name=\"add\" className={styles.customValueIcon} />\n      )}\n    </div>\n  );\n};\n\nfunction buildPoints(minValue: number, maxValue: number): number[] {\n  const result = [];\n\n  for (let i = 0; i < DEFAULT_POINTS.length; i++) {\n    if (DEFAULT_POINTS[i] <= minValue) continue;\n\n    if (DEFAULT_POINTS[i] < maxValue) {\n      result.push(DEFAULT_POINTS[i]);\n    }\n\n    if (DEFAULT_POINTS[i] >= maxValue) {\n      result.push(maxValue);\n      return result;\n    }\n  }\n\n  const lastPoint = DEFAULT_POINTS[DEFAULT_POINTS.length - 1];\n  const stepsNeeded = Math.ceil((minValue - lastPoint) / LARGE_STEP);\n  let nextPoint = lastPoint + Math.max(1, stepsNeeded) * LARGE_STEP;\n\n  while (nextPoint < maxValue) {\n    result.push(nextPoint);\n    nextPoint += LARGE_STEP;\n  }\n  result.push(maxValue);\n\n  return result;\n}\n\nfunction getProgress(points: number[], value: number, minValue: number) {\n  const pointIndex = points.findIndex((point) => value <= point);\n  const prevPoint = points[pointIndex - 1] || minValue;\n  const nextPoint = points[pointIndex] || points[points.length - 1];\n  if (nextPoint === prevPoint) return pointIndex;\n  const progress = (value - prevPoint) / (nextPoint - prevPoint);\n  return pointIndex + progress;\n}\n\nfunction getValue(points: number[], progress: number, minValue: number) {\n  const pointIndex = Math.floor(progress);\n  const prevPoint = points[pointIndex - 1] || minValue;\n  const nextPoint = points[pointIndex] || points[points.length - 1];\n  const value = prevPoint + (nextPoint - prevPoint) * (progress - pointIndex);\n  return Math.round(value);\n}\n\nfunction calcBadgePosition(\n  containerWidth: number,\n  badgeWidth: number,\n  progress: number,\n) {\n  const halfBadgeWidth = badgeWidth / 2;\n  const cornerBeakHalfWidth = CORNER_BEAK_WIDTH / 2;\n  const maxBeakOffset = halfBadgeWidth - cornerBeakHalfWidth;\n\n  const minBadgeX = halfBadgeWidth;\n  const maxBadgeX = containerWidth - halfBadgeWidth;\n\n  const thumbHalf = THUMB_SIZE / 2;\n  const trackLength = containerWidth - THUMB_SIZE;\n  const distanceFromLeft = progress * trackLength;\n  const distanceFromRight = trackLength - distanceFromLeft;\n\n  const isLeftSide = distanceFromLeft < distanceFromRight;\n  const distanceToEdge = isLeftSide ? distanceFromLeft : distanceFromRight;\n  const direction = isLeftSide ? -1 : 1;\n\n  let beakOffset = 0;\n  let beakTipOffset = 0;\n  let beakWidth = DEFAULT_BEAK_WIDTH;\n\n  const beakOffsetStart = halfBadgeWidth - thumbHalf;\n\n  if (distanceToEdge < beakOffsetStart) {\n    if (distanceToEdge > BEAK_OFFSET_END) {\n      const t = (beakOffsetStart - distanceToEdge) / (beakOffsetStart - BEAK_OFFSET_END);\n      beakOffset = direction * t * maxBeakOffset;\n    } else if (distanceToEdge > TIP_OFFSET_END) {\n      beakOffset = direction * maxBeakOffset;\n      const t = (BEAK_OFFSET_END - distanceToEdge) / (BEAK_OFFSET_END - TIP_OFFSET_END);\n      const tExp = 1 - (1 - t) * (1 - t) * (1 - t);\n      beakWidth = DEFAULT_BEAK_WIDTH - tExp * (DEFAULT_BEAK_WIDTH - CORNER_BEAK_WIDTH);\n      beakTipOffset = direction * t * (beakWidth / 2);\n    } else {\n      beakOffset = direction * maxBeakOffset;\n      beakWidth = CORNER_BEAK_WIDTH;\n      beakTipOffset = direction * (beakWidth / 2);\n    }\n  }\n\n  const maxTipOffset = beakWidth / 2 - TIP_RADIUS - BEAK_TIP_PADDING;\n  const clampedTipOffset = Math.max(-maxTipOffset, Math.min(maxTipOffset, beakTipOffset));\n\n  return {\n    minBadgeX,\n    maxBadgeX,\n    beakOffset,\n    beakTipOffset: clampedTipOffset,\n    beakWidth,\n  };\n}\n\nconst TIP_RADIUS = 2;\n\nfunction generateBeakPath(beakWidth: number, tipOffset: number): string {\n  const tipX = beakWidth / 2 + tipOffset;\n  const r = TIP_RADIUS;\n  const y = BEAK_HEIGHT - r;\n\n  return `M 0 0 L ${beakWidth} 0 L ${tipX + r} ${y} Q ${tipX} ${BEAK_HEIGHT} ${tipX - r} ${y} Z`;\n}\n\nexport default memo(StarSlider);\n","import type { FC } from '../../../lib/teact/teact';\nimport { memo, useCallback } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiStarsAmount } from '../../../api/types';\nimport type { TabState } from '../../../global/types';\n\nimport { getCurrentTabId } from '../../../util/establishMultitabRole';\nimport { convertTonFromNanos } from '../../../util/formatCurrency';\nimport { formatStarsAsText, formatTonAsText } from '../../../util/localization/format';\n\nimport useLang from '../../../hooks/useLang';\n\nimport ConfirmDialog from '../../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  modal: TabState['priceConfirmModal'];\n};\n\ntype StateProps = {\n  starBalance?: ApiStarsAmount;\n  tonBalance?: number;\n};\n\nconst PriceConfirmModal: FC<OwnProps & StateProps> = ({\n  modal,\n  starBalance,\n  tonBalance,\n}) => {\n  const actions = getActions();\n\n  const lang = useLang();\n\n  const handleConfirm = useCallback(() => {\n    if (!modal?.directInfo) {\n      actions.closePriceConfirmModal();\n      return;\n    }\n\n    const { currency, newAmount } = modal;\n    const isTon = currency === 'TON';\n    const currentBalance = isTon ? tonBalance : starBalance?.amount;\n\n    if (currentBalance === undefined) {\n      actions.closePriceConfirmModal();\n      return;\n    }\n\n    if (currentBalance < newAmount!) {\n      actions.openStarsBalanceModal({\n        currency: isTon ? 'TON' : 'XTR',\n        tabId: getCurrentTabId(),\n      });\n      actions.closePriceConfirmModal();\n      return;\n    }\n\n    actions.sendStarPaymentForm({\n      directInfo: modal.directInfo,\n      tabId: getCurrentTabId(),\n    });\n    actions.closePriceConfirmModal();\n  }, [modal, starBalance, tonBalance, actions]);\n\n  const handleClose = useCallback(() => {\n    actions.closePriceConfirmModal();\n  }, [actions]);\n\n  if (!modal) {\n    return undefined;\n  }\n\n  const {\n    originalAmount,\n    newAmount,\n    currency,\n  } = modal;\n\n  const isTon = currency === 'TON';\n\n  let originalAmountText: string;\n  let newAmountText: string;\n\n  if (isTon) {\n    originalAmountText = formatTonAsText(lang, convertTonFromNanos(originalAmount!));\n    newAmountText = formatTonAsText(lang, convertTonFromNanos(newAmount!));\n  } else {\n    originalAmountText = formatStarsAsText(lang, originalAmount!);\n    newAmountText = formatStarsAsText(lang, newAmount!);\n  }\n\n  return (\n    <ConfirmDialog\n      isOpen={Boolean(modal)}\n      onClose={handleClose}\n      title={lang('PriceChanged')}\n      confirmHandler={handleConfirm}\n      confirmLabel={lang('PayNewPrice')}\n    >\n      <p>\n        {lang('PriceChangedText', {\n          originalAmount: originalAmountText,\n          newAmount: newAmountText,\n        }, {\n          withMarkdown: true,\n          withNodes: true,\n        })}\n      </p>\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): Complete<StateProps> => {\n  const starBalance = global.stars?.balance;\n  const tonBalance = global.ton?.balance?.amount;\n\n  return {\n    starBalance,\n    tonBalance,\n  };\n},\n)(PriceConfirmModal));\n","import { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiTypeCurrencyAmount } from '../../../api/types';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../config';\nimport { formatStarsAmount } from '../../../global/helpers/payments';\nimport buildClassName from '../../../util/buildClassName';\nimport { convertCurrencyFromBaseUnit } from '../../../util/formatCurrency';\n\nimport useLang from '../../../hooks/useLang';\n\nimport BadgeButton from '../../common/BadgeButton';\nimport Icon from '../../common/icons/Icon';\nimport StarIcon from '../../common/icons/StarIcon';\n\nimport styles from './StarsBalanceModal.module.scss';\n\ntype OwnProps = {\n  balance?: ApiTypeCurrencyAmount;\n  withAddButton?: boolean;\n  className?: string;\n};\n\nconst BalanceBlock = ({ balance, className, withAddButton }: OwnProps) => {\n  const lang = useLang();\n\n  const {\n    openStarsBalanceModal,\n  } = getActions();\n\n  const renderStarsAmount = () => {\n    return (\n      <>\n        <StarIcon type=\"gold\" size=\"middle\" />\n        {balance !== undefined && balance.currency === STARS_CURRENCY_CODE\n          ? formatStarsAmount(lang, balance) : ''}\n        {withAddButton && (\n          <BadgeButton\n            className={styles.addStarsButton}\n            onClick={() => openStarsBalanceModal({})}\n          >\n            <Icon\n              className={styles.addStarsIcon}\n              name=\"add\"\n            />\n          </BadgeButton>\n        )}\n      </>\n    );\n  };\n\n  const renderTonAmount = () => {\n    return (\n      <>\n        <Icon name=\"toncoin\" />\n        {balance !== undefined ? convertCurrencyFromBaseUnit(balance.amount, balance.currency) : ''}\n      </>\n    );\n  };\n\n  return (\n    <div className={buildClassName(styles.balanceBlock, className)}>\n      <div className={styles.balanceInfo}>\n        <span className={styles.smallerText}>{lang('StarsBalance')}</span>\n        <div className={styles.balanceBottom}>\n          {balance?.currency === TON_CURRENCY_CODE ? renderTonAmount() : renderStarsAmount()}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(BalanceBlock);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"TtE8LQNJ\",\"minimal\":\"nkV4JXHc\",\"transition\":\"nXQS4E59\",\"main\":\"JuWZY1ds\",\"container\":\"mnhBs1uK\",\"section\":\"lYkNd_gb\",\"lastSection\":\"f749AI4g\",\"sectionTitle\":\"FF8gm7MP\",\"tos\":\"Vu6blJk9\",\"hint\":\"Rs8WXoOz\",\"topUpButton\":\"dc_DZoVF\",\"tonBalanceContainer\":\"lorbW9II\",\"tonBalance\":\"h2Fs3tOv\",\"tonIconBalance\":\"Ut6GidJP\",\"tonInUsd\":\"FdcdsB4l\",\"tonIconLogo\":\"_hCjjyEv\",\"description\":\"teXilLxe\",\"header\":\"fnhXotO2\",\"starHeaderText\":\"iUwego5s\",\"botItem\":\"AhxcrKWn\",\"hiddenHeader\":\"DZk6d6hF\",\"noSeparator\":\"UwUaTrab\",\"closeButton\":\"piD1PXHW\",\"addStarsButton\":\"dqnGL2uh\",\"addStarsIcon\":\"w9Db2eiK\",\"balanceBlock\":\"Yk0OQBKC\",\"balanceInfo\":\"p2dW9NOV\",\"smallerText\":\"rUnPcfmE\",\"balanceBottom\":\"F5BTkZ9G\",\"modalBalance\":\"t8tMrx3y\",\"starButton\":\"oOt4VBD2\",\"paymentContent\":\"OReEUNTV\",\"paymentImages\":\"oKorQYTC\",\"paymentPhoto\":\"HGTrEtUF\",\"avatarStar\":\"Wu10dXoa\",\"paymentImageBackground\":\"os8jb_qv\",\"paymentButton\":\"VzR5cibf\",\"paymentButtonStar\":\"Uhg7yWxK\",\"transactions\":\"Qvc0fTTH\",\"subscriptions\":\"IX5BhCUF\",\"tabs\":\"KZVEyKOX\",\"disclaimer\":\"bpVifdwH\",\"amountBadge\":\"BPM7LKwo\",\"loadMore\":\"TKmZjMyd\",\"loadMoreIcon\":\"buepwtN1\"};","import { memo, useEffect, useMemo, useRef, useState } from '@teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiStarTopupOption } from '../../../api/types';\nimport type { GlobalState, TabState } from '../../../global/types';\nimport type { AnimationLevel } from '../../../types';\nimport type { RegularLangKey } from '../../../types/language';\n\nimport {\n  PAID_MESSAGES_PURPOSE,\n  STARS_CURRENCY_CODE,\n  TON_CURRENCY_CODE,\n} from '../../../config';\nimport { getChatTitle, getUserFullName } from '../../../global/helpers';\nimport { getPeerTitle } from '../../../global/helpers/peers';\nimport { selectChat, selectIsPremiumPurchaseBlocked, selectUser } from '../../../global/selectors';\nimport { selectSharedSettings } from '../../../global/selectors/sharedState.ts';\nimport buildClassName from '../../../util/buildClassName';\nimport { convertCurrencyFromBaseUnit, convertTonToUsd, formatCurrencyAsString } from '../../../util/formatCurrency';\nimport { resolveTransitionName } from '../../../util/resolveTransitionName.ts';\nimport { REM } from '../../common/helpers/mediaDimensions';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Icon from '../../common/icons/Icon';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Modal from '../../ui/Modal';\nimport TabList, { type TabWithProperties } from '../../ui/TabList';\nimport Transition from '../../ui/Transition';\nimport ParticlesHeader from '../common/ParticlesHeader.tsx';\nimport BalanceBlock from './BalanceBlock';\nimport StarTopupOptionList from './StarTopupOptionList';\nimport StarsSubscriptionItem from './subscription/StarsSubscriptionItem';\nimport StarsTransactionItem from './transaction/StarsTransactionItem';\n\nimport styles from './StarsBalanceModal.module.scss';\n\nconst HEADER_HEIGHT = 3.5 * REM;\nconst TRANSACTION_TYPES = ['all', 'inbound', 'outbound'] as const;\nconst TRANSACTION_TABS_KEYS: RegularLangKey[] = [\n  'StarsTransactionsAll',\n  'StarsTransactionsIncoming',\n  'StarsTransactionsOutgoing',\n];\nconst TRANSACTION_ITEM_CLASS = 'StarsTransactionItem';\nconst SUBSCRIPTION_PURPOSE = 'subs';\n\nexport type OwnProps = {\n  modal: TabState['starsBalanceModal'];\n};\n\ntype StateProps = {\n  starsBalanceState?: GlobalState['stars'];\n  tonBalanceState?: GlobalState['ton'];\n  canBuyPremium?: boolean;\n  shouldForceHeight?: boolean;\n  tonUsdRate?: number;\n  tonTopupUrl: string;\n  animationLevel: AnimationLevel;\n};\n\nconst StarsBalanceModal = ({\n  modal, starsBalanceState, tonBalanceState, canBuyPremium, shouldForceHeight, tonUsdRate, tonTopupUrl, animationLevel,\n}: OwnProps & StateProps) => {\n  const {\n    closeStarsBalanceModal, loadStarsTransactions, loadStarsSubscriptions, openStarsGiftingPickerModal, openInvoice,\n    openUrl,\n  } = getActions();\n\n  const currency = modal?.currency || STARS_CURRENCY_CODE;\n  const currentState = currency === TON_CURRENCY_CODE ? tonBalanceState : starsBalanceState;\n  const { balance, history } = currentState || {};\n  const { subscriptions } = (currency === STARS_CURRENCY_CODE && starsBalanceState) || {};\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  const [isHeaderHidden, setHeaderHidden] = useState(true);\n  const [areTabsPinned, pinTabs, unpinTabs] = useFlag(false);\n  const [selectedTabIndex, setSelectedTabIndex] = useState(0);\n  const [areBuyOptionsShown, showBuyOptions, hideBuyOptions] = useFlag();\n\n  const tabsRef = useRef<HTMLDivElement>();\n\n  const isOpen = Boolean(modal && (starsBalanceState || tonBalanceState));\n\n  const {\n    originStarsPayment, originReaction, originGift, topup,\n  } = modal || {};\n\n  const shouldOpenOnBuy = originStarsPayment || originReaction || originGift || topup;\n\n  const ongoingTransactionAmount = originStarsPayment?.form?.invoice?.totalAmount\n    || originStarsPayment?.subscriptionInfo?.subscriptionPricing?.amount\n    || originReaction?.amount\n    || originGift?.gift.stars\n    || topup?.balanceNeeded;\n  const starsNeeded = ongoingTransactionAmount ? ongoingTransactionAmount - (balance?.amount || 0) : undefined;\n  const starsNeededText = useMemo(() => {\n    const global = getGlobal();\n\n    if (originReaction) {\n      const channel = selectChat(global, originReaction.chatId);\n      if (!channel) return undefined;\n      return oldLang('StarsNeededTextReactions', getChatTitle(oldLang, channel));\n    }\n\n    if (originStarsPayment) {\n      const bot = originStarsPayment.form?.botId ? selectUser(global, originStarsPayment.form.botId) : undefined;\n      if (!bot) return undefined;\n      return oldLang('StarsNeededText', getUserFullName(bot));\n    }\n\n    if (originGift) {\n      const peer = selectUser(global, originGift.peerId);\n      if (!peer) return undefined;\n      return oldLang('StarsNeededTextGift', getPeerTitle(lang, peer));\n    }\n\n    if (topup?.purpose === SUBSCRIPTION_PURPOSE) {\n      return oldLang('StarsNeededTextLink');\n    }\n\n    if (topup?.purpose === PAID_MESSAGES_PURPOSE) {\n      return lang('StarsNeededTextSendPaidMessages', undefined, {\n        withMarkdown: true,\n        withNodes: true,\n      });\n    }\n\n    return undefined;\n  }, [originReaction, originStarsPayment, originGift, topup?.purpose, lang, oldLang]);\n\n  const shouldShowItems = Boolean(history?.all?.transactions.length && !shouldOpenOnBuy);\n  const shouldSuggestGifting = !shouldOpenOnBuy;\n\n  const modalHeight = useMemo(() => {\n    const transactionCount = history?.all?.transactions.length || 0;\n    if (transactionCount === 1) {\n      return '35.5rem';\n    }\n    if (transactionCount === 2) {\n      return '39.25rem';\n    }\n    if (transactionCount === 3) {\n      return '43rem';\n    }\n    return '45rem';\n  }, [history?.all?.transactions.length]);\n\n  const transactionTabs: TabWithProperties[] = useMemo(() => {\n    return TRANSACTION_TABS_KEYS.map((key) => ({\n      title: lang(key),\n    }));\n  }, [lang]);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setHeaderHidden(true);\n      setSelectedTabIndex(0);\n      hideBuyOptions();\n      unpinTabs();\n    }\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (shouldOpenOnBuy) {\n      showBuyOptions();\n      return;\n    }\n\n    hideBuyOptions();\n  }, [shouldOpenOnBuy]);\n\n  const tosText = useMemo(() => {\n    if (!isOpen) return undefined;\n\n    const text = oldLang('lng_credits_summary_options_about');\n    const parts = text.split('{link}');\n    return [\n      parts[0],\n      <SafeLink url={oldLang('StarsTOSLink')} text={oldLang('lng_credits_summary_options_about_link')} />,\n      parts[1],\n    ];\n  }, [isOpen, oldLang]);\n\n  const renderStarsHeaderSection = () => {\n    return (\n      <>\n        <ParticlesHeader\n          model=\"swaying-star\"\n          color=\"gold\"\n          title={starsNeeded ? oldLang('StarsNeededTitle', ongoingTransactionAmount) : oldLang('TelegramStars')}\n          description={renderText(\n            starsNeededText || oldLang('TelegramStarsInfo'),\n            ['simple_markdown', 'emoji'],\n          )}\n          isDisabled={!isOpen}\n        />\n        {canBuyPremium && !areBuyOptionsShown && (\n          <Button\n            className={styles.starButton}\n            onClick={showBuyOptions}\n            fluid\n          >\n            {oldLang('Star.List.BuyMoreStars')}\n          </Button>\n        )}\n        {canBuyPremium && !areBuyOptionsShown && shouldSuggestGifting && (\n          <Button\n            isText\n            noForcedUpperCase\n            className={styles.starButton}\n            fluid\n            onClick={openStarsGiftingPickerModalHandler}\n          >\n            {oldLang('TelegramStarsGift')}\n          </Button>\n        )}\n        {areBuyOptionsShown && starsBalanceState?.topupOptions && (\n          <StarTopupOptionList\n            starsNeeded={starsNeeded}\n            options={starsBalanceState.topupOptions}\n            onClick={handleBuyStars}\n          />\n        )}\n      </>\n    );\n  };\n\n  const renderTonHeaderSection = () => {\n    const tonAmount = convertCurrencyFromBaseUnit(balance?.amount || 0, TON_CURRENCY_CODE);\n    return (\n      <>\n        <ParticlesHeader\n          model=\"speeding-diamond\"\n          color=\"blue\"\n          title={lang('CurrencyTon')}\n          description={lang('DescriptionAboutTon')}\n          isDisabled={!isOpen}\n        />\n        <div className={styles.tonBalanceContainer}>\n          <div className={styles.tonBalance}>\n            <Icon name=\"toncoin\" className={styles.tonIconBalance} />\n            {tonAmount}\n          </div>\n          {Boolean(tonUsdRate) && (\n            <span className={styles.tonInUsd}>\n              {` ${formatCurrencyAsString(\n                convertTonToUsd(balance?.amount || 0, tonUsdRate, true),\n                'USD',\n                lang.code,\n              )}`}\n            </span>\n          )}\n        </div>\n        <Button\n          className={styles.topUpButton}\n          onClick={handleTonTopUp}\n          fluid\n        >\n          {lang('ButtonTopUpViaFragment')}\n        </Button>\n\n        {currency === TON_CURRENCY_CODE && (\n          <div className={styles.hint}>\n            {lang('TonModalHint')}\n          </div>\n        )}\n      </>\n    );\n  };\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop } = e.currentTarget;\n\n    setHeaderHidden(scrollTop <= 150);\n\n    if (tabsRef.current) {\n      const { top: tabsTop } = tabsRef.current.getBoundingClientRect();\n      const { top: scrollerTop } = e.currentTarget.getBoundingClientRect();\n      const isPinned = tabsTop - scrollerTop <= HEADER_HEIGHT;\n      if (isPinned) {\n        pinTabs();\n      } else {\n        unpinTabs();\n      }\n    }\n  }\n\n  const handleLoadMoreTransactions = useLastCallback(() => {\n    loadStarsTransactions({\n      type: TRANSACTION_TYPES[selectedTabIndex],\n      isTon: currency === TON_CURRENCY_CODE,\n    });\n  });\n\n  const handleLoadMoreSubscriptions = useLastCallback(() => {\n    loadStarsSubscriptions();\n  });\n\n  const openStarsGiftingPickerModalHandler = useLastCallback(() => {\n    openStarsGiftingPickerModal({});\n  });\n\n  const handleBuyStars = useLastCallback((option: ApiStarTopupOption) => {\n    const originPaymentInputInvoice = originStarsPayment?.inputInvoice;\n\n    let spendPurposePeerId: string | undefined;\n\n    switch (originPaymentInputInvoice?.type) {\n      case 'message': {\n        spendPurposePeerId = originPaymentInputInvoice.chatId;\n        break;\n      }\n\n      case 'slug': {\n        const form = originStarsPayment?.form;\n        spendPurposePeerId = form?.botId;\n        break;\n      }\n    }\n\n    if (originReaction) {\n      spendPurposePeerId = originReaction.chatId;\n    }\n\n    openInvoice({\n      type: 'stars',\n      stars: option.stars,\n      currency: option.currency,\n      amount: option.amount,\n      spendPurposePeerId,\n    });\n  });\n\n  const handleTonTopUp = useLastCallback(() => {\n    openUrl({ url: tonTopupUrl });\n  });\n\n  return (\n    <Modal\n      className={buildClassName(styles.root, !shouldForceHeight && !areBuyOptionsShown && styles.minimal)}\n      isOpen={isOpen}\n      onClose={closeStarsBalanceModal}\n      dialogStyle={`--modal-height: ${modalHeight}`}\n      hasAbsoluteCloseButton\n    >\n      <div className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        {currency !== TON_CURRENCY_CODE && <BalanceBlock balance={balance} className={styles.modalBalance} />}\n        <div\n          className={buildClassName(\n            styles.header, isHeaderHidden && styles.hiddenHeader, areTabsPinned && styles.noSeparator,\n          )}\n        >\n          <h2 className={styles.starHeaderText}>\n            {oldLang('TelegramStars')}\n          </h2>\n        </div>\n        <div className={styles.section}>\n          {currency === TON_CURRENCY_CODE ? renderTonHeaderSection() : renderStarsHeaderSection()}\n        </div>\n        {areBuyOptionsShown && (\n          <div className={styles.tos}>\n            {tosText}\n          </div>\n        )}\n        {shouldShowItems && Boolean(subscriptions?.list.length) && (\n          <div className={styles.section}>\n            <h3 className={styles.sectionTitle}>{oldLang('StarMySubscriptions')}</h3>\n            <div className={styles.subscriptions}>\n              {subscriptions?.list.map((subscription) => (\n                <StarsSubscriptionItem\n                  key={subscription.id}\n                  subscription={subscription}\n                />\n              ))}\n              {subscriptions?.nextOffset && (\n                <Button\n                  isText\n                  disabled={subscriptions.isLoading}\n                  size=\"smaller\"\n                  noForcedUpperCase\n                  className={styles.loadMore}\n                  onClick={handleLoadMoreSubscriptions}\n                >\n                  <Icon name=\"down\" className={styles.loadMoreIcon} />\n                  {oldLang('StarMySubscriptionsExpand')}\n                </Button>\n              )}\n            </div>\n          </div>\n        )}\n        {shouldShowItems && (\n          <div className={styles.container}>\n            <div className={styles.lastSection}>\n              <Transition\n                name={resolveTransitionName('slideOptimized', animationLevel, undefined, lang.isRtl)}\n                activeKey={selectedTabIndex}\n                renderCount={TRANSACTION_TABS_KEYS.length}\n                shouldRestoreHeight\n                className={styles.transition}\n              >\n                <InfiniteScroll\n                  onLoadMore={handleLoadMoreTransactions}\n                  items={history?.[TRANSACTION_TYPES[selectedTabIndex]]?.transactions}\n                  scrollContainerClosest={`.${styles.main}`}\n                  itemSelector={`.${TRANSACTION_ITEM_CLASS}`}\n                  className={styles.transactions}\n                  noFastList\n                  noScrollRestoreOnTop\n                >\n                  {history?.[TRANSACTION_TYPES[selectedTabIndex]]?.transactions.map((transaction) => (\n                    <StarsTransactionItem\n                      key={`${transaction.id}-${transaction.isRefund}`}\n                      transaction={transaction}\n                      className={TRANSACTION_ITEM_CLASS}\n                    />\n                  ))}\n                </InfiniteScroll>\n              </Transition>\n            </div>\n            <TabList\n              ref={tabsRef}\n              className={styles.tabs}\n              tabClassName={styles.tab}\n              activeTab={selectedTabIndex}\n              tabs={transactionTabs}\n              onSwitchTab={setSelectedTabIndex}\n            />\n          </div>\n        )}\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const shouldForceHeight = modal?.currency === TON_CURRENCY_CODE\n      ? Boolean(global.ton?.history?.all?.transactions.length)\n      : Boolean(global.stars?.history?.all?.transactions.length);\n\n    return {\n      shouldForceHeight,\n      starsBalanceState: global.stars,\n      tonBalanceState: global.ton,\n      canBuyPremium: !selectIsPremiumPurchaseBlocked(global),\n      tonUsdRate: global.appConfig.tonUsdRate,\n      tonTopupUrl: global.appConfig.tonTopupUrl,\n      animationLevel: selectSharedSettings(global).animationLevel,\n    };\n  },\n)(StarsBalanceModal));\n","import { memo, useEffect, useMemo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat, ApiMediaExtendedPreview, ApiMessage, ApiUser,\n} from '../../../api/types';\nimport type { GlobalState, TabState } from '../../../global/types';\n\nimport { getChatTitle, getCustomPeerFromInvite, getUserFullName } from '../../../global/helpers';\nimport {\n  selectChat, selectChatMessage, selectUser,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\nimport { formatInteger } from '../../../util/textFormat';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\nimport usePrevious from '../../../hooks/usePrevious';\n\nimport Avatar from '../../common/Avatar';\nimport StarIcon from '../../common/icons/StarIcon';\nimport PeerBadge from '../../common/PeerBadge';\nimport PeerChip from '../../common/PeerChip';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport BalanceBlock from './BalanceBlock';\nimport PaidMediaThumb from './transaction/PaidMediaThumb';\n\nimport styles from './StarsBalanceModal.module.scss';\n\nimport StarsBackground from '../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsPayment'];\n};\n\ntype StateProps = {\n  starsBalanceState?: GlobalState['stars'];\n  bot?: ApiUser;\n  paidMediaMessage?: ApiMessage;\n  paidMediaChat?: ApiChat;\n};\n\nconst StarPaymentModal = ({\n  modal,\n  bot,\n  starsBalanceState,\n  paidMediaMessage,\n  paidMediaChat,\n}: OwnProps & StateProps) => {\n  const { closeStarsPaymentModal, openStarsBalanceModal, sendStarPaymentForm } = getActions();\n  const [isLoading, markLoading, unmarkLoading] = useFlag();\n  const isOpen = Boolean(modal?.inputInvoice && starsBalanceState);\n\n  const prevModal = usePrevious(modal);\n  const renderingModal = modal || prevModal;\n\n  const { form, subscriptionInfo } = renderingModal || {};\n  const amount = form?.invoice?.totalAmount || subscriptionInfo?.subscriptionPricing?.amount;\n  const isBotSubscription = Boolean(form?.invoice.subscriptionPeriod);\n  const canShowPeerItem = !subscriptionInfo?.subscriptionPricing;\n\n  const photo = form?.photo;\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  useEffect(() => {\n    if (!isOpen) {\n      unmarkLoading();\n    }\n  }, [isOpen]);\n\n  const descriptionText = useMemo(() => {\n    if (!renderingModal?.inputInvoice) {\n      return '';\n    }\n\n    const botName = getUserFullName(bot);\n    const starsText = oldLang('Stars.Intro.PurchasedText.Stars', amount);\n\n    if (paidMediaMessage) {\n      const extendedMedia = paidMediaMessage.content.paidMedia!.extendedMedia as ApiMediaExtendedPreview[];\n      const areAllPhotos = extendedMedia.every((media) => !media.duration);\n      const areAllVideos = extendedMedia.every((media) => Boolean(media.duration));\n\n      const mediaText = areAllPhotos ? oldLang('Stars.Transfer.Photos', extendedMedia.length)\n        : areAllVideos ? oldLang('Stars.Transfer.Videos', extendedMedia.length)\n          : oldLang('Media', extendedMedia.length);\n\n      const channelTitle = getChatTitle(oldLang, paidMediaChat!);\n      return oldLang('Stars.Transfer.UnlockInfo', [mediaText, channelTitle, starsText]);\n    }\n\n    if (subscriptionInfo) {\n      return lang('StarsSubscribeText', {\n        chat: subscriptionInfo.title,\n        amount,\n      }, {\n        withNodes: true,\n        withMarkdown: true,\n        pluralValue: amount!,\n      });\n    }\n\n    if (isBotSubscription) {\n      return lang('StarsSubscribeBotText', {\n        name: form.title,\n        amount,\n        bot: botName,\n      }, {\n        pluralValue: amount!,\n      });\n    }\n\n    return oldLang('Stars.Transfer.Info', [form!.title, botName, starsText]);\n  }, [\n    renderingModal?.inputInvoice, bot, oldLang, amount, paidMediaMessage, subscriptionInfo, isBotSubscription, form,\n    paidMediaChat, lang,\n  ]);\n\n  const disclaimerText = useMemo(() => {\n    if (subscriptionInfo) {\n      return lang('StarsSubscribeInfo', {\n        link: <SafeLink url={lang('StarsSubscribeInfoLink')} text={lang('StarsSubscribeInfoLinkText')} />,\n      }, {\n        withNodes: true,\n      });\n    }\n\n    return undefined;\n  }, [subscriptionInfo, lang]);\n\n  const inviteCustomPeer = useMemo(() => {\n    if (!subscriptionInfo) {\n      return undefined;\n    }\n\n    return getCustomPeerFromInvite(subscriptionInfo);\n  }, [subscriptionInfo]);\n\n  const handlePayment = useLastCallback(() => {\n    const balance = starsBalanceState?.balance;\n    if (amount === undefined || balance === undefined) {\n      return;\n    }\n\n    if (amount > balance.amount) {\n      openStarsBalanceModal({\n        originStarsPayment: modal,\n      });\n      return;\n    }\n\n    sendStarPaymentForm({});\n    markLoading();\n  });\n\n  return (\n    <Modal\n      contentClassName={styles.paymentContent}\n      isOpen={isOpen}\n      hasAbsoluteCloseButton\n      isSlim\n      onClose={closeStarsPaymentModal}\n    >\n      <BalanceBlock balance={starsBalanceState?.balance} className={styles.modalBalance} />\n      <div className={styles.paymentImages} dir={lang.isRtl ? 'ltr' : 'rtl'}>\n        {paidMediaMessage ? (\n          <PaidMediaThumb media={paidMediaMessage.content.paidMedia!.extendedMedia} />\n        ) : inviteCustomPeer ? (\n          <>\n            <Avatar className={styles.paymentPhoto} peer={inviteCustomPeer} size=\"giant\" />\n            <StarIcon type=\"gold\" size=\"adaptive\" className={styles.avatarStar} />\n          </>\n        ) : (\n          <PeerBadge\n            peer={!photo ? bot : undefined}\n            avatarWebPhoto={photo}\n            avatarSize=\"giant\"\n            badgeIcon=\"star\"\n            badgeText={formatInteger(amount!)}\n            badgeClassName={styles.amountBadge}\n            className={styles.paymentPhoto}\n          />\n        )}\n        <img className={styles.paymentImageBackground} src={StarsBackground} alt=\"\" draggable={false} />\n      </div>\n      <h2 className={styles.headerText}>\n        {inviteCustomPeer ? oldLang('StarsSubscribeTitle') : oldLang('StarsConfirmPurchaseTitle')}\n      </h2>\n      {canShowPeerItem && <PeerChip className={styles.botItem} peerId={form?.botId} />}\n      <div className={styles.description}>\n        {renderText(descriptionText, ['simple_markdown', 'emoji'])}\n      </div>\n      <Button className={styles.paymentButton} onClick={handlePayment} isLoading={isLoading}>\n        {lang(isBotSubscription ? 'StarsSubscribeBotButtonMonth' : 'StarsPay', {\n          amount: formatStarsAsIcon(lang, amount!, { asFont: true }),\n        }, {\n          withNodes: true,\n        })}\n      </Button>\n      {Boolean(disclaimerText) && (\n        <div className={buildClassName(styles.disclaimer, styles.smallerText)}>\n          {disclaimerText}\n        </div>\n      )}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const bot = modal?.form?.botId ? selectUser(global, modal.form.botId) : undefined;\n\n    const messageInputInvoice = modal?.inputInvoice?.type === 'message' ? modal.inputInvoice : undefined;\n    const message = messageInputInvoice\n      ? selectChatMessage(global, messageInputInvoice.chatId, messageInputInvoice.messageId) : undefined;\n    const chat = messageInputInvoice ? selectChat(global, messageInputInvoice.chatId) : undefined;\n    const isPaidMedia = message?.content.paidMedia;\n\n    return {\n      bot,\n      starsBalanceState: global.stars,\n      paidMediaMessage: isPaidMedia ? message : undefined,\n      paidMediaChat: isPaidMedia ? chat : undefined,\n    };\n  },\n)(StarPaymentModal));\n","import { memo, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiUser } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectUser } from '../../../../global/selectors';\nimport { formatStarsAsText } from '../../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Checkbox from '../../../ui/Checkbox';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  modal: TabState['chatRefundModal'];\n};\n\ntype StateProps = {\n  user?: ApiUser;\n};\n\nconst ChatRefundModal = ({ modal, user }: OwnProps & StateProps) => {\n  const { closeChatRefundModal, toggleNoPaidMessagesException } = getActions();\n\n  const [shouldRefundStars, setShouldRefundStars] = useState(false);\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingUser = useCurrentOrPrev(user);\n\n  const { starsToRefund, userId } = renderingModal || {};\n\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n\n  const handleConfirmRemoveFee = useLastCallback(() => {\n    closeChatRefundModal();\n    if (!userId) return;\n\n    toggleNoPaidMessagesException ({ userId, shouldRefundCharged: shouldRefundStars });\n  });\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      onClose={closeChatRefundModal}\n      title={lang('RemoveFeeTitle')}\n      confirmLabel={lang('ConfirmRemoveMessageFee')}\n      confirmHandler={handleConfirmRemoveFee}\n    >\n      {lang('ConfirmDialogMessageRemoveFee', {\n        peer: renderingUser && getPeerTitle(lang, renderingUser),\n      }, {\n        withMarkdown: true,\n        withNodes: true,\n      })}\n      {\n        Boolean(starsToRefund) && (\n          <Checkbox\n            className=\"dialog-checkbox\"\n            label={lang('ConfirmDialogRemoveFeeRefundStars', {\n              amount: formatStarsAsText(lang, starsToRefund),\n            }, {\n              withMarkdown: true,\n              withNodes: true,\n            })}\n            checked={shouldRefundStars}\n            onCheck={setShouldRefundStars}\n          />\n        )\n      }\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n  const user = modal?.userId ? selectUser(global, modal.userId) : undefined;\n\n  return {\n    user,\n  };\n})(ChatRefundModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"MFXAwnxJ\",\"content\":\"Sl6xVf1R\",\"main\":\"bTN9Jeph\",\"headerInfo\":\"c6MiyJgW\",\"logo\":\"StGLWvzb\",\"logoBackground\":\"SyTXSfml\",\"description\":\"kFe3mIZo\",\"section\":\"BgfHkWd2\",\"header\":\"zMtAGfXs\",\"starHeaderText\":\"q3v8orGj\",\"hiddenHeader\":\"bq3FnXT0\",\"closeButton\":\"bDsDTkbe\",\"avatar\":\"jK36xUj4\",\"center\":\"v1PckUQn\",\"secondaryInfo\":\"TDWSRfP9\"};","import type { FC } from '../../../../lib/teact/teact';\nimport type React from '../../../../lib/teact/teact';\nimport {\n  memo, useEffect, useMemo, useRef,\n  useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiStarTopupOption, ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport {\n  selectUser,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport renderText from '../../../common/helpers/renderText';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport Avatar from '../../../common/Avatar';\nimport SafeLink from '../../../common/SafeLink';\nimport Modal from '../../../ui/Modal';\nimport StarTopupOptionList from '../StarTopupOptionList';\n\nimport styles from './StarsGiftModal.module.scss';\n\nimport StarLogo from '../../../../assets/icons/GoldStar.svg';\nimport StarsBackground from '../../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsGiftModal'];\n};\n\ntype StateProps = {\n  user?: ApiUser;\n};\n\nconst AVATAR_SIZE = 100;\n\nconst StarsGiftModal: FC<OwnProps & StateProps> = ({\n  modal,\n  user,\n}) => {\n  const {\n    closeStarsGiftModal, openInvoice, requestConfetti,\n  } = getActions();\n  const dialogRef = useRef<HTMLDivElement>();\n\n  const isOpen = Boolean(modal?.isOpen);\n\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const oldLang = useOldLang();\n\n  const [selectedOption, setSelectedOption] = useState<ApiStarTopupOption | undefined>();\n  const [isHeaderHidden, setHeaderHidden] = useState(true);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setHeaderHidden(true);\n    }\n  }, [isOpen]);\n\n  const showConfetti = useLastCallback(() => {\n    const dialog = dialogRef.current;\n    if (!dialog) return;\n    if (isOpen) {\n      const {\n        top, left, width, height,\n      } = dialog.querySelector('.modal-content')!.getBoundingClientRect();\n      requestConfetti({\n        top,\n        left,\n        width,\n        height,\n        withStars: true,\n      });\n    }\n  });\n\n  useEffect(() => {\n    if (renderingModal?.isCompleted) {\n      showConfetti();\n    }\n  }, [renderingModal, showConfetti]);\n\n  const handleClick = useLastCallback((option: ApiStarTopupOption) => {\n    if (!renderingModal) return;\n\n    setSelectedOption(option);\n    if (user) {\n      openInvoice({\n        type: 'starsgift',\n        userId: user.id,\n        stars: option.stars,\n        currency: option.currency,\n        amount: option.amount,\n      });\n    } else {\n      openInvoice({\n        type: 'stars',\n        stars: option.stars,\n        currency: option.currency,\n        amount: option.amount,\n      });\n    }\n  });\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop } = e.currentTarget;\n\n    setHeaderHidden(scrollTop <= 150);\n  }\n\n  const handleClose = useLastCallback(() => {\n    closeStarsGiftModal();\n  });\n\n  function renderGiftTitle() {\n    if (renderingModal?.isCompleted) {\n      return user ? renderText(oldLang('Notification.StarsGift.SentYou',\n        formatCurrencyAsString(selectedOption!.amount, selectedOption!.currency, oldLang.code)), ['simple_markdown'])\n        : renderText(oldLang('StarsAcquiredInfo', selectedOption?.stars), ['simple_markdown']);\n    }\n\n    return user ? oldLang('GiftStarsTitle') : oldLang('Star.List.GetStars');\n  }\n\n  const bottomText = useMemo(() => {\n    const text = oldLang('lng_credits_summary_options_about');\n    const parts = text.split('{link}');\n    return [\n      parts[0],\n      <SafeLink\n        url={oldLang('StarsTOSLink')}\n        text={oldLang('lng_credits_summary_options_about_link')}\n      />,\n      parts[1],\n    ];\n  }, [oldLang]);\n\n  return (\n    <Modal\n      className={buildClassName(styles.modalDialog)}\n      contentClassName={styles.content}\n      dialogRef={dialogRef}\n      isSlim\n      onClose={handleClose}\n      isOpen={isOpen}\n      hasAbsoluteCloseButton\n    >\n      <div className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <div className={buildClassName(styles.header, isHeaderHidden && styles.hiddenHeader)}>\n          <h2 className={styles.starHeaderText}>\n            {user ? oldLang('GiftStarsTitle') : oldLang('Star.List.GetStars')}\n          </h2>\n        </div>\n        <div className={styles.headerInfo}>\n          {user ? (\n            <>\n              <Avatar\n                size={AVATAR_SIZE}\n                peer={user}\n                className={styles.avatar}\n              />\n              <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n            </>\n          ) : (\n            <>\n              <img className={styles.logo} src={StarLogo} alt=\"\" draggable={false} />\n              <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n            </>\n          )}\n        </div>\n        <h2 className={buildClassName(styles.headerText, styles.center)}>\n          {renderGiftTitle()}\n        </h2>\n        <p className={styles.description}>\n          {user ? renderText(\n            oldLang('ActionGiftStarsSubtitle', getPeerTitle(oldLang, user)), ['simple_markdown'],\n          ) : oldLang('Stars.Purchase.GetStarsInfo')}\n        </p>\n        <div className={styles.section}>\n          <StarTopupOptionList\n            options={renderingModal?.starsGiftOptions}\n            onClick={handleClick}\n          />\n          <div className={styles.secondaryInfo}>\n            {bottomText}\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n  const user = modal?.forUserId ? selectUser(global, modal.forUserId) : undefined;\n\n  return {\n    user,\n  };\n})(StarsGiftModal));\n","import type { ApiStarsTransaction, ApiTypeCurrencyAmount } from '../../../../api/types';\nimport type { OldLangFn } from '../../../../hooks/useOldLang';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../../config';\nimport { buildStarsTransactionCustomPeer, shouldUseCustomPeer } from '../../../../global/helpers/payments';\nimport {\n  type LangFn,\n} from '../../../../util/localization';\nimport { formatPercent } from '../../../../util/textFormat';\n\nexport function getTransactionTitle(oldLang: OldLangFn, lang: LangFn, transaction: ApiStarsTransaction) {\n  if (transaction.paidMessages) {\n    return lang(\n      'PaidMessageTransaction',\n      { count: transaction.paidMessages },\n      {\n        withNodes: true,\n        pluralValue: transaction.paidMessages,\n      },\n    );\n  }\n\n  if (transaction.isGiftResale) {\n    return isNegativeAmount(transaction.amount)\n      ? lang('StarGiftSaleTransaction')\n      : lang('StarGiftPurchaseTransaction');\n  }\n  if (transaction.isPostsSearch) {\n    return lang('PostsSearchTransaction');\n  }\n\n  if (transaction.isDropOriginalDetails) {\n    return lang('DropOriginalDetailsTransaction');\n  }\n\n  if (transaction.isPrepaidUpgrade) {\n    return lang('GiftPrepaidUpgradeTransactionTitle');\n  }\n\n  if (transaction.isStarGiftAuctionBid) {\n    return isNegativeAmount(transaction.amount)\n      ? lang('StarGiftAuctionBidTransaction')\n      : lang('StarGiftAuctionBidRefundedTransaction');\n  }\n\n  if (transaction.starRefCommision) {\n    return oldLang('StarTransactionCommission', formatPercent(transaction.starRefCommision));\n  }\n  if (transaction.isGiftUpgrade) return oldLang('Gift2TransactionUpgraded');\n  if (transaction.extendedMedia) return oldLang('StarMediaPurchase');\n  if (transaction.subscriptionPeriod) return transaction.title || oldLang('StarSubscriptionPurchase');\n  if (transaction.isReaction) return oldLang('StarsReactionsSent');\n  if (transaction.giveawayPostId) return oldLang('StarsGiveawayPrizeReceived');\n  if (transaction.isMyGift) return oldLang('StarsGiftSent');\n  if (transaction.isGift) {\n    if (transaction.amount.currency === TON_CURRENCY_CODE) {\n      return lang('TonGiftReceived');\n    }\n    return oldLang('StarsGiftReceived');\n  }\n  if (transaction.starGift) {\n    return isNegativeAmount(transaction.amount) ? oldLang('Gift2TransactionSent') : oldLang('Gift2ConvertedTitle');\n  }\n\n  const customPeer = (transaction.peer && shouldUseCustomPeer(transaction)\n    && buildStarsTransactionCustomPeer(transaction)) || undefined;\n\n  if (customPeer) return customPeer.title || oldLang(customPeer.titleKey!);\n\n  return transaction.title;\n}\n\nexport function isNegativeAmount(currencyAmount: ApiTypeCurrencyAmount) {\n  if (currencyAmount.currency === STARS_CURRENCY_CODE) {\n    if (currencyAmount.amount) return currencyAmount.amount < 0;\n    return currencyAmount.nanos < 0;\n  }\n  return currencyAmount.amount < 0;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ZXnbeQxP\",\"info\":\"zLaaDX3c\",\"status\":\"HbF2qTB2\",\"statusPricing\":\"AveGvpdV\",\"amount\":\"_CBiOQcv\",\"title\":\"k9ZIv5Pd\",\"description\":\"FlRlxMx2\",\"subtitle\":\"YN2J8dw6\",\"statusPeriod\":\"MRrP7Oew\",\"statusEnded\":\"pRHwfr8m\",\"preview\":\"t6Syyhzd\",\"subscriptionStar\":\"ftlbevPm\"};","import { memo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type {\n  ApiStarsSubscription,\n} from '../../../../api/types';\nimport type { GlobalState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { formatDateToString } from '../../../../util/dates/dateFormat';\nimport { formatInteger } from '../../../../util/textFormat';\nimport renderText from '../../../common/helpers/renderText';\n\nimport useSelector from '../../../../hooks/data/useSelector';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\n\nimport styles from './StarsSubscriptionItem.module.scss';\n\ntype OwnProps = {\n  subscription: ApiStarsSubscription;\n};\n\nfunction selectProvidedPeer(peerId: string) {\n  return (global: GlobalState) => (\n    selectPeer(global, peerId)\n  );\n}\n\nconst StarsSubscriptionItem = ({ subscription }: OwnProps) => {\n  const { openStarsSubscriptionModal } = getActions();\n  const {\n    peerId, pricing, until, isCancelled, title, photo,\n  } = subscription;\n  const lang = useOldLang();\n\n  const peer = useSelector(selectProvidedPeer(peerId))!;\n\n  const handleClick = useLastCallback(() => {\n    openStarsSubscriptionModal({ subscription });\n  });\n\n  if (!peer) {\n    return undefined;\n  }\n\n  const hasExpired = until < Date.now() / 1000;\n  const formattedDate = formatDateToString(until * 1000, lang.code, true, 'long');\n\n  return (\n    <div className={styles.root} onClick={handleClick}>\n      <div className={styles.preview}>\n        <Avatar size=\"medium\" peer={peer} />\n        <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"small\" />\n      </div>\n      <div className={styles.info}>\n        <h3 className={styles.title}>{renderText(getPeerTitle(lang, peer) || '')}</h3>\n        {title && (\n          <p className={styles.subtitle}>\n            {photo && <Avatar webPhoto={photo} size=\"micro\" />}\n            {renderText(title)}\n          </p>\n        )}\n        <p className={styles.description}>\n          {lang(\n            hasExpired ? 'StarsSubscriptionExpired'\n              : isCancelled ? 'StarsSubscriptionExpires' : 'StarsSubscriptionRenews',\n            formattedDate,\n          )}\n        </p>\n      </div>\n      <div className={styles.status}>\n        {(isCancelled || hasExpired) ? (\n          <div className={styles.statusEnded}>\n            {lang(hasExpired ? 'StarsSubscriptionStatusExpired' : 'StarsSubscriptionStatusCancelled')}\n          </div>\n        ) : (\n          <>\n            <div className={styles.statusPricing}>\n              <StarIcon className={styles.star} type=\"gold\" size=\"adaptive\" />\n              <span className={styles.amount}>\n                {formatInteger(pricing.amount)}\n              </span>\n            </div>\n            <div className={styles.statusPeriod}>{lang('StarsParticipantSubscriptionPerMonth')}</div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(StarsSubscriptionItem);\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"eR_RZfGB\",\"header\":\"E3R22yAI\",\"title\":\"qdydQHgc\",\"amount\":\"FI6rEJlK\",\"footer\":\"GMWMuWCr\",\"starsBackground\":\"zGCayu45\",\"subscriptionStar\":\"enRetSny\",\"amountStar\":\"J8HIcN6k\",\"secondary\":\"oBLHWBtJ\",\"danger\":\"nkwiG25Q\",\"avatarWrapper\":\"wuTMXDP9\"};","import type { FC } from '../../../../lib/teact/teact';\nimport { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../../../config';\nimport { isApiPeerUser } from '../../../../global/helpers/peers';\nimport {\n  selectPeer,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\nimport usePrevious from '../../../../hooks/usePrevious';\n\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport InteractiveSparkles from '../../../common/InteractiveSparkles';\nimport SafeLink from '../../../common/SafeLink';\nimport Button from '../../../ui/Button';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\n\nimport styles from './StarsSubscriptionModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['starsSubscriptionModal'];\n};\n\ntype StateProps = {\n  peer?: ApiPeer;\n};\n\nconst AVATAR_SPARKLES_CENTER_SHIFT = [0, -50] as const;\n\nconst StarsSubscriptionModal: FC<OwnProps & StateProps> = ({\n  modal, peer,\n}) => {\n  const {\n    closeStarsSubscriptionModal,\n    fulfillStarsSubscription,\n    changeStarsSubscription,\n    checkChatInvite,\n    loadStarStatus,\n    openInvoice,\n  } = getActions();\n  const oldLang = useOldLang();\n  const lang = useLang();\n  const { subscription } = modal || {};\n  const triggerSparklesRef = useRef<(() => void) | undefined>();\n\n  const handleAvatarMouseMove = useLastCallback(() => {\n    triggerSparklesRef.current?.();\n  });\n\n  const handleRequestAnimation = useLastCallback((animate: NoneToVoidFunction) => {\n    triggerSparklesRef.current = animate;\n  });\n\n  const buttonState = useMemo(() => {\n    if (!subscription) {\n      return 'hidden';\n    }\n\n    if (subscription.canRefulfill) {\n      return 'refulfill';\n    }\n\n    const isActive = subscription.until > Date.now() / 1000;\n    if (isActive && !subscription.isCancelled) {\n      return 'cancel';\n    }\n\n    if (isActive && subscription.isCancelled) {\n      return 'renew';\n    }\n\n    const canRestart = subscription.chatInviteHash || subscription.invoiceSlug;\n    if (!isActive && canRestart) {\n      return 'restart';\n    }\n\n    return 'ok';\n  }, [subscription]);\n\n  const handleButtonClick = useLastCallback(() => {\n    if (!subscription) {\n      return;\n    }\n\n    switch (buttonState) {\n      case 'refulfill': {\n        fulfillStarsSubscription({ id: subscription.id });\n        break;\n      }\n      case 'restart': {\n        if (subscription.chatInviteHash) {\n          checkChatInvite({ hash: subscription.chatInviteHash });\n        } else if (subscription.invoiceSlug) {\n          openInvoice({\n            type: 'slug',\n            slug: subscription.invoiceSlug,\n          });\n        }\n        loadStarStatus();\n        break;\n      }\n      case 'renew': {\n        changeStarsSubscription({ id: subscription.id, isCancelled: false });\n        break;\n      }\n      case 'cancel': {\n        changeStarsSubscription({ id: subscription.id, isCancelled: true });\n        break;\n      }\n    }\n    closeStarsSubscriptionModal();\n  });\n\n  const starModalData = useMemo(() => {\n    if (!subscription || !peer) {\n      return undefined;\n    }\n\n    const {\n      pricing, until, isCancelled, canRefulfill, photo, title, hasBotCancelled,\n    } = subscription;\n\n    const isBotSubscription = isApiPeerUser(peer);\n\n    const header = (\n      <div className={styles.header}>\n        <div className={styles.avatarWrapper}>\n          <Avatar\n            peer={!photo ? peer : undefined}\n            webPhoto={photo}\n            size=\"giant\"\n            onMouseMove={handleAvatarMouseMove}\n          />\n          <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"adaptive\" />\n        </div>\n        <InteractiveSparkles\n          className={buildClassName(styles.starsBackground)}\n          color=\"gold\"\n          onRequestAnimation={handleRequestAnimation}\n          centerShift={AVATAR_SPARKLES_CENTER_SHIFT}\n        />\n        <h1 className={styles.title}>{title || oldLang('StarsSubscriptionTitle')}</h1>\n        <p className={styles.amount}>\n          {lang('StarsPerMonth', {\n            amount: pricing.amount,\n          }, {\n            withNodes: true,\n            specialReplacement: {\n              [STARS_ICON_PLACEHOLDER]: <StarIcon className={styles.amountStar} size=\"adaptive\" type=\"gold\" />,\n            },\n          })}\n        </p>\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    tableData.push([\n      oldLang(isBotSubscription ? 'StarsSubscriptionBot' : 'StarsSubscriptionChannel'),\n      { chatId: peer.id },\n    ]);\n\n    if (title) {\n      tableData.push([\n        oldLang('StarsSubscriptionBotProduct'),\n        title,\n      ]);\n    }\n\n    const hasExpired = until < Date.now() / 1000;\n    tableData.push([\n      oldLang(hasExpired ? 'StarsSubscriptionUntilExpired'\n        : isCancelled ? 'StarsSubscriptionUntilExpires' : 'StarsSubscriptionUntilRenews'),\n      formatDateTimeToString(until * 1000, oldLang.code, true),\n    ]);\n\n    const footerTos = lang('StarsTransactionTOS', {\n      link: <SafeLink url={lang('StarsTransactionTOSLink')} text={lang('StarsTransactionTOSLinkText')} />,\n    }, {\n      withNodes: true,\n    });\n\n    const footer = (\n      <span className={styles.footer}>\n        <p className={styles.secondary}>{footerTos}</p>\n        {isCancelled && (\n          <p className={styles.danger}>\n            {oldLang(hasBotCancelled ? 'StarsSubscriptionBotCancelledText' : 'StarsSubscriptionCancelledText')}\n          </p>\n        )}\n        {canRefulfill && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionRefulfillInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {!isCancelled && !canRefulfill && hasExpired && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionExpiredInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {!isCancelled && !canRefulfill && !hasExpired && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionCancelInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {buttonState !== 'hidden' && (\n          <Button\n            color={buttonState === 'cancel' ? 'danger' : 'primary'}\n            isText={buttonState === 'cancel'}\n            onClick={handleButtonClick}\n          >\n            {oldLang(\n              buttonState === 'cancel' ? 'StarsSubscriptionCancel'\n                : buttonState === 'refulfill' ? 'StarsSubscriptionRefulfill'\n                  : buttonState === 'restart' ? 'StarsSubscriptionAgain'\n                    : buttonState === 'renew' ? 'StarsSubscriptionRenew' : 'OK',\n            )}\n          </Button>\n        )}\n      </span>\n    );\n\n    return {\n      header,\n      tableData,\n      footer,\n    };\n  }, [buttonState, lang, oldLang, peer, subscription]);\n\n  const prevModalData = usePrevious(starModalData);\n  const renderingModalData = prevModalData || starModalData;\n\n  return (\n    <TableInfoModal\n      isOpen={Boolean(subscription)}\n      className={styles.modal}\n      header={renderingModalData?.header}\n      tableData={renderingModalData?.tableData}\n      footer={renderingModalData?.footer}\n      onClose={closeStarsSubscriptionModal}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const peerId = modal?.subscription.peerId;\n    const peer = peerId ? selectPeer(global, peerId) : undefined;\n\n    return {\n      peer,\n    };\n  },\n)(StarsSubscriptionModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"jQkp75Gb\",\"preview\":\"OYGSN3PF\",\"count\":\"KX1yz2Jy\",\"thumb\":\"EvinKr5k\",\"noOutline\":\"KSAAsUDv\",\"itemCount1\":\"GxDajfX_\",\"itemCount2\":\"jXuZoxq8\",\"itemCount3\":\"TPn3XGHJ\",\"blurry\":\"hWZuxLS8\",\"full\":\"w56QPFhl\",\"fadeIn\":\"ds43W8Wq\"};","import { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiMediaExtendedPreview, BoughtPaidMedia } from '../../../../api/types';\n\nimport { getMediaHash, getMediaThumbUri } from '../../../../global/helpers';\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useMedia from '../../../../hooks/useMedia';\n\nimport Icon from '../../../common/icons/Icon';\nimport MediaSpoiler from '../../../common/MediaSpoiler';\n\nimport styles from './PaidMediaThumb.module.scss';\n\ntype OwnProps = {\n  className?: string;\n  media: ApiMediaExtendedPreview[] | BoughtPaidMedia[];\n  isTransactionPreview?: boolean;\n  onClick?: NoneToVoidFunction;\n};\n\nconst THUMB_LIMIT = 3;\nconst PREVIEW_THUMB_LIMIT = 2;\n\nconst PaidMediaThumb = ({\n  media, className, isTransactionPreview, onClick,\n}: OwnProps) => {\n  const count = Math.min(media.length, isTransactionPreview ? PREVIEW_THUMB_LIMIT : THUMB_LIMIT);\n  const isLocked = 'mediaType' in media[0];\n  return (\n    <div\n      className={buildClassName(\n        styles.root,\n        styles[`itemCount${count}`],\n        isTransactionPreview && styles.preview,\n        className,\n      )}\n      dir=\"rtl\"\n      onClick={onClick}\n    >\n      {media.slice(0, count).reverse().map((item, i, arr) => {\n        const realIndex = arr.length - i - 1;\n        return 'mediaType' in item ? (\n          <MediaSpoiler\n            className={styles.thumb}\n            isVisible\n            width={item.width}\n            height={item.height}\n            thumbDataUri={item.thumbnail?.dataUri}\n          />\n        ) : (\n          <SingleMediaThumb\n            className={buildClassName(isTransactionPreview && realIndex > 0 && styles.noOutline)}\n            boughtMedia={item}\n            index={realIndex}\n          />\n        );\n      })}\n      {isLocked && (\n        <div className={styles.count}>\n          <Icon name=\"stars-lock\" />\n          {media.length > 1 ? media.length : ''}\n        </div>\n      )}\n    </div>\n  );\n};\n\nfunction SingleMediaThumb({\n  boughtMedia,\n  index,\n  className,\n}: {\n  boughtMedia: BoughtPaidMedia;\n  index?: number;\n  className?: string;\n}) {\n  const media = (boughtMedia.video || boughtMedia.photo)!;\n  const mediaHash = getMediaHash(media, 'pictogram');\n  const thumb = getMediaThumbUri(media);\n\n  const mediaBlob = useMedia(mediaHash);\n\n  return (\n    <div className={buildClassName(styles.thumb, index !== undefined && `stars-transaction-media-${index}`, className)}>\n      {thumb && <img className={styles.blurry} src={thumb} alt=\"\" />}\n      {mediaBlob && <img className={styles.full} src={mediaBlob} alt=\"\" />}\n    </div>\n  );\n}\n\nexport default memo(PaidMediaThumb);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"aHAxv_Jg\",\"info\":\"oyYrn3II\",\"stars\":\"K5lc75ku\",\"amount\":\"QLQPuLAr\",\"title\":\"e0pK8CJ_\",\"description\":\"xbERdDMQ\",\"date\":\"l6CwQ0Ev\",\"positive\":\"P_42_ZWR\",\"negative\":\"TGjnLJfH\",\"preview\":\"cnjGihOT\",\"subscriptionStar\":\"z43YvnDX\",\"uniqueGiftBackground\":\"eNvzMw2p\",\"giftSticker\":\"U3dqmnM4\"};","import { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarsTransaction,\n} from '../../../../api/types';\nimport type { GlobalState } from '../../../../global/types';\nimport type { CustomPeer } from '../../../../types';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../../config';\nimport { buildStarsTransactionCustomPeer,\n  formatStarsTransactionAmount,\n  shouldUseCustomPeer } from '../../../../global/helpers/payments';\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { CUSTOM_PEER_PREMIUM } from '../../../../util/objects/customPeer';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport renderText from '../../../common/helpers/renderText';\nimport { getTransactionTitle, isNegativeAmount } from '../helpers/transaction';\n\nimport useSelector from '../../../../hooks/data/useSelector';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport PaidMediaThumb from './PaidMediaThumb';\n\nimport styles from './StarsTransactionItem.module.scss';\n\ntype OwnProps = {\n  transaction: ApiStarsTransaction;\n  className?: string;\n};\n\nconst GIFT_STICKER_SIZE = 36;\n\nfunction selectOptionalPeer(peerId?: string) {\n  return (global: GlobalState) => (\n    peerId ? selectPeer(global, peerId) : undefined\n  );\n}\n\nconst StarsTransactionItem = ({ transaction, className }: OwnProps) => {\n  const { openStarsTransactionModal } = getActions();\n  const {\n    date,\n    amount,\n    photo,\n    peer: transactionPeer,\n    extendedMedia,\n    subscriptionPeriod,\n  } = transaction;\n  const lang = useLang();\n  const oldLang = useOldLang();\n\n  const peerId = transactionPeer.type === 'peer' ? transactionPeer.id : undefined;\n  const peer = useSelector(selectOptionalPeer(peerId));\n  const starGift = transaction.starGift;\n  const isUniqueGift = starGift?.type === 'starGiftUnique';\n  const giftSticker = starGift && getStickerFromGift(starGift);\n\n  const data = useMemo(() => {\n    let title = getTransactionTitle(oldLang, lang, transaction);\n    let description;\n    let status: string | undefined;\n    let avatarPeer: ApiPeer | CustomPeer | undefined;\n\n    if (!shouldUseCustomPeer(transaction)) {\n      description = peer && getPeerTitle(oldLang, peer);\n      avatarPeer = peer || CUSTOM_PEER_PREMIUM;\n    } else {\n      const customPeer = buildStarsTransactionCustomPeer(transaction);\n      title = customPeer.title || oldLang(customPeer.titleKey!);\n      description = oldLang(customPeer.subtitleKey!);\n      avatarPeer = customPeer;\n    }\n\n    if ((transaction.isGiftUpgrade || transaction.isDropOriginalDetails)\n      && transaction.starGift?.type === 'starGiftUnique') {\n      description = lang('GiftUnique', { title: transaction.starGift.title, number: transaction.starGift.number });\n    }\n\n    if (transaction.isGiftResale && transaction.starGift?.type === 'starGiftUnique') {\n      description = lang('GiftUnique', { title: transaction.starGift.title, number: transaction.starGift.number });\n    }\n\n    if (transaction.isPostsSearch) {\n      title = getTransactionTitle(oldLang, lang, transaction);\n      description = undefined;\n    }\n\n    if (transaction.photo) {\n      avatarPeer = undefined;\n    }\n\n    if (transaction.isRefund) {\n      status = oldLang('StarsRefunded');\n    }\n\n    if (transaction.hasFailed) {\n      status = oldLang('StarsFailed');\n    }\n\n    if (transaction.isPending) {\n      status = oldLang('StarsPending');\n    }\n\n    return {\n      title,\n      description,\n      avatarPeer,\n      status,\n    };\n  }, [oldLang, lang, peer, transaction]);\n\n  const previewContent = useMemo(() => {\n    if (isUniqueGift) {\n      const { backdrop } = getGiftAttributes(starGift)!;\n      const backgroundColors = [backdrop!.centerColor, backdrop!.edgeColor];\n\n      return (\n        <>\n          <RadialPatternBackground\n            className={styles.uniqueGiftBackground}\n            backgroundColors={backgroundColors}\n          />\n          <AnimatedIconFromSticker\n            className={styles.giftSticker}\n            sticker={giftSticker}\n            size={GIFT_STICKER_SIZE}\n            play={false}\n          />\n        </>\n      );\n    }\n\n    if (giftSticker) {\n      return (\n        <AnimatedIconFromSticker\n          className={styles.giftSticker}\n          sticker={giftSticker}\n          size={GIFT_STICKER_SIZE}\n          play={false}\n        />\n      );\n    }\n\n    if (extendedMedia) {\n      return <PaidMediaThumb media={extendedMedia} isTransactionPreview />;\n    }\n\n    return (\n      <>\n        <Avatar size=\"medium\" webPhoto={photo} peer={data.avatarPeer} />\n        {Boolean(subscriptionPeriod) && (\n          <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"small\" />\n        )}\n      </>\n    );\n  }, [isUniqueGift, extendedMedia, photo, data.avatarPeer, subscriptionPeriod, starGift, giftSticker]);\n\n  const handleClick = useLastCallback(() => {\n    openStarsTransactionModal({ transaction });\n  });\n\n  const amountColorClass = isNegativeAmount(amount) ? styles.negative : styles.positive;\n\n  return (\n    <div className={buildClassName(styles.root, className)} onClick={handleClick}>\n      <div className={styles.preview}>\n        {previewContent}\n      </div>\n      <div className={styles.info}>\n        <h3 className={styles.title}>{data.title}</h3>\n        {data.description && (\n          <p className={styles.description}>{renderText(data.description)}</p>\n        )}\n        <p className={styles.date}>\n          {formatDateTimeToString(date * 1000, oldLang.code, true)}\n          {data.status && `  (${data.status})`}\n        </p>\n      </div>\n      <div className={styles.stars}>\n        <span\n          className={buildClassName(styles.amount, amountColorClass)}\n        >\n          {formatStarsTransactionAmount(lang, amount)}\n        </span>\n        {amount.currency === STARS_CURRENCY_CODE && <StarIcon className={styles.star} type=\"gold\" size=\"adaptive\" />}\n        {amount.currency === TON_CURRENCY_CODE && <Icon name=\"toncoin\" className={amountColorClass} />}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(StarsTransactionItem);\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"IzhfRIWu\",\"positive\":\"jvBZSrpd\",\"negative\":\"xDyq9cc0\",\"header\":\"qBOIq6Jn\",\"uniqueGift\":\"ApoQz22o\",\"amount\":\"sso9uZM6\",\"title\":\"ZZAj3hj7\",\"description\":\"NuWOY7ED\",\"tid\":\"tMF8VIOM\",\"refunded\":\"sxWAwxTd\",\"totalStars\":\"Z2YALGgl\",\"starIcon\":\"cU5QlvwL\",\"footer\":\"KgzPpgS6\",\"starsBackground\":\"nML8IQqX\",\"copyIcon\":\"voCttFzS\",\"mediaPreview\":\"C5r59yiV\",\"subtitle\":\"mFYcIYMJ\",\"starGiftSticker\":\"j3akHdtm\",\"avatar\":\"hcrszlpT\"};","import type { FC } from '../../../../lib/teact/teact';\nimport { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarsTransactionPeer, ApiSticker,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport { MediaViewerOrigin } from '../../../../types';\n\nimport { STARS_CURRENCY_CODE } from '../../../../config';\nimport { getMessageLink } from '../../../../global/helpers';\nimport {\n  buildStarsTransactionCustomPeer,\n  formatStarsTransactionAmount,\n  shouldUseCustomPeer,\n} from '../../../../global/helpers/payments';\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectGiftStickerForStars,\n  selectGiftStickerForTon,\n  selectPeer,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { formatPercent } from '../../../../util/textFormat';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport { getTransactionTitle, isNegativeAmount } from '../helpers/transaction';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\nimport usePrevious from '../../../../hooks/usePrevious';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport InteractiveSparkles from '../../../common/InteractiveSparkles';\nimport SafeLink from '../../../common/SafeLink';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\nimport UniqueGiftHeader from '../../gift/UniqueGiftHeader';\nimport PaidMediaThumb from './PaidMediaThumb';\n\nimport styles from './StarsTransactionModal.module.scss';\n\nconst AVATAR_SPARKLES_CENTER_SHIFT = [0, -50] as const;\n\nexport type OwnProps = {\n  modal: TabState['starsTransactionModal'];\n};\n\ntype StateProps = {\n  peer?: ApiPeer;\n  canPlayAnimatedEmojis?: boolean;\n  topSticker?: ApiSticker;\n  paidMessageCommission?: number;\n};\n\nconst StarsTransactionModal: FC<OwnProps & StateProps> = ({\n  modal,\n  peer,\n  canPlayAnimatedEmojis,\n  topSticker,\n  paidMessageCommission,\n}) => {\n  const { showNotification, openMediaViewer, closeStarsTransactionModal } = getActions();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n  const { transaction } = modal || {};\n  const triggerSparklesRef = useRef<(() => void) | undefined>();\n\n  const handleOpenMedia = useLastCallback(() => {\n    const media = transaction?.extendedMedia;\n    if (!media) return;\n\n    openMediaViewer({\n      origin: MediaViewerOrigin.StarsTransaction,\n      standaloneMedia: media.flatMap((item) => Object.values(item)),\n    });\n  });\n\n  const handleAvatarMouseMove = useLastCallback(() => {\n    triggerSparklesRef.current?.();\n  });\n\n  const handleRequestAnimation = useLastCallback((animate: NoneToVoidFunction) => {\n    triggerSparklesRef.current = animate;\n  });\n\n  const starModalData = useMemo(() => {\n    if (!transaction) {\n      return undefined;\n    }\n\n    const {\n      giveawayPostId, photo, amount, isGiftUpgrade, isDropOriginalDetails, starGift, isGiftResale,\n      starRefCommision,\n    } = transaction;\n\n    const gift = transaction?.starGift;\n    const isUniqueGift = gift?.type === 'starGiftUnique';\n    const sticker = transaction?.starGift ? getStickerFromGift(transaction.starGift) : topSticker;\n\n    const giftAttributes = isUniqueGift ? getGiftAttributes(gift) : undefined;\n\n    const customPeer = (transaction.peer && shouldUseCustomPeer(transaction)\n      && buildStarsTransactionCustomPeer(transaction)) || undefined;\n\n    const peerId = transaction.peer?.type === 'peer' ? transaction.peer.id : undefined;\n    const toName = transaction.peer && oldLang(getStarsPeerTitleKey(transaction.peer));\n\n    const title = getTransactionTitle(oldLang, lang, transaction);\n\n    const messageLink = peer && transaction.messageId && !isGiftUpgrade && !isDropOriginalDetails\n      ? getMessageLink(peer, undefined, transaction.messageId) : undefined;\n    const giveawayMessageLink = peer && giveawayPostId ? getMessageLink(peer, undefined, giveawayPostId) : undefined;\n\n    const media = transaction.extendedMedia;\n\n    const mediaAmount = media?.length || 0;\n    const areAllPhotos = media?.every((m) => !m.video);\n    const areAllVideos = media?.every((m) => !m.photo);\n\n    const mediaText = areAllPhotos ? oldLang('Stars.Transfer.Photos', mediaAmount)\n      : areAllVideos ? oldLang('Stars.Transfer.Videos', mediaAmount)\n        : oldLang('Media', mediaAmount);\n\n    const description = transaction.description\n      || ((isGiftUpgrade || isDropOriginalDetails) && starGift?.type === 'starGiftUnique' ? starGift.title : undefined)\n      || (media ? mediaText : undefined);\n\n    const shouldDisplayAvatar = !media && !sticker && !transaction.isPostsSearch;\n    const avatarPeer = !photo ? ((!shouldUseCustomPeer(transaction) && peer) || customPeer) : undefined;\n\n    const uniqueGiftHeader = isUniqueGift && (\n      <div className={buildClassName(styles.header, styles.uniqueGift)}>\n        <UniqueGiftHeader\n          backdropAttribute={giftAttributes!.backdrop!}\n          patternAttribute={giftAttributes!.pattern!}\n          modelAttribute={giftAttributes!.model!}\n          title={gift.title}\n          subtitle={lang('GiftInfoCollectible', { number: gift.number })}\n          resellPrice={transaction.amount}\n        />\n      </div>\n    );\n\n    const amountColorClass = isNegativeAmount(amount) ? styles.negative : styles.positive;\n\n    const regularHeader = (\n      <div className={styles.header}>\n        {media && (\n          <PaidMediaThumb\n            className={buildClassName(styles.mediaPreview, 'transaction-media-preview')}\n            media={media}\n            onClick={handleOpenMedia}\n          />\n        )}\n        {!media && sticker && (\n          <AnimatedIconFromSticker\n            key={transaction.id}\n            sticker={sticker}\n            play={canPlayAnimatedEmojis}\n            noLoop\n          />\n        )}\n        {shouldDisplayAvatar && (\n          <Avatar\n            className={styles.avatar}\n            peer={avatarPeer}\n            webPhoto={photo}\n            size=\"giant\"\n            onMouseMove={handleAvatarMouseMove}\n          />\n        )}\n        {!sticker && !transaction.isPostsSearch && (\n          <InteractiveSparkles\n            className={buildClassName(styles.starsBackground)}\n            color=\"gold\"\n            onRequestAnimation={handleRequestAnimation}\n            centerShift={AVATAR_SPARKLES_CENTER_SHIFT}\n          />\n        )}\n        {Boolean(title) && <h1 className={styles.title}>{title}</h1>}\n        <p className={styles.description}>{description}</p>\n        <p className={styles.amount}>\n          <span\n            className={buildClassName(styles.amount, amountColorClass)}\n          >\n            {formatStarsTransactionAmount(lang, amount)}\n          </span>\n          {amount.currency === STARS_CURRENCY_CODE && <StarIcon type=\"gold\" size=\"middle\" />}\n          {amount.currency === 'TON' && <Icon name=\"toncoin\" className={amountColorClass} />}\n          {transaction.isRefund && (\n            <p className={styles.refunded}>{lang('Refunded')}</p>\n          )}\n        </p>\n        {Boolean(transaction.paidMessages && transaction.starRefCommision && paidMessageCommission) && (\n          <p className={styles.description}>\n            {lang(\n              'PaidMessageTransactionDescription',\n              { percent: formatPercent(paidMessageCommission! / 10) },\n              {\n                withNodes: true,\n                withMarkdown: true,\n              },\n            )}\n          </p>\n        )}\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    if (transaction && starRefCommision && !transaction.paidMessages && !isGiftResale) {\n      tableData.push([\n        oldLang('StarsTransaction.StarRefReason.Title'),\n        oldLang('StarsTransaction.StarRefReason.Program'),\n      ]);\n    }\n\n    if (isGiftUpgrade) {\n      tableData.push([\n        oldLang('StarGiftReason'),\n        oldLang('StarGiftReasonUpgrade'),\n      ]);\n    }\n\n    if (isDropOriginalDetails) {\n      tableData.push([\n        oldLang('StarGiftReason'),\n        lang('StarGiftReasonDropOriginalDetails'),\n      ]);\n    }\n\n    if (isGiftResale) {\n      tableData.push([\n        oldLang('StarGiftReason'),\n        isNegativeAmount(transaction.amount)\n          ? lang('StarGiftSaleTransaction')\n          : lang('StarGiftPurchaseTransaction'),\n      ]);\n    }\n\n    let peerLabel;\n    if (isGiftUpgrade) {\n      peerLabel = oldLang('Stars.Transaction.GiftFrom');\n    } else if (isNegativeAmount(amount) || transaction.isMyGift) {\n      peerLabel = oldLang('Stars.Transaction.To');\n    } else if (transaction.starRefCommision && !transaction.paidMessages && !isGiftResale) {\n      peerLabel = oldLang('StarsTransaction.StarRefReason.Miniapp');\n    } else if (peerId) {\n      peerLabel = oldLang('Star.Transaction.From');\n    } else {\n      peerLabel = oldLang('Stars.Transaction.Via');\n    }\n\n    if (!transaction.isPostsSearch && !isDropOriginalDetails && !transaction.isStarGiftAuctionBid) {\n      tableData.push([\n        peerLabel,\n        peerId ? { chatId: peerId } : toName || '',\n      ]);\n    }\n\n    if (transaction.starRefCommision && transaction.paidMessages) {\n      tableData.push([\n        lang('PaidMessageTransactionTotal'),\n        formatStarsAsIcon(lang,\n          transaction.amount.amount / ((100 - transaction.starRefCommision) / 100),\n          { asFont: false, className: styles.starIcon, containerClassName: styles.totalStars }),\n      ]);\n    }\n\n    if (messageLink) {\n      tableData.push([oldLang('Stars.Transaction.Reaction.Post'), <SafeLink url={messageLink} text={messageLink} />]);\n    }\n\n    if (giveawayMessageLink && transaction.amount.currency === STARS_CURRENCY_CODE) {\n      tableData.push([oldLang('BoostReason'), <SafeLink url={giveawayMessageLink} text={oldLang('Giveaway')} />]);\n      tableData.push([oldLang('Gift'), oldLang('Stars', transaction.amount, 'i')]);\n    }\n\n    if (transaction.id) {\n      tableData.push([\n        oldLang('Stars.Transaction.Id'),\n        (\n          <>\n            <div\n              className={styles.tid}\n              onClick={() => {\n                copyTextToClipboard(transaction.id!);\n                showNotification({\n                  message: oldLang('StarsTransactionIDCopied'),\n                });\n              }}\n            >\n              {transaction.id}\n            </div>\n            <Icon className={styles.copyIcon} name=\"copy\" />\n          </>\n        ),\n      ]);\n    }\n\n    tableData.push([\n      oldLang('Stars.Transaction.Date'),\n      formatDateTimeToString(transaction.date * 1000, oldLang.code, true),\n    ]);\n\n    if (transaction.isStarGiftAuctionBid && gift?.type === 'starGift' && gift.availabilityTotal) {\n      tableData.push([\n        lang('GiftInfoAvailability'),\n        lang('GiftInfoAvailabilityValue', {\n          count: gift.availabilityRemains || 0,\n          total: gift.availabilityTotal,\n        }, {\n          pluralValue: gift.availabilityRemains || 0,\n        }),\n      ]);\n    }\n\n    const footerText = oldLang('lng_credits_box_out_about');\n    const footerTextParts = footerText.split('{link}');\n\n    const footer = (\n      <span className={styles.footer}>\n        {footerTextParts[0]}\n        <SafeLink url={oldLang('StarsTOSLink')} text={oldLang('lng_credits_summary_options_about_link')} />\n        {footerTextParts[1]}\n      </span>\n    );\n\n    return {\n      header: isUniqueGift ? uniqueGiftHeader : regularHeader,\n      tableData,\n      footer,\n    };\n  }, [transaction, oldLang, lang, peer, canPlayAnimatedEmojis, topSticker,\n    paidMessageCommission, handleRequestAnimation]);\n\n  const prevModalData = usePrevious(starModalData);\n  const renderingModalData = prevModalData || starModalData;\n\n  return (\n    <TableInfoModal\n      isOpen={Boolean(transaction)}\n      className={styles.modal}\n      hasBackdrop={transaction?.starGift?.type === 'starGiftUnique'}\n      header={renderingModalData?.header}\n      tableData={renderingModalData?.tableData}\n      footer={renderingModalData?.footer}\n      buttonText={oldLang('OK')}\n      onClose={closeStarsTransactionModal}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const peerId = modal?.transaction?.peer?.type === 'peer' && modal.transaction.peer.id;\n    const peer = peerId ? selectPeer(global, peerId) : undefined;\n    const paidMessageCommission = global.appConfig.starsPaidMessageCommissionPermille;\n\n    const currencyAmount = modal?.transaction.amount;\n    const starsGiftSticker = modal?.transaction.isGift\n      ? (currencyAmount?.currency === STARS_CURRENCY_CODE ? selectGiftStickerForStars(global, currencyAmount?.amount)\n        : selectGiftStickerForTon(global, currencyAmount?.amount)) : undefined;\n\n    return {\n      peer,\n      canPlayAnimatedEmojis: selectCanPlayAnimatedEmojis(global),\n      topSticker: starsGiftSticker,\n      paidMessageCommission,\n    };\n  },\n)(StarsTransactionModal));\n\nfunction getStarsPeerTitleKey(peer: ApiStarsTransactionPeer) {\n  switch (peer.type) {\n    case 'appStore':\n      return 'AppStore';\n    case 'playMarket':\n      return 'PlayMarket';\n    case 'fragment':\n      return 'Fragment';\n    case 'premiumBot':\n      return 'StarsTransactionBot';\n    case 'ads':\n      return 'StarsTransactionAds';\n    case 'api':\n      return 'Stars.Intro.Transaction.TelegramBotApi.Subtitle';\n    default:\n      return 'Stars.Transaction.Unsupported.Title';\n  }\n}\n","import {\n  getIsHeavyAnimating, useCallback, useRef, useState,\n} from '../lib/teact/teact';\n\nimport useForceUpdate from './useForceUpdate';\nimport useHeavyAnimation from './useHeavyAnimation';\nimport useRunDebounced from './useRunDebounced';\nimport useSyncEffect from './useSyncEffect';\n\nexport default function useDebouncedMemo<R, D extends unknown[]>(\n  resolverFn: () => R, ms: number, dependencies: D,\n): R | undefined {\n  const [value, setValue] = useState<R>();\n  const { isFrozen, updateWhenUnfrozen } = useHeavyAnimationFreeze();\n  const runDebounced = useRunDebounced(ms, true);\n\n  useSyncEffect(() => {\n    if (isFrozen) {\n      updateWhenUnfrozen();\n      return;\n    }\n\n    runDebounced(() => {\n      setValue(resolverFn());\n    });\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [...dependencies, isFrozen]);\n\n  return value;\n}\n\nfunction useHeavyAnimationFreeze() {\n  const isPending = useRef(false);\n\n  const updateWhenUnfrozen = useCallback(() => {\n    isPending.current = true;\n  }, []);\n\n  const forceUpdate = useForceUpdate();\n  const handleUnfreeze = useCallback(() => {\n    if (!isPending.current) {\n      return;\n    }\n\n    isPending.current = false;\n    forceUpdate();\n  }, [forceUpdate]);\n  useHeavyAnimation(noop, handleUnfreeze);\n\n  return {\n    isFrozen: getIsHeavyAnimating(),\n    updateWhenUnfrozen,\n  };\n}\n\nfunction noop() {\n}\n","import { useState } from '../lib/teact/teact';\n\nimport type { ApiChat } from '../api/types';\n\nimport { callApi } from '../api/gramjs';\nimport useAsync from './useAsync';\nimport useDebouncedMemo from './useDebouncedMemo';\nimport useLastCallback from './useLastCallback';\n\nconst DEBOUNCE_TIMEOUT = 300;\n\nexport async function peerGlobalSearch(query: string) {\n  const searchResult = await callApi('searchChats', { query });\n  if (!searchResult) return undefined;\n\n  const ids = [...searchResult.accountResultIds, ...searchResult.globalResultIds];\n\n  return ids;\n}\n\nexport function prepareChatMemberSearch(chat: ApiChat) {\n  return async (query: string) => {\n    const searchResult = await callApi('fetchMembers', {\n      chat,\n      memberFilter: 'search',\n      query,\n    });\n\n    return searchResult?.members?.map((member) => member.userId) || [];\n  };\n}\n\nexport default function usePeerSearch({\n  query,\n  queryFn = peerGlobalSearch,\n  defaultValue,\n  debounceTimeout = DEBOUNCE_TIMEOUT,\n  isDisabled,\n}: {\n  query: string;\n  queryFn?: (query: string) => Promise<string[] | undefined>;\n  defaultValue?: string[];\n  debounceTimeout?: number;\n  isDisabled?: boolean;\n}) {\n  const debouncedQuery = useDebouncedMemo(() => query, debounceTimeout, [query]);\n  const [currentResultsQuery, setCurrentResultsQuery] = useState<string>('');\n  const searchQuery = !query ? query : debouncedQuery; // Ignore debounce if query is empty\n  const queryCallback = useLastCallback(queryFn);\n\n  const result = useAsync(async () => {\n    if (!searchQuery || isDisabled) {\n      setCurrentResultsQuery('');\n      return Promise.resolve(defaultValue);\n    }\n\n    const answer = await queryCallback(searchQuery);\n    setCurrentResultsQuery(searchQuery);\n    return answer;\n  }, [searchQuery, defaultValue, queryCallback, isDisabled], defaultValue);\n\n  return {\n    ...result,\n    currentResultsQuery,\n  };\n}\n"],"names":["default","StarsGiftModal","StarsGiftingPickerModal","StarsBalanceModal","StarPaymentModal","StarsTransactionInfoModal","StarsSubscriptionModal","PaidReactionModal","GiftModal","GiftRecipientPicker","GiftInfoModal","GiftInfoValueModal","GiftLockedModal","GiftResalePriceComposerModal","GiftUpgradeModal","GiftAuctionModal","GiftAuctionBidModal","GiftAuctionInfoModal","GiftAuctionAcquiredModal","GiftAuctionChangeRecipientModal","StarGiftPriceDecreaseInfoModal","AboutStarGiftModal","GiftStatusInfoModal","GiftWithdrawModal","GiftTransferModal","GiftTransferConfirmModal","GiftDescriptionRemoveModal","ChatRefundModal","PriceConfirmModal","memo","useMemo","getActions","DEFAULT_STATUS_ICON_ID","TME_LINK_PREFIX","STARS_CURRENCY_CODE","copyTextToClipboard","formatDateAtTime","getServerTime","useLang","useLastCallback","useOldLang","MenuItem","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","GiftMenuItems","peerId","canManage","gift","typeGift","currentUserEmojiStatus","collectibleEmojiStatuses","showNotification","openChatWithDraft","openGiftTransferModal","openGiftResalePriceComposerModal","openGiftStatusInfoModal","setEmojiStatus","toggleSavedGiftPinned","changeGiftVisibility","updateStarGiftPrice","closeGiftInfoModal","lang","oldLang","isSavedGift","savedGift","undefined","starGiftUniqueSlug","type","slug","starGiftUniqueLink","userCollectibleStatus","find","status","currenUniqueEmojiStatusSlug","isGiftUnique","canTakeOff","canWear","giftResalePrice","resellPrice","hasPinOptions","isUnsaved","handleTriggerVisibility","inputGift","shouldUnsave","handleCopyLink","message","handleLinkShare","text","handleTransfer","canTransferAt","key","variables","date","handleSell","canResellAt","handleUnsell","price","currency","amount","nanos","icon","title","number","handleWear","emojiStatus","handleTakeOff","documentId","handleTogglePin","children","isPinned","onClick","Boolean","getGiftAttributes","REM","AnimatedIconFromSticker","Avatar","Icon","RadialPatternBackground","styles","AVATAR_SIZE","GIFT_STICKER_SIZE","GiftTransferPreview","peer","giftAttributes","className","root","giftPreview","backdrop","backgroundColors","centerColor","edgeColor","patternIcon","pattern","sticker","ringsCount","ovalFactor","patternSize","size","model","name","arrow","avatar","getPeerTitle","formatDateTimeToString","renderTextWithEntities","Link","renderGiftOriginalInfo","originalDetails","recipient","sender","onOpenChat","recipientId","senderId","formattedDate","code","recipientLink","isPrimary","withNodes","senderLink","id","useState","getGlobal","withGlobal","SERVICE_NOTIFICATIONS_USER_ID","isDeletedUser","isUserBot","filterPeersByQuery","unique","sortChatIds","PeerPicker","PickerModal","isOpen","currentUserId","activeListIds","archivedListIds","userIds","closeStarsGiftingPickerModal","openStarsGiftModal","searchQuery","setSearchQuery","displayedUserIds","usersById","users","byId","combinedIds","filteredUserIds","ids","query","filter","user","isSupport","handleSelectedUserIdsChange","newSelectedId","length","forUserId","onClose","hasCloseButton","shouldAdaptToSearch","withFixedHeight","confirmButtonText","onEnter","picker","itemIds","filterValue","filterPlaceholder","onFilterChange","isSearchable","withDefaultPadding","withStatus","onSelectedIdChange","global","chats","listIds","contactList","active","archived","useCurrentOrPrev","Sparkles","PremiumFeaturePreviewVideo","Button","TableAboutModal","modal","closeAboutStarGiftModal","renderingModal","handleClose","header","videoPreviewWrapper","preset","sparkles","videoId","videoThumbnail","isActive","isDown","subtitle","footer","iconName","iconClassName","understoodIcon","listItemData","contentClassName","content","hasBackdrop","absoluteCloseButtonColor","useEffect","MAIN_THREAD_ID","isApiPeerUser","selectPeer","selectPeerPaidMessagesStars","selectTabState","selectTheme","selectThemeValues","selectUserFullInfo","buildClassName","buildStyle","formatCountdown","HOUR","formatCurrency","formatStarsAsIcon","useCustomBackground","PremiumProgress","ActionMessage","ListItem","Switcher","TextArea","TextTimer","LIMIT_DISPLAY_THRESHOLD","TEXT_TIMER_THRESHOLD","GiftComposer","giftByStars","captionLimit","theme","isBackgroundBlurred","patternColor","backgroundColor","customBackground","isPaymentFormLoading","starBalance","paidMessagesStars","areUniqueStarGiftsDisallowed","shouldDisallowLimitedStarGifts","giftAuction","sendStarGift","sendPremiumGiftByStars","openInvoice","openGiftUpgradeModal","openStarsBalanceModal","openGiftAuctionBidModal","openGiftAuctionInfoModal","openGiftAuctionChangeRecipientModal","giftMessage","setGiftMessage","shouldHideName","setShouldHideName","shouldPayForUpgrade","setShouldPayForUpgrade","shouldPayByStars","setShouldPayByStars","customBackgroundValue","isStarGift","isPremiumGift","hasPremiumByStars","isPeerUser","isSelf","localMessage","currentGift","chatId","isOutgoing","Math","floor","Date","now","action","mediaType","days","months","isNameHidden","starsToConvert","canUpgrade","alreadyPaidUpgradeStars","upgradeStars","fromId","handleGiftMessageChange","e","target","value","handleShouldHideNameChange","handleShouldPayForUpgradeChange","toggleShouldPayByStars","handleOpenUpgradePreview","giftId","handleGetMoreStars","handleLearnMoreClick","auctionGiftId","handleMainButtonClick","existingBidPeerId","userState","bidPeerId","oldPeerId","newPeerId","shouldUpgrade","userId","option","canUseStarsPayment","renderOptionsSection","symbolsLeft","optionsSection","messageInput","onChange","label","maxLength","maxLengthIndicator","toString","switcher","narrow","ripple","stars","switcherStarIcon","checked","description","link","withMarkdown","disabled","receiver","renderFooter","asFont","giftsPerRound","auctionEndDate","state","endDate","auctionTimeLeft","shouldUseTextTimer","availabilityRemains","progress","availabilityTotal","rightText","count","leftText","limited","bottomDescription","pluralValue","mainButton","isLoading","noForcedUpperCase","buttonSubtitle","time","endsAt","bgClassName","background","withTransition","customBgImage","customBgColor","blurred","actionMessageView","inert","style","threadId","appearanceOrder","spacer","isBlurred","userFullInfo","isGiftForSelf","disallowedGifts","shouldDisallowUniqueStarGifts","tabState","isAuction","giftAuctionByGiftId","balance","appConfig","starGiftMaxMessageLength","selectCanPlayAnimatedEmojis","selectGiftStickerForDuration","formatCurrencyAsString","GiftRibbon","GiftItemPremium","canPlayAnimatedEmojis","baseMonthAmount","optionByStars","handleGiftClick","perMonth","discount","ceil","renderMonths","caption","monthsDescription","container","tabIndex","role","play","noLoop","nonInteractive","buy","color","pill","fluid","starsPriceBlock","starsPriceIcon","percent","useRef","TON_CURRENCY_CODE","selectIsCurrentUserPremium","IS_TOUCH_ENV","formatTonAsIcon","getStickerFromGift","useFlag","useOnIntersect","StickerView","GiftItemStar","isResale","isCurrentUserPremium","withTransferBadge","hideBadge","noClickable","observeIntersection","openGiftInfoModal","openPremiumModal","checkCanSendGift","openGiftAuctionModal","ref","stickerRef","getPriceAmount","amounts","resaleTonOnly","tonAmount","starsAmount","isVisible","setIsVisible","isHover","markHover","unmarkHover","uniqueGift","regularGift","priceInfo","priceCurrency","resellMinStars","formattedPrice","isLimited","isSoldOut","isPremiumRequired","requirePremium","isUserLimitReached","limitedPerUser","perUserRemains","perUserTotal","isLocked","onSuccess","radialPatternBackdrop","backdropColors","radialPattern","giftNumber","lockedUntilDate","giftRibbon","entry","visible","isIntersecting","badgeContent","shouldConvertFromNanos","star","starGift","premiumRequired","auction","onMouseEnter","onMouseLeave","stickerWrapper","observeIntersectionForPlaying","observeIntersectionForLoading","containerRef","shouldLoop","shouldPreloadPreview","transferBadge","withSparkleEffect","lockIcon","getUserFullName","isApiPeerChat","throttle","useIntersectionObserver","InteractiveSparkles","SafeLink","InfiniteScroll","Modal","Transition","BalanceBlock","GiftModalResaleScreen","GiftResaleFilters","StarGiftCategoryList","INTERSECTION_THROTTLE","SCROLL_THROTTLE","AVATAR_SPARKLES_CENTER_SHIFT","CATEGORY_LIST_STICKY_TOP","runThrottledForScroll","cb","starGiftsById","starGiftIdsByCategory","myUniqueGiftsById","myUniqueGiftIds","resaleGiftsCount","areResaleGiftsLoading","selectedResaleGift","tabId","closeGiftModal","resetResaleGifts","loadResaleGifts","openGiftInMarket","closeResaleGiftsMarket","loadMyUniqueGifts","openGiftTransferConfirmModal","setGiftModalSelectedGift","dialogRef","transitionRef","giftHeaderRef","categoryListRef","scrollerRef","chat","selectedGift","shouldShowMainScreenHeader","setShouldShowMainScreenHeader","isMainScreenHeaderForStarGifts","setIsMainScreenHeaderForStarGifts","isGiftScreenHeaderForStarGifts","setIsGiftScreenHeaderForStarGifts","selectedCategory","setSelectedCategory","isCategoryListPinned","pinCategoryList","unpinCategoryList","triggerSparklesRef","areAllGiftsDisallowed","shouldDisallowPremiumGifts","disallowedGiftTypes","Object","values","every","areUnlimitedStarGiftsDisallowed","shouldDisallowUnlimitedStarGifts","areLimitedStarGiftsDisallowed","allGifts","gifts","filteredGifts","sort","prevGift","giftsByStars","mapGifts","Map","forEach","starsGift","set","baseGift","reduce","prev","observe","rootRef","throttleMs","isDisabled","isResaleScreen","isGiftScreen","shouldShowHeader","isHeaderForStarGifts","regularGiftId","handleScroll","currentTarget","scrollTop","current","top","headerTop","getBoundingClientRect","transitionTop","listTop","scrollerTop","giftPremiumDescription","url","starGiftDescription","renderTextFilters","renderGiftPremiumHeader","headerText","center","renderGiftPremiumDescription","renderStarGiftsHeader","renderStarGiftsDescription","starGiftsDescription","forPeerId","handleMyGiftClick","handleLoadMore","renderStarGifts","starGiftsContainer","items","onLoadMore","scrollContainerClosest","main","itemSelector","map","filteredGiftIds","availabilityResale","flatMap","shouldShowResale","shouldDuplicateAsResale","elements","push","renderPremiumGifts","premiumGiftsGallery","get","onCategoryChanged","category","handleCloseModal","handleCloseButtonClick","handleAvatarMouseMove","handleRequestAnimation","animate","renderMainScreen","onScroll","avatars","onMouseMove","logoBackground","centerShift","onRequestAnimation","hasMyUnique","activeKey","getCategoryKey","starGiftsTransition","isBackButton","buttonClassName","renderHeader","isFirstLoading","resaleHeaderContentContainer","resaleHeaderText","resaleHeaderDescription","commonHeaderText","isSlim","modalDialog","isLowStackPriority","closeButton","round","ariaLabel","withAddButton","resaleHeader","hiddenHeader","noBorder","slideClassName","headerSlide","transition","onGiftClick","starGifts","resaleGifts","boostPerSentGift","boostsPerSentGift","idsByCategory","myUniqueGifts","RESALE_GIFTS_LIMIT","LOCAL_TGS_URLS","useInfiniteScroll","AnimatedIconWithPreview","resellGifts","areGiftsAllLoaded","areGiftsLoading","updateIteration","updateResaleGiftsFilter","resellGiftsIds","g","hasFilter","modelAttributes","patternAttributes","backdropAttributes","handleLoadMoreResellGifts","isGiftsEmpty","viewportIds","handleResetGiftsFilter","renderNothingFoundGiftsWithFilter","notFoundGiftsRoot","tgsUrl","SearchingDuck","notFoundGiftsDescription","notFoundGiftsLink","resaleScreenRoot","resaleStarGiftsContainer","noFastList","preloadBackwards","isAllLoaded","useCallback","useContextMenuHandlers","Menu","SearchInput","ResaleGiftMenuAttributeSticker","attributes","counters","searchModelQuery","setSearchModelQuery","searchBackdropQuery","setSearchBackdropQuery","searchPatternQuery","setSearchPatternQuery","filteredAttributes","counter","attribute","found","attr","backdropId","filteredAndSearchedAttributes","filterBySearch","trim","item","toLowerCase","includes","sortMenuRef","isContextMenuOpen","isSortContextMenuOpen","contextMenuAnchor","sortContextMenuAnchor","handleContextMenu","handleSortContextMenu","handleContextMenuClose","handleSortContextMenuClose","handleContextMenuHide","handleSortContextMenuHide","getSortMenuElement","modelMenuRef","isModelContextMenuOpen","modelContextMenuAnchor","handleModelContextMenu","handleModelContextMenuClose","handleModelContextMenuHide","getModelMenuElement","backdropMenuRef","isBackdropContextMenuOpen","backdropContextMenuAnchor","handleBackdropContextMenu","handleBackdropContextMenuClose","handleBackdropContextMenuHide","getBackdropMenuElement","patternMenuRef","isPatternContextMenuOpen","patternContextMenuAnchor","handlePatternContextMenu","handlePatternContextMenuClose","handlePatternContextMenuHide","getPatternMenuElement","SortMenuButton","sortType","onTrigger","isMenuOpen","itemIcon","ModelMenuButton","attributesCount","BackdropMenuButton","PatternMenuButton","handleSortMenuItemClick","handleSelectedAllModelsClick","handleSelectedAllPatternsClick","handleSelectedAllBackdropsClick","handleModelMenuItemClick","modelAttribute","some","updatedAttributes","handlePatternMenuItemClick","patternAttribute","handleBackdropMenuItemClick","backdropAttribute","renderSortMenuItems","menuItemText","menuItemIcon","renderSortMenu","anchor","menu","left","getMenuElement","autoClose","onCloseAnimationEnd","positionX","handleSearchModelInputReset","handleSearchBackdropInputReset","handleSearchPatternInputReset","handleSearchInputClick","stopPropagation","preventDefault","modelMenuItemsContainerRef","renderModelMenuItems","models","selectedAttributes","isSelectedAll","menuContentContainer","search","onReset","placeholder","isSelected","menuItemStickerText","renderModelMenu","renderBackdropMenuItems","backdrops","backdropAttributeMenuItemText","renderBackdropMenu","right","renderPatternMenuItems","patterns","renderPatternMenu","buttonsContainer","useDynamicColorListener","ATTRIBUTE_STICKER_SIZE","customColor","thumbClassName","thumb","useHorizontalScroll","externalRef","hasCollectible","collectible","handleItemClick","renderCategoryName","renderCategoryItem","selectedItem","list","pinned","formatStarsAsText","TableInfoModal","closeStarGiftPriceDecreaseInfoModal","tableData","prices","containerClassName","starIconContainer","footerText","currentPrice","minPrice","maxPrice","floatingBadgeText","floatingBadgeIcon","isInverted","shouldSkipGradient","headerTitle","headerHint","tableClassName","table","formatStarsTransactionAmount","useTransitionActiveKey","useAppLayout","StarIcon","UniqueGiftManageButtons","STICKER_SIZE","UniqueGiftHeader","badge","subtitlePeer","showManageButtons","openChat","isMobile","isGiftHover","markGiftHover","unmarkGiftHover","subtitleColor","textColor","canvasClassName","radialPatternCanvas","yPosition","maxRadius","withManageButtons","withBadge","transitionSlide","direction","subtitleBadge","selectUser","giftInfoModal","currentUniqueEmojiStatusSlug","handleUnlist","manageButtons","iconAlignment","manageButton","currentUser","statuses","useScrollNotch","BadgeButton","TableInfo","acquiredGifts","giftTitle","giftSticker","closeGiftAuctionAcquiredModal","renderingGifts","renderingGiftTitle","renderingGiftSticker","giftItems","giftHeader","bidValue","bidAmount","starIcon","position","giftsCount","selector","giftsList","isBottomNotch","isCondensedHeader","giftsListContainer","okButton","giftAuctionAcquiredModal","renderText","AnimatedCounter","FullNameTitle","ConfirmDialog","InputText","StarSlider","DEFAULT_BID_AMOUNT","MAX_BID_AMOUNT_STEP","MAX_CUSTOM_BID_AMOUNT","BID_ROUNDING_STEP","MIN_SLIDER_PROGRESS","DEFAULT_TOP_BIDDERS_COUNT","auctionState","currentUserPeer","topBidderIds","closeGiftAuctionBidModal","sendStarGiftAuctionBid","loadGiftAuction","renderingAuctionState","renderingTopBidderIds","renderingTopBidderPeers","topBidder1","topBidder2","topBidder3","topBidder1Key","topBidder2Key","topBidder3Key","activeState","selectedBidAmount","setSelectedBidAmount","isCustomBidModalOpen","openCustomBidModal","closeCustomBidModal","customBidValue","setCustomBidValue","baseMinBid","minBidAmount","currentMinBid","sliderMaxValue","nextRoundAt","bidDifference","isAtMaxValue","sliderSecondaryText","handleAmountChange","handleTimerEnd","handleRequestCustomValue","handleBadgeClick","handleCustomBidChange","replace","numValue","Number","handleCustomBidSubmit","resultValue","isUpdateBid","handleSubmit","userPosition","bidLevels","userBidDate","bidDate","MAX_SAFE_INTEGER","level","pos","renderInfoCards","infoCards","infoCard","infoCardValue","infoCardLabel","shouldShowZeroOnEnd","onEnd","giftsLeft","isWinning","renderCurrentBidSectionTitle","nextGiftNum","lastGiftNum","sectionTitleTransition","bidderInfoSlide","winningStatus","winningText","winningBadge","sectionTitle","renderUserBid","section","bidderRow","bidderPosition","bidderInfo","bidderName","bidderAmount","renderTopBidderRow","index","emoji","topBidderRow","topBidderPosition","renderTopWinners","topCount","hasAbsoluteCloseButton","headerControlPanel","modalBalance","slider","defaultValue","minValue","minAllowedValue","minAllowedProgress","maxValue","floatingBadgeDescription","onBadgeClick","onCustomValueClick","shouldUseDynamicColor","shouldAllowCustomValue","buttonStar","confirmLabel","isConfirmDisabled","confirmHandler","customBidInput","customBidInputIcon","inputMode","teactExperimentControlled","giftAuctionBidModal","topBidders","oldPeer","newPeer","closeGiftAuctionChangeRecipientModal","renderingOldPeer","renderingNewPeer","handleConfirm","preview","closeGiftAuctionInfoModal","iconWrapper","giftAuctionInfoModal","getRandomGiftPreviewAttributes","preloadGiftAttributeStickers","useInterval","PREVIEW_UPDATE_INTERVAL","closeGiftAuctionModal","openGiftAuctionAcquiredModal","openAboutStarGiftModal","openUrl","isFinished","previewAttributes","setPreviewAttributes","shouldUseUniqueHeader","uniqueHeaderRef","updatePreviewAttributes","sampleAttributes","handleLearnMoreAboutGiftsClick","handleItemsBoughtClick","handleJoinClick","shouldKeepAuction","auctionLink","auctionSlug","handleShareLink","handleOpenFragment","fragmentListedUrl","handleOpenTelegramMarket","uniqueHeader","learnMoreLink","regularHeader","finishedBadge","giftName","modalData","startDate","total","currentRound","totalRounds","averagePrice","acquiredCount","canBuyOnFragment","fragmentListedCount","canBuyOnTelegram","listedCount","itemsBoughtLink","itemsBoughtSticker","footerButton","moreMenuItems","modalContent","closeButtonColor","giftAuctionModal","getHasAdminRight","getMainUsername","formatTonAsText","CUSTOM_PEER_HIDDEN","formatPercent","Checkbox","fromPeer","targetPeer","releasedByPeer","starGiftMaxConvertPeriod","hasAdminRights","tonExplorerUrl","recipientPeer","convertGiftToStars","openChatWithInfo","focusMessage","buyStarGift","openGiftInfoValueModal","openGiftDescriptionRemoveModal","isConvertConfirmOpen","openConvertConfirm","closeConvertConfirm","isConfirmModalOpen","setIsConfirmModalOpen","shouldPayInTon","setShouldPayInTon","uniqueGiftHeaderRef","handleSymbolClick","handleBackdropClick","handleModelClick","renderingFromPeer","renderingTargetPeer","isTargetChat","isSender","canConvertDifference","conversionLeft","hasConvertOption","giftSubtitle","releasedByUsername","ownerTitle","fallbackText","owner","selfCollectibleStatus","isSelfUnique","canFocusUpgrade","upgradeMsgId","ownerId","getResalePrice","isInTon","confirmPrice","resellPriceInStars","canBuyGift","giftOwnerTitle","ownerName","handleFocusUpgraded","giftChat","messageId","handleConvertToStars","handleRemoveMessage","dropOriginalDetailsStars","details","handleOpenUpgradeModal","giftOwnerId","handleBuyGift","closeConfirmModal","handleConfirmBuyGift","handleOpenValueModal","renderFooterButton","buyButton","footerHint","isShiny","upgradeIcon","prepaidUpgradeHash","saleDateInfo","firstSaleDate","lastSaleDate","isConverted","canConvert","isVisibleForMe","isWarningDescription","isRefunded","getTitle","uniqueGiftModalHeader","modalHeader","giftResalePriceContainer","giftResalePriceStar","uniqueGiftHeader","warningDescription","hasFrom","unknown","titleKey","starsValue","giftValue","starAmountIcon","ownerAddress","ownerPeer","copyIcon","withEmojiStatus","uniqueAttribute","attributeName","rarityPercent","issued","issuedCount","totalCount","valueAmount","valueCurrency","uniqueValue","messageContainer","removeMessageButton","tonLink","giftAddress","footerDescription","shouldSkipModal","withBalanceBar","currencyInBalanceBar","noDefaultTitle","descriptionConfirm","titleConfirm","checkBox","onCheck","checkBoxDescription","releasedByPeerId","formatShortDuration","closeLockedGiftModal","getMessageText","untilDate","timeRemaining","relativeDate","reason","headerClassName","senderPeer","closeGiftDescriptionRemoveModal","removeGiftDescription","renderingSenderPeer","renderingRecipientPeer","openChatHandler","confirmText","giftDescription","selectCanGift","closeGiftRecipientPicker","openGiftModal","idsWithSelf","concat","filteredPeerIds","selectedId","forceShowSelf","convertTonFromNanos","convertTonToNanos","convertTonToUsd","starsStargiftResaleCommissionPermille","starsStargiftResaleAmountMin","starsStargiftResaleAmountMax","starsUsdWithdrawRate","tonStargiftResaleCommissionPermille","tonStargiftResaleAmountMin","tonStargiftResaleAmountMax","tonUsdRate","closeGiftResalePriceComposerModal","setPrice","isPriceInTon","setIsPriceInTon","hasPrice","handleChangePrice","parseFloat","maxAmount","result","isNaN","min","handleSellGift","commission","minAmount","isPriceCorrect","inputPrice","inputPriceDescription","priceWithCommission","toFixed","descriptionPrice","configPermille","starsUsdWithdrawRateX1000","tonConfigPermille","maxTonFromConfig","useCustomEmoji","closeGiftStatusInfoModal","patternDocumentId","onWearClick","customEmoji","mockPeerWithStatus","profileBlock","userTitle","noFake","noVerified","infoDescription","selectedPeer","closeGiftTransferConfirmModal","transferGift","closeGiftTransferModal","renderingSelectedPeer","transferStars","ALL_FOLDER_ID","MEMO_EMPTY_ARRAY","useFolderManagerForOrderedIds","usePeerSearch","contactIds","openGiftWithdrawModal","orderedChatIds","sortedLocalIds","foundIds","currentResultsQuery","categories","isCustomPeer","avatarIcon","peerColorId","handleCategoryChange","displayIds","handlePeerSelect","ignoreFreeze","onSelectedCategoryChange","withPeerUsernames","noScrollRestore","closeGiftUpgradeModal","upgradeGift","upgradePrepaidGift","openStarGiftPriceDecreaseInfoModal","shiftGiftUpgradeNextPrice","renderingRecipient","shouldKeepOriginalDetails","setShouldKeepOriginalDetails","isPrepaid","nextPrice","nextPrices","nextPriceDate","currentUpgradeStars","handleUpgrade","hash","handleOpenPriceInfo","formattedPriceElement","userName","hasPriceDecreaseInfo","buttonContent","priceDecreaseTimer","timer","formatDateToString","HEADER_STICKER_SIZE","FOOTER_STICKER_SIZE","closeGiftInfoValueModal","valueInfo","initialSaleDate","initialPrice","initialSaleStars","initialSalePrice","lastSalePrice","floorPrice","hasFooter","isText","footerSticker","SettingsScreens","getDays","PasswordForm","FRAGMENT_PEER","customPeerAvatarColor","hasPassword","passwordHint","closeGiftWithdrawModal","clearGiftWithdrawError","processStarGiftWithdrawal","openSettingsScreen","shouldShowPassword","setShouldShowPassword","exportDelay","canExportAt","max","password","handleSetUpPassword","screen","TwoFaDisabled","exportHint","noPassword","shouldShowSubmit","error","errorKey","withRegular","onClearError","hint","isPasswordVisible","shouldResetValue","onChangePasswordVisibility","submitLabel","onSubmit","settings","byKey","twoFaSettings","STARS_ICON_PLACEHOLDER","selectChat","selectChatMessage","formatInteger","PeerBadge","DropdownMenu","Separator","MAX_TOP_REACTORS","DEFAULT_STARS_AMOUNT","MAX_REACTION_AMOUNT","ANONYMOUS_PEER","defaultPrivacy","sendPaidReactionsAsPeerIds","closePaidReactionModal","addLocalPaidReaction","loadSendPaidReactionsAs","setStarsAmount","isTouched","markTouched","unmarkTouched","shouldSendAsAnonymous","setShouldSendAsAnonymous","sendAsPeerId","setSendAsPeerId","handleShowInTopSendersChange","filteredMyReactorIds","unshift","canChangeSendAsPeer","currentReactor","reactions","topReactors","reactor","isMy","isAnonymous","handleSend","isPrivate","shouldIgnoreDefaultPrivacy","handleSendAsPeerChange","renderMenuItem","itemInfo","itemTitle","itemSubtitle","SendAsPeerMenuButton","sendAsPeerMenuButton","sendAsPeerButtonAvatar","buttonDownIcon","sendAsPeersMenu","sendAsPeerMenu","bubbleClassName","sendAsPeerMenuBubble","trigger","all","hasCurrentSender","myReactorAmount","isCurrentReactor","localAmount","a","b","slice","chatTitle","sendAsPeersMenuContainer","topLabel","countText","topPeer","badgeText","badgeIcon","badgeClassName","topBadge","separator","specialReplacement","disclaimer","paidReactionMaxAmount","paidReactionPrivacy","usePrevious","useResizeObserver","DEFAULT_POINTS","LARGE_STEP","THUMB_SIZE","CORNER_BEAK_WIDTH","DEFAULT_BEAK_WIDTH","BEAK_HEIGHT","BEAK_OFFSET_END","TIP_OFFSET_END","BEAK_TIP_PADDING","BADGE_HORIZONTAL_PADDING","BADGE_ICON_SIZE","BADGE_TITLE_GAP","DRAG_DISTANCE_THRESHOLD","BADGE_WIDTH_DELTA","textMeasureCanvas","getTextWidth","font","document","createElement","ctx","getContext","measureText","width","SLIDER_COLORS","getColorForProgress","minValueProp","floatingBadgeContentRef","baseMinValue","actualMinValue","low","high","mid","testPoints","buildPoints","testProgress","getProgress","normalizedProgress","points","setValue","containerWidth","setContainerWidth","badgeWidth","setBadgeWidth","isDragging","setIsDragging","startXRef","prevBadgeWidth","getValue","minSliderProgress","titleEl","querySelector","floatingBadgeTitle","computedStyle","getComputedStyle","fontWeight","fontSize","fontFamily","textWidth","titleWidth","descriptionEl","descriptionWidth","scrollWidth","contentWidth","newBadgeWidth","currentWidth","abs","handleContainerResize","contentRect","minBadgeX","maxBadgeX","beakOffset","beakTipOffset","beakWidth","currentBeakWidth","calcBadgePosition","beakPath","generateBeakPath","handleChange","event","rawValue","clampedValue","handlePointerDown","clientX","handlePointerMove","distance","handlePointerUp","rect","clickZoneWidth","isInIconArea","dynamicColor","badgeStyle","rootStyle","dragging","floatingBadgeWrapper","floatingBadge","clickable","noTransition","floatingBadgeSparkles","floatingBadgeContent","withDescription","floatingBadgeTriangle","height","viewBox","fill","x1","x2","y1","y2","offset","floatingBadgeTrianglePath","d","step","onPointerDown","onPointerMove","onPointerUp","customValueIcon","i","lastPoint","stepsNeeded","nextPoint","pointIndex","findIndex","point","prevPoint","halfBadgeWidth","cornerBeakHalfWidth","maxBeakOffset","thumbHalf","trackLength","distanceFromLeft","distanceFromRight","isLeftSide","distanceToEdge","beakOffsetStart","t","tExp","maxTipOffset","TIP_RADIUS","clampedTipOffset","tipOffset","tipX","r","y","getCurrentTabId","tonBalance","actions","directInfo","closePriceConfirmModal","newAmount","isTon","currentBalance","sendStarPaymentForm","originalAmount","originalAmountText","newAmountText","ton","formatStarsAmount","convertCurrencyFromBaseUnit","renderStarsAmount","addStarsButton","addStarsIcon","renderTonAmount","balanceBlock","balanceInfo","smallerText","balanceBottom","PAID_MESSAGES_PURPOSE","getChatTitle","selectIsPremiumPurchaseBlocked","selectSharedSettings","resolveTransitionName","TabList","ParticlesHeader","StarTopupOptionList","StarsSubscriptionItem","StarsTransactionItem","HEADER_HEIGHT","TRANSACTION_TYPES","TRANSACTION_TABS_KEYS","TRANSACTION_ITEM_CLASS","SUBSCRIPTION_PURPOSE","starsBalanceState","tonBalanceState","canBuyPremium","shouldForceHeight","tonTopupUrl","animationLevel","closeStarsBalanceModal","loadStarsTransactions","loadStarsSubscriptions","openStarsGiftingPickerModal","currentState","history","subscriptions","isHeaderHidden","setHeaderHidden","areTabsPinned","pinTabs","unpinTabs","selectedTabIndex","setSelectedTabIndex","areBuyOptionsShown","showBuyOptions","hideBuyOptions","tabsRef","originStarsPayment","originReaction","originGift","topup","shouldOpenOnBuy","ongoingTransactionAmount","form","invoice","totalAmount","subscriptionInfo","subscriptionPricing","balanceNeeded","starsNeeded","starsNeededText","channel","bot","botId","purpose","shouldShowItems","transactions","shouldSuggestGifting","modalHeight","transactionCount","transactionTabs","tosText","parts","split","renderStarsHeaderSection","starButton","openStarsGiftingPickerModalHandler","topupOptions","options","handleBuyStars","renderTonHeaderSection","tonBalanceContainer","tonIconBalance","tonInUsd","topUpButton","handleTonTopUp","tabsTop","handleLoadMoreTransactions","handleLoadMoreSubscriptions","originPaymentInputInvoice","inputInvoice","spendPurposePeerId","minimal","dialogStyle","noSeparator","starHeaderText","tos","subscription","nextOffset","loadMore","loadMoreIcon","lastSection","isRtl","renderCount","shouldRestoreHeight","noScrollRestoreOnTop","transaction","isRefund","tabs","tabClassName","tab","activeTab","onSwitchTab","getCustomPeerFromInvite","PeerChip","PaidMediaThumb","StarsBackground","paidMediaMessage","paidMediaChat","closeStarsPaymentModal","markLoading","unmarkLoading","prevModal","isBotSubscription","subscriptionPeriod","canShowPeerItem","photo","descriptionText","botName","starsText","extendedMedia","paidMedia","areAllPhotos","media","duration","areAllVideos","mediaText","channelTitle","disclaimerText","inviteCustomPeer","handlePayment","paymentContent","paymentImages","dir","paymentPhoto","avatarStar","avatarWebPhoto","avatarSize","amountBadge","paymentImageBackground","src","alt","draggable","botItem","paymentButton","messageInputInvoice","isPaidMedia","closeChatRefundModal","toggleNoPaidMessagesException","shouldRefundStars","setShouldRefundStars","renderingUser","starsToRefund","handleConfirmRemoveFee","shouldRefundCharged","StarLogo","closeStarsGiftModal","requestConfetti","selectedOption","setSelectedOption","showConfetti","dialog","withStars","isCompleted","handleClick","renderGiftTitle","bottomText","headerInfo","logo","starsGiftOptions","secondaryInfo","buildStarsTransactionCustomPeer","shouldUseCustomPeer","getTransactionTitle","paidMessages","isGiftResale","isNegativeAmount","isPostsSearch","isDropOriginalDetails","isPrepaidUpgrade","isStarGiftAuctionBid","starRefCommision","isGiftUpgrade","isReaction","giveawayPostId","isMyGift","isGift","customPeer","currencyAmount","useSelector","selectProvidedPeer","openStarsSubscriptionModal","pricing","until","isCancelled","hasExpired","subscriptionStar","info","webPhoto","statusEnded","statusPricing","statusPeriod","closeStarsSubscriptionModal","fulfillStarsSubscription","changeStarsSubscription","checkChatInvite","loadStarStatus","buttonState","canRefulfill","canRestart","chatInviteHash","invoiceSlug","handleButtonClick","starModalData","hasBotCancelled","avatarWrapper","starsBackground","amountStar","footerTos","secondary","danger","prevModalData","renderingModalData","getMediaHash","getMediaThumbUri","useMedia","MediaSpoiler","THUMB_LIMIT","PREVIEW_THUMB_LIMIT","isTransactionPreview","reverse","arr","realIndex","thumbDataUri","thumbnail","dataUri","SingleMediaThumb","noOutline","boughtMedia","video","mediaHash","mediaBlob","blurry","full","CUSTOM_PEER_PREMIUM","selectOptionalPeer","openStarsTransactionModal","transactionPeer","isUniqueGift","data","avatarPeer","subtitleKey","hasFailed","isPending","previewContent","uniqueGiftBackground","amountColorClass","negative","positive","MediaViewerOrigin","getMessageLink","selectGiftStickerForStars","selectGiftStickerForTon","StarsTransactionModal","topSticker","paidMessageCommission","openMediaViewer","closeStarsTransactionModal","handleOpenMedia","origin","StarsTransaction","standaloneMedia","toName","getStarsPeerTitleKey","messageLink","giveawayMessageLink","mediaAmount","m","shouldDisplayAvatar","mediaPreview","refunded","peerLabel","totalStars","tid","footerTextParts","buttonText","starsPaidMessageCommissionPermille","starsGiftSticker","getIsHeavyAnimating","useForceUpdate","useHeavyAnimation","useRunDebounced","useSyncEffect","useDebouncedMemo","resolverFn","ms","dependencies","isFrozen","updateWhenUnfrozen","useHeavyAnimationFreeze","runDebounced","forceUpdate","handleUnfreeze","noop","callApi","useAsync","DEBOUNCE_TIMEOUT","peerGlobalSearch","searchResult","accountResultIds","globalResultIds","prepareChatMemberSearch","memberFilter","members","member","queryFn","debounceTimeout","debouncedQuery","setCurrentResultsQuery","queryCallback","Promise","resolve","answer"],"sourceRoot":""}